{
  "scripts": {
    "lint": "pronto run",
    "eslint": "git diff --name-only --diff-filter=dx origin/master... | grep apps/site/assets/js/.*\\.js | xargs apps/site/assets/node_modules/.bin/eslint -c apps/site/assets/.eslintrc.js",
    "tslint": "cd apps/site/assets && npm run tslint",
    "eslint:fix": "git diff --name-only --diff-filter=dx origin/master... | grep apps/site/assets/js/.*\\.js | xargs apps/site/assets/node_modules/.bin/eslint -c apps/site/assets/.eslintrc.js --fix",
    "format": "cd apps/site/assets && node_modules/.bin/prettier --write \"{js,ts}/**/*.{js,ts,tsx}\"",
    "format:check": "cd apps/site/assets && node_modules/.bin/prettier \"{js,ts}/**/*.{js,ts,tsx}\" --list-different",
    "ci-install": "cd apps/site/assets && npm ci --no-optional",
    "install": "cd apps/site/assets && npm install --no-optional",
    "test": "mix test && npm run test:js && mix backstop.tests",
    "test:js": "cd apps/site/assets && npm run test",
    "test:jest": "cd apps/site/assets && npm run test:jest",
    "test:jest:update": "cd apps/site/assets && npm run test:jest:update",
    "test:jest:cov": "open apps/site/assets/ts/coverage/index.html",
    "backstop": "./semaphore/backstop.sh",
    "backstop:test": "cd apps/site/test && ../assets/node_modules/.bin/backstop test --docker",
    "backstop:reference": "cd apps/site/test && ../assets/node_modules/.bin/backstop reference --docker",
    "brunch:build:namespaced": "cd apps/site/assets/namespaced_header_footer && npm run brunch:build",
    "server:mocked": "WARM_CACHES=false REACT_BUILD_PATH=${PWD}/apps/site/react_renderer/dist/app.js USE_SERVER_SENT_EVENTS=false WIREMOCK_PROXY=true MIX_ENV=prod PORT=8082 STATIC_SCHEME=http STATIC_HOST=host.docker.internal STATIC_PORT=8082 V3_URL=http://localhost:8080 OPEN_TRIP_PLANNER_URL=http://localhost:8080 DRUPAL_ROOT=http://www.cms.example mix do deps.compile --force, compile --no-deps-check --force, phx.server",
    "server:mocked:nocompile": "WARM_CACHES=false REACT_BUILD_PATH=${PWD}/apps/site/react_renderer/dist/app.js USE_SERVER_SENT_EVENTS=false WIREMOCK_PROXY=true MIX_ENV=prod PORT=8082 STATIC_SCHEME=http STATIC_HOST=host.docker.internal STATIC_PORT=8082 V3_URL=http://localhost:8080 OPEN_TRIP_PLANNER_URL=http://localhost:8080 DRUPAL_ROOT=http://www.cms.example mix phx.server",
    "wiremock": "cd apps/site && java -jar ${WIREMOCK_PATH:-../../bin/wiremock-standalone-2.14.0.jar} --root-dir=test --global-response-templating",
    "wiremock:record": "npm run wiremock -- --record-mappings",
    "wiremock:record:clean": "rm -fr apps/site/test/__files/*.json && rm -fr apps/site/test/mappings/mapping* && npm run wiremock:record",
    "webpack:watch": "cd apps/site/assets && npm run webpack:watch",
    "webpack:build": "cd apps/site/assets && npm run webpack:build",
    "webpack:analyze": "cd apps/site/assets && npm run webpack:analyze",
    "ts:build": "cd apps/site/assets/ts && npm run ts:build",
    "react:setup": "cd apps/site/react_renderer && npm install",
    "react:build": "cd apps/site/react_renderer && npx webpack",
    "routes": "cd apps/site && mix phx.routes && cd ../..",
    "dialyzer": "mix dialyzer --halt-exit-status"
  }
}
