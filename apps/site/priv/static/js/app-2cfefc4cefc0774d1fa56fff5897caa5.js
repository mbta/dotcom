(()=>{var t,e,n,i={23360:(t,e,n)=>{"use strict";e.isVehicleChannel=void 0;var i=n(38444);e.isVehicleChannel=function(t){return(t.includes("vehicles:")||t.includes("vehicles-v2:"))&&!t.includes(":remove")};var s=function(t,n){if(window.socket){window.channels[t]||(window.channels[t]=window.socket.channel(t,{}));var i=window.channels[t];if(["joined","joining"].includes(i.state)||i.join().receive("error",(function(e){var n=e.reason;console.error("failed to join ".concat(t),n);var i=new CustomEvent(t,{detail:{error:n}});document.dispatchEvent(i)})).receive("ok",(function(s){if(console.log("success joining ".concat(t)),n&&s&&n(s),(0,e.isVehicleChannel)(t)){var a=t.split(":"),o=a[1],r=a[2];i.push("init",{route_id:o,direction_id:r})}})),i.on("data",(function(e){var n=new CustomEvent(t,{detail:e});document.dispatchEvent(n)})),i.onError((function(e){console.error("error on channel ".concat(t," : ").concat(e));var n=new CustomEvent(t,{detail:{error:e}});document.dispatchEvent(n)})),(0,e.isVehicleChannel)(t)){var a=t.split(":")[0];s("".concat(a,":remove"))}}};var a=function(t){if(window.channels&&window.channels[t]&&(window.channels[t].off("data"),window.channels[t].leave(),delete window.channels[t]),(0,e.isVehicleChannel)(t)){var n=t.split(":")[0];a("".concat(n,":remove"))}};e.default=function(){window.socket=new i.Socket("/socket",{}),window.socket.onClose((function(t){"close"!==t.type||t.wasClean||(console.log("Socket was forced closed by the browser -- reloading to establish WebSocket connection."),window.location.reload())})),window.socket.connect(),window.channels={};document.addEventListener("turbolinks:load",(function(){document.querySelectorAll("[data-channel]").forEach((function(t){var e=t.getAttribute("data-channel");e&&s(e)}))}));document.addEventListener("turbolinks:before-render",(function(){Object.keys(window.channels).forEach((function(t){return a(t)}))}))}},38093:(t,e,n)=>{"use strict";var i=n(61348),s=function(t){t.setAttribute("style","display: none")};e.Z=function(){var t=document.querySelector(".js-fullscreen-error__dismiss"),e=document.querySelector(".js-fullscreen-error");t&&e&&(t.addEventListener("click",(function(){return s(e)})),t.addEventListener("keydown",(function(t){return(0,i.handleNativeEnterKeyPress)(t,(function(){s(e)}))})))}},35860:(t,e,n)=>{"use strict";e.BN=void 0;var i=n(58509),s=n(61348);function a(){this.style.outline="none"}function o(t){t.setAttribute("aria-expanded","true"===t.getAttribute("aria-expanded")?"false":"true")}function r(t){o(t)}var l={mobile:"toggle-mobile-nav",search:"toggle-nav-search",desktop:"toggle-desktop-nav"},c=Object.fromEntries(Object.entries(l).map((function(t){var e=t[0],n=t[1];return[e,"[data-nav=".concat(n,"]")]}))),d=Object.values(c).join(", ");function u(t,e){if(t&&e){var n=t.getBoundingClientRect(),i=n.bottom,s=n.height,a="".concat(i,"px"),o="".concat(s,"px");t.querySelectorAll("[data-nav='desktop-section']").forEach((function(t){t.style.top=o}));var r=t.querySelector("[data-nav='mobile-content']");r&&(r.style.top=a);var l=e.querySelector("[data-nav='veil']");l&&(l.style.top=a)}}function h(t){var e,n;if(t){var h=t.querySelector("header");if(h){window.addEventListener("DOMContentLoaded",(function(){u(h,t)})),window.addEventListener("resize",(function(){u(h,t)})),h.querySelectorAll("button".concat(c.mobile,", button").concat(c.search)).forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),u(h,t),r(e.currentTarget)}))})),h.querySelectorAll("a".concat(c.desktop)).forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),r(t.currentTarget)}))})),t.querySelectorAll("[data-nav='mobile-content'] .js-focus-on-expand").forEach((function(t){t.addEventListener("focus",a)}));var p=new MutationObserver((function(){var e=h.querySelector("button".concat(c.mobile));"navOpen"in h.dataset?(t.querySelector("[data-nav='mobile-content']").scrollTop=0,e.innerHTML="Close"):e.innerHTML="Menu","searchOpen"in h.dataset&&t.querySelector("[data-nav='search'] #search-header-mobile__input").focus()})),m=new MutationObserver((function(e){var n,s=e.map((function(t){return t.target.dataset.nav||""})),a=void 0!==e.find((function(t){var e=t.oldValue;return"true"===t.target.getAttribute("aria-expanded")&&"true"!==e}));(null===(n=t.querySelector('meta[name="theme-color"]'))||void 0===n||n.setAttribute("content",a?"#0b2f4c":"#165c96"),a)?(t.dataset.navOpen="true",s.includes(l.mobile)?(h.dataset.navOpen="true",(0,i.disableBodyScroll)(t.querySelector("[data-nav='mobile-content']"))):s.includes(l.search)&&(h.dataset.searchOpen="true",(0,i.disableBodyScroll)(h))):Array.from(t.querySelectorAll(d)).find((function(t){return"true"===t.getAttribute("aria-expanded")}))||((0,i.clearAllBodyScrollLocks)(),delete t.dataset.navOpen,s.includes(l.mobile)?delete h.dataset.navOpen:s.includes(l.search)&&delete h.dataset.searchOpen);if(a&&s.includes(l.desktop)){(0,i.disableBodyScroll)(h,{reserveScrollBarGap:!0});var r=t.querySelector("[data-nav='veil']");if(r&&!r.style.paddingRight&&"true"===t.dataset.navOpen){var u=t.querySelector("body"),p=null==u?void 0:u.style.paddingRight;p&&""!==p&&(r.style.width="calc(100% - ".concat(p,")"))}var m=e.map((function(t){return t.target.getAttribute("aria-controls")}))[0];Array.from(t.querySelectorAll("".concat(c.desktop))).filter((function(t){return t.getAttribute("aria-controls")!==m&&"true"===t.getAttribute("aria-expanded")})).forEach(o)}}));p.observe(h,{attributes:!0,attributeFilter:["data-nav-open","data-search-open"]}),t.querySelectorAll(d).forEach((function(t){m.observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-expanded"]})}));var f=t.querySelector("[data-nav='mobile-content']");window.matchMedia("(prefers-reduced-motion: no-preference)").matches&&f.querySelectorAll("[data-accordion] h3 > button").forEach((function(t){return t.addEventListener("click",(function(e){var n=e.target;if("false"!==t.getAttribute("aria-expanded")){var i=n.getAttribute("aria-controls"),s=f.querySelector("#".concat(i)),a=n.getBoundingClientRect(),o=function(){if(s){var t=s.getBoundingClientRect();return t.y<a.y?t.height:0}return 0}(),r=n.offsetTop-a.height/2-o;f.scrollTo({behavior:"smooth",left:0,top:r})}}),!1)}));for(var g=t.querySelectorAll("[data-nav='link']"),y=0;y<g.length;y+=1)g[y].addEventListener("click",v);null===(e=h.querySelector("[data-nav='logo']"))||void 0===e||e.addEventListener("click",v),t.addEventListener("keydown",(function(t){(0,s.handleNativeEscapeKeyPress)(t,v)})),null===(n=t.querySelector("[data-nav='veil']"))||void 0===n||n.addEventListener("click",v),document.addEventListener("autocomplete:selected",v)}}function v(){t.querySelectorAll(d).forEach((function(t){"true"===t.getAttribute("aria-expanded")&&o(t)}))}}e.BN=u,e.ZP=function(){document.addEventListener("turbolinks:load",(function(){h(document.documentElement)}),{passive:!0})}},72838:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.debouncePromise=void 0;e.debouncePromise=function(t,e){var n;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n&&window.clearTimeout(n),new Promise((function(s){n=window.setTimeout((function(){return s(t.apply(void 0,i))}),e)}))}},e.default=function(t,e){var n;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];window.clearTimeout(n),n=window.setTimeout((function(){return t.apply(void 0,i)}),e)}}},61348:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleNativeEscapeKeyPress=e.handleNativeEnterKeyPress=e.isEscape=e.isEnter=void 0;e.isEnter=function(t){return"Enter"===t||13===t};e.isEscape=function(t){return"Escape"===t||27===t};e.handleNativeEnterKeyPress=function(t,n){return(0,e.isEnter)(t.key||t.keyCode)?n(t):function(){}};e.handleNativeEscapeKeyPress=function(t,n){return(0,e.isEscape)(t.key||t.keyCode)?n(t):function(){}}},98275:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSMDown=e.isLGDown=void 0;var n=544,i=1088;e.isLGDown=function(){return window.matchMedia("(max-width: ".concat(i,"px)")).matches};e.isSMDown=function(){var t;return null===(t=null===window||void 0===window?void 0:window.matchMedia("(max-width: ".concat(n,"px)")))||void 0===t?void 0:t.matches}},9577:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseQuery=e.paramsToString=void 0;e.paramsToString=function(t,e){return t&&0!==Object.keys(t).length?"?".concat(Object.keys(t).map((function(n){return"".concat(n,"=").concat(e(t[n]))})).join("&")):""};e.parseQuery=function(t,e){return t?t.substring(1).split("&").reduce(function(t){return function(e,i){var s,a=i.split("="),o=a[0],r=a[1];return n(n({},e),((s={})[t(o)]=t(r.replace(/\+/g," ")),s))}}(e),{}):{}}},31845:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.highlightText=e.breakTextAtSlash=void 0;e.breakTextAtSlash=function(t){return t.replace(/\//g,"/​")},e.highlightText=function(t,e){void 0===e&&(e=[]);var n=[],i=0;return e.forEach((function(e){var s=e.offset,a=e.length;n.push(t.slice(i,s)),n.push("<em>".concat(t.slice(s,s+a),"</em>")),i=a+s})),n.push(t.slice(i)),n.join("")}},22407:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(2481)),l=o(n(17773));e.default=function(){window.sentry&&r.init({dsn:window.sentry.dsn,environment:window.sentry.environment,beforeSend:l.default,autoSessionTracking:!1,sampleRate:.6,initialScope:{tags:{"dotcom.application":"frontend"}},beforeBreadcrumb:function(t){var e,n,i,s,a,o;return(null===(n=null===(e=t.data)||void 0===e?void 0:e.url)||void 0===n?void 0:n.contains("clarity.ms"))||(null===(s=null===(i=t.data)||void 0===i?void 0:i.url)||void 0===s?void 0:s.contains("doubleclick.net"))||(null===(o=null===(a=t.data)||void 0===a?void 0:a.url)||void 0===o?void 0:o.contains("google-analytics.com"))?null:t},ignoreErrors:["translate_","ResizeObserver loop limit exceeded","Non-Error promise rejection captured","Extension context invalidated",/^xd\/\(\/_\/translate_http/i],denyUrls:[/extensions\//i,/^chrome:\/\//i,/^chrome-extension:\/\//i,/^resource:\/\//i,/^moz-extension:\/\//i,/^safari-extension:/i,/safari-extension:\/\//i,/google/i,/gtag/i,/gstatic/i,/clarity/i,/gstatic\.com\/recaptcha\/releases/i,/bat\.bing\.com\/bat\.js/i,/file:\/\//i,/widget\.trustpilot\.com/i,/js\.hs-banner\.com/i,/js\.hs-analytics\.net/i,/js\.hs-scripts\.com/i,/js\.hsadspixel\.net/i,/browser\.sentry-cdn\.com/i,/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/clarity\.ms/i,/ads-twitter\.com/i,/googletagmanager\.com/i,/google-analytics\.com/i,/snap\.licdn\.com/i,/a\.quora\.com/i]}),document.body.addEventListener("error",(function(t){var e=t.target;t.target&&("IMG"===e.tagName?r.captureMessage("Failed to load image: ".concat(t.target.src),"warning"):"LINK"===e.tagName?r.captureMessage("Failed to load css: ".concat(t.target.href),"warning"):"SCRIPT"===e.tagName?r.captureMessage("Failed to load script: ".concat(t.target.src),"warning"):"VIDEO"===e.tagName&&r.captureMessage("Failed to load video: ".concat(t.target.src),"warning"))}),!0)}},48968:(t,e)=>{"use strict";e.sO=void 0;function n(t){t.querySelectorAll("[data-accordion]").forEach((function(t){var e=t.querySelectorAll("h3 > button");function n(){var t=this,n="true"===this.getAttribute("aria-expanded");e.forEach((function(e){e.setAttribute("aria-expanded",e===t?(!n).toString():"false")}))}e.forEach((function(t,e,i){t.addEventListener("click",n,!1),t.addEventListener("keyup",(function(t){switch(t.code){case"Space":n.call(this);break;case"ArrowDown":e<i.length-1&&i[e+1].focus();break;case"ArrowUp":e>0&&i[e-1].focus();break;default:return}t.preventDefault()}),!1),function(t){new MutationObserver((function(t){t.forEach((function(t){var e=t.oldValue,n=t.target,i=n.getAttribute("aria-expanded");if(i!==e){var s=n.parentElement;"true"===s.getAttribute("data-accordion-expanded")&&"false"===i?s.setAttribute("data-accordion-expanded","false"):"true"===i&&s.setAttribute("data-accordion-expanded","true")}}))})).observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:["aria-expanded"]})}(t)}))}))}e.sO=function(){document.addEventListener("turbolinks:load",(function(){n(document.documentElement)}))}},59249:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onStateChange=e.transitNearMeURL=e.getTitleAttribute=e.isContentItem=e.isRouteItem=void 0;var i=n(98275);function s(t){return Object.keys(t).includes("route")}e.isRouteItem=s,e.isContentItem=function(t){return Object.keys(t).includes("_content_type")};e.getTitleAttribute=function(t){return e=t,Object.keys(e).includes("stop")?["stop","name"]:s(t)?["route","name"]:Object.keys(t._highlightResult);var e},e.transitNearMeURL=function(t,e,n){return"/transit-near-me?latitude=".concat(t,"&longitude=").concat(e).concat(n?"&".concat(n):"")};e.onStateChange=function(t){var e=t.state;(0,i.isLGDown)()&&(e.isOpen?document.documentElement.dataset.navOpen="true":delete document.documentElement.dataset.navOpen)}},49057:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(10854),a=n(67294),o=n(73935),r=i(n(15967)),l=n(59249),c={createElement:a.createElement,Fragment:a.Fragment,render:o.render};e.default=function(t){var e=t.querySelector(".c-search-bar__autocomplete"),n=t.querySelector(".c-search-bar__autocomplete-results");if(!e||!n)throw new Error("container needed");var i={id:e.id,container:e,panelContainer:n,detachedMediaQuery:"none",classNames:{input:"c-form__input-container"},openOnFocus:!0,onStateChange:l.onStateChange,onSubmit:function(t){var e=t.state;window.Turbolinks.visit("/search?query=".concat(e.query))},placeholder:"Search for routes, info, and more",getSources:function(t){return(0,r.default)(e.dataset,t)},renderer:c};(0,s.autocomplete)(i)}},15967:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(60768)),a=i(n(94403)),o=i(n(25223)),r=i(n(98478)),l=i(n(1629)),c=n(72838),d={sourceId:"locations",getItems:r.default,getItemUrl:function(t){return t.item.url},templates:{item:s.default}};var u=(0,c.debouncePromise)((function(t){return Promise.resolve(t)}),300);e.default=function(t,e){var n=t.geolocation,i=t.locations,s=t.algolia,r=e.query,c=e.setIsOpen,h=[],p=[],m=s?s.split(","):[];return void 0!==n&&p.push(function(t){return{sourceId:"geolocation",getItems:function(){return[{}]},templates:{item:(0,a.default)(t)}}}(c)),r?r.length<2&&Number.isNaN(parseInt(r,10))?[]:(void 0!==i&&h.push(d),m.length&&h.unshift(function(t){return{sourceId:"algolia",templates:{item:o.default},getItems:(0,l.default)(t)}}(m)),u(h)):p}},1629:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return function(e){var i=e.query;return fetch("/search/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({algoliaQuery:i,algoliaIndexes:t})}).then((function(t){return t.json()})).then((function(t){return t.results.flatMap((function(t){var e=t.hits,i=t.index;return e.map((function(t){return n(n({},t),{index:i})}))}))}))}}},98478:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},i.apply(this,arguments)},s=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,a){function o(t){try{l(i.next(t))}catch(t){a(t)}}function r(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,r)}l((i=i.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,i,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(s=2&a[0]?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(59249);e.default=function(t){var e=t.query;return fetch("/places/autocomplete/".concat(encodeURIComponent(e),"/2/null")).then((function(t){return t.json()})).then((function(t){return s(void 0,void 0,void 0,(function(){var n,s;return a(this,(function(a){return n=t.predictions,s=JSON.parse(n),[2,Promise.all(s.map((function(t){return fetch("/places/details/".concat(encodeURIComponent(t.address))).then((function(t){return t.json()})).then((function(n){var s=JSON.parse(n.result),a=s.latitude,r=s.longitude,l=s.formatted,c=(0,o.transitNearMeURL)(a,r,"from=search&query=".concat(encodeURIComponent(e),"&address=").concat(encodeURIComponent(l)));return i(i({},t),{url:c})}))})))]}))}))}))}},25223:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.LinkForItem=void 0;var s=i(n(67294)),a=n(96486),o=n(59249),r=n(96031);function l(t){var e=t.item,n=t.query,i=t.children,r=(0,o.isContentItem)(e)?e._content_url:e.url,l=(0,a.get)(e._highlightResult,(0,o.getTitleAttribute)(e));if((0,o.isContentItem)(e)&&l&&0===l.matchedWords.length){var c="".concat(r,"#:~:text=").concat(encodeURIComponent(n));return s.default.createElement("a",{href:c,className:"aa-ItemLink","data-turbolinks":"false"},i)}return s.default.createElement("a",{href:r,className:"aa-ItemLink"},i)}e.LinkForItem=l;e.default=function(t){var e=t.item,n=t.state,i=t.components,c=e.index,d=(0,o.getTitleAttribute)(e),u=(0,r.getFeatureIcons)(e,c),h=(0,o.isContentItem)(e)?(0,r.contentIcon)(e):(0,r.getIcon)(e,c);return s.default.createElement(l,{item:e,query:n.query},s.default.createElement("div",{className:"aa-ItemContent"},s.default.createElement("span",{dangerouslySetInnerHTML:{__html:h}}),!(0,o.isContentItem)(e)&&u.map((function(t){return s.default.createElement("span",{key:(0,a.uniqueId)(),className:"c-search-result__feature-icons",dangerouslySetInnerHTML:{__html:t}})})),s.default.createElement("span",{className:"aa-ItemContentBody"},s.default.createElement("span",{className:"aa-ItemContentTitle"},i.Highlight({hit:e,attribute:d})," ",(0,o.isRouteItem)(e)&&3===e.route.type&&s.default.createElement("span",{className:"c-search-result__long-name"},i.Highlight({hit:e,attribute:["route","long_name"]}))))))}},94403:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(67294)),l=o(n(99546)),c=n(59249);function d(t){var e=t.setIsOpen,n=(0,r.useState)(),i=n[0],s=n[1],a=(0,r.useState)(),o=a[0],d=a[1],u=(0,r.useState)(!1),h=u[0],p=u[1];return(0,r.useEffect)((function(){if(o){s("Redirecting...");var t=o.coords,n=t.latitude,i=t.longitude,a=(0,c.transitNearMeURL)(n,i);a&&window.Turbolinks.visit(a),setTimeout((function(){s(void 0),e(!1)}),3e3)}}),[o,e]),i?r.default.createElement("div",{style:{textAlign:"center"}},i," ",r.default.createElement("i",{"aria-hidden":"true",className:"fa fa-cog fa-spin"})):h?r.default.createElement("div",{className:"u-error"},"".concat(window.location.host," needs permission to use your location. Please update your browser's settings or refresh the page and try again.")):r.default.createElement("button",{id:"search-bar__my-location",className:"c-search-bar__my-location",type:"button",onClick:function(t){t.stopPropagation(),e(!0),s("Getting your location..."),(0,l.default)().then(d).catch((function(){p(!0),s(void 0)}))}},r.default.createElement("span",null,r.default.createElement("span",{className:"c-search-result__content-icon fa fa-location-arrow","aria-hidden":"true"})),r.default.createElement("span",{className:"aa-ItemContentTitle"},"Use my location to find transit near me"))}e.default=function(t){return function(){return r.default.createElement(d,{setIsOpen:t})}}},60768:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=i(n(67294)),a=n(31845);e.default=function(t){var e=t.item,n=e,i=n.address,o=n.highlighted_spans;return s.default.createElement("a",{href:e.url},s.default.createElement("span",{"aria-hidden":"true",className:"c-search-result__content-icon fa fa-map-marker"}),s.default.createElement("span",{className:"aa-ItemContentTitle",dangerouslySetInnerHTML:{__html:(0,a.highlightText)(i,o)}}))}},96031:(t,e,n)=>{"use strict";n.r(e),n.d(e,{SELECTORS:()=>c,TEMPLATES:()=>u,TEMPLATES_ALT_USE_MY_LOCATION:()=>h,autocompleteByGoogle:()=>d,contentIcon:()=>y,getFeatureIcons:()=>C,getIcon:()=>v,getTitle:()=>_,getUrl:()=>b,iconFromGTFS:()=>g,parseResult:()=>L,renderResult:()=>x});var i=n(5485),s=n.n(i),a=n(96486),o=n.n(a),r=n(26574),l=n(31845);const c={result:"js-search-result"},d=()=>window&&"google"===window.locationAutocompleteBacking,u={poweredByGoogleLogo:s().compile('<div class="c-search-result__hit c-search-result__google">{{{logo}}}</div>'),fontAwesomeIcon:s().compile('<span aria-hidden="true" class="c-search-result__content-icon fa {{icon}}"></span>'),formattedDate:s().compile('<span class="c-search-result__event-date">{{date}}</span>'),locations:s().compile('\n    <a id="hit-{{id}}" class="c-search-result__link u-no-underline" url={{hitUrl}}>\n      <span>{{{hitIcon}}}</span>\n      <span class="c-search-result__hit-name">{{{hitTitle}}}</span>\n    </a>\n  '),usemylocation:s().compile('\n    <a id="search-bar__my-location" class="c-search-bar__my-location">\n      <i aria-hidden="true" class="fa fa-location-arrow "></i>\n      Use my location\n      <i aria-hidden="true" id="search-result__loading-indicator" class="fa fa-cog fa-spin c-search-result__loading-indicator"></i>\n    </a>\n  '),threePlusIcons:s().compile(`\n    {{#hasDate}}\n    <div class="c-search-result__hit--vertical">\n    {{/hasDate}}\n    {{#id}}\n    <a id="hit-{{id}}" class="${c.result} c-search-result__link" href="{{hitUrl}}">\n    {{/id}}\n    {{^id}}\n    <a class="${c.result} c-search-result__link u-no-underline" href="{{hitUrl}}" data-queryid="{{analyticsData.queryID}}" data-hit-position="{{analyticsData.position}}" data-objectid="{{analyticsData.objectID}}">\n    {{/id}}\n      <span>{{{hitIcon}}}</span>\n      <span class="c-search-result__feature-icons">\n      {{#hitFeatureIcons}}\n        {{{.}}}\n      {{/hitFeatureIcons}}\n      <br/>\n    </span>\n      <span class="c-search-result__hit-name">{{{hitTitle}}}</span>\n    </a>\n    {{#hasDate}}\n    </div>\n    {{/hasDate}}\n  `),default:s().compile(`\n    {{#hasDate}}\n    <div class="c-search-result__hit--vertical">\n    {{/hasDate}}\n    {{#id}}\n    <a id="hit-{{id}}" class="${c.result} c-search-result__link" href="{{hitUrl}}">\n    {{/id}}\n    {{^id}}\n    <a class="${c.result} c-search-result__link u-no-underline" href="{{hitUrl}}" data-queryid="{{analyticsData.queryID}}" data-hit-position="{{analyticsData.position}}" data-objectid="{{analyticsData.objectID}}">\n    {{/id}}\n      <span>{{{hitIcon}}}</span>\n      <span class="c-search-result__feature-icons">\n      {{#hitFeatureIcons}}\n        {{{.}}}\n      {{/hitFeatureIcons}}\n    </span>\n      <span class="c-search-result__hit-name">{{{hitTitle}}}</span>\n    </a>\n    {{#hasDate}}\n    </div>\n    {{/hasDate}}\n  `)},h={...u,usemylocation:s().compile('\n    <a id="search-bar__my-location" class="c-search-bar__my-location">\n      <i aria-hidden="true" class="fa fa-location-arrow "></i>\n      Use my location to find transit near me\n      <i aria-hidden="true" id="search-result__loading-indicator" class="fa fa-cog fa-spin c-search-result__loading-indicator"></i>\n    </a>\n  ')};function p(t){return t.map((t=>t.toLowerCase())).filter((t=>"subway"!==t)).map((t=>r.J(t)))}function m(t){if(t.includes("Green-"))return t.toLowerCase().replace("-","_line_");return{Green:"green_line",Red:"red_line",Orange:"orange_line",Blue:"blue_line",Mattapan:"mattapan_line"}[t]}function f(t){const e=m(t);return e?r.J(e):t in["commuter_rail","bus","ferry","silver_line"]?r.J(t):t.includes("CR-")?r.J("commuter_rail"):r.J(t)}function g(t,e){if(!t)return u.fontAwesomeIcon.render({icon:"fa-info"});let n=function(t){return Array.isArray(t)?t.map((t=>f(t))):[f(t)]}(t);return e&&(n=n.concat(function(t){return Array.isArray(t)?p(t):p([t])}(e))),n}function y(t){let e;if("entity:file"===t.search_api_datasource)e=function(t){switch(t._file_type){case"application/pdf":return"fa-file-pdf-o";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":return"fa-file-powerpoint-o";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":return"fa-file-excel-o";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return"fa-file-word-o";default:return"fa-file-o"}}(t);else{e={search_result:"fa-info",news_entry:"fa-newspaper-o",event:"fa-calendar",project:"fa-wrench",project_update:"fa-wrench",page:"fa-info",landing_page:"fa-info",person:"fa-user",locations:"fa-map-marker"}[t._content_type]||"fa-info"}return u.fontAwesomeIcon.render({icon:e})}function v(t,e){switch(e){case"locations":return y({...t,_content_type:"locations"});case"stops":return function(t){return t.stop["station?"]?r.J("station"):r.J("stop")}(t);case"routes":return r.J(function(t){switch(t.type){case 2:return"commuter_rail";case 3:return t.name.startsWith("SL")?"silver_line":"bus";case 4:return"ferry";default:return m(t.id)}}(t.route));case"popular":return"airplane"===(n=t.icon)?u.fontAwesomeIcon.render({icon:"fa-plane"}):r.J(n);case"projects":return function(t){if(null===t.related_transit_gtfs_id&&null==t.related_transit_gtfs_ancestry)return"";const e=g(t.related_transit_gtfs_id,t.related_transit_gtfs_ancestry);if(Array.isArray(e)){return o().uniq(e).join(" ")}return e}(t);case"drupal":case"pages":case"documents":case"events":case"news":return y(t);default:return""}var n}function b(t,e){switch(e){case"stops":return`/stops/${t.stop.id}`;case"routes":return`/schedules/${t.route.id}`;case"popular":return t.url;case"drupal":case"projects":case"pages":case"documents":case"events":case"news":return function(t){return"entity:file"===t.search_api_datasource?`/sites/default/files/${t._file_uri.replace(/public:\/\//,"")}`:"search_result"===t._content_type?t._search_result_url.replace(/internal:/,""):t._content_url}(t);case"locations":return"";default:return"#"}}function _(t,e){switch(e){case"locations":const{address:e,highlighted_spans:n}=t;return(0,l.highlightText)(e,n);case"stops":return t._highlightResult.stop.name.value;case"routes":return function(t){const e=t._highlightResult.route.name.value;return 3===t.route.type?`${e} <span class="c-search-result__long-name">${t._highlightResult.route.long_name.value}</span>`:e}(t);case"popular":return t.name;case"drupal":case"projects":case"pages":case"documents":case"events":case"news":return function(t){return"search_result"===t._content_type?t._highlightResult.search_result_title.value:"entity:file"===t.search_api_datasource?t._highlightResult.file_name_raw.value:t._highlightResult.content_title.value}(t);default:return""}}function w(t,e){let n=!1;switch(e){case"stops":n=function(){const t=document.getElementById("stops-with-alerts");if(!t)return"";const{dataset:{stopsWithAlerts:e}}=t;return e}().includes(t.stop.id);break;case"routes":n=function(){const t=document.getElementById("routes-with-alerts");if(!t)return"";const{dataset:{routesWithAlerts:e}}=t;return e}().includes(t.route.id);break;default:n=!1}return n?["alert"]:[]}function k(t){return t.map((t=>r.J(function(t){switch(t){case"Red":case"Blue":case"Orange":case"Green":case"Green-B":case"Green-C":case"Green-D":case"Green-E":case"Mattapan":return m(t);default:return t}}(t))))}function E(t){const e=t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return u.formattedDate.render({date:e})}function C(t,e){const n=w(t,e);switch(e){case"popular":case"stops":return function(t,e){const n=t.features.filter((t=>"access"!==t&&"parking_lot"!==t)),i=k(function(t){const e=t.filter((t=>!t.includes("Green-"))),n=t.filter((t=>t.includes("Green-")));if(n.length>0){const t=e.findIndex((t=>"green_line"===t));return e.splice(t+1,0,...n),e}return t}(w(t,e).concat(n))),s=function(t){return t.zone?[`<span class="c-icon__cr-zone">Zone ${t.zone}</span>`]:[]}(t);return i.concat(s)}(t,e);case"routes":return k(n);case"projects":return function(t){if(t._content_posted_on)return[E(new Date(1e3*t._content_posted_on))];return[]}(t);case"pages":case"documents":return function(t){if(void 0!==t._file_created)return[E(new Date(1e3*t._file_created))];return[]}(t);case"events":case"news":return function(t){const e=t._content_url.split("/")[2];try{const t=`${e}T01:00:00`;return[E(new Date(t))]}catch(t){return[]}}(t);default:return[]}}function L(t,e){return Object.assign(t,{hitIcon:v(t,e),hitUrl:b(t,e),hitTitle:_(t,e),hasDate:"events"===e||"news"===e||"pages"===e||"documents"===e||"projects"===e||null,hitFeatureIcons:C(t,e),id:t.id||null})}function x(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;const i=L(t,e);return i.hitFeatureIcons.length>2?u.threePlusIcons.render(i):n[e]?n[e].render(i):n.default.render(i)}},49035:(t,e,n)=>{"use strict";n(62773),n(32564),n(84633),n(91181),n(57147),n(11334),n(95433),n(41879),n(36675),n(20473),n(30288),n(71477);var i=n(87698);const s=()=>{window.dataLayer&&window.dataLayer.push({event:"pageView"})};let a=[];function o(t){window.isMapReady?window.setTimeout(t,0):a.push(t)}var r=n(19755);var l=n(19755);var c=n(35860),d=n(19755);function u(t,e){return h(t,e,"?")&&!((n=t).split("?").length>=2&&n.split("?")[1].includes("tab="));var n}function h(t,e,n){return t.slice(0,e.length)===e&&(t.length==e.length||t[e.length]===n)}function p(t){return t.includes("#")}function m(){return`${window.location.protocol}//${window.location.host}${window.location.pathname}`}function f(t,e){const n=t.nodeName;if("0"===t.getAttribute("tabindex")||"A"===n||"SELECT"===n||"INPUT"===n)t.focus();else{const n=t.querySelector("a");null!=n&&(n.focus(),n.getAttribute("data-target")==window.location.hash&&e(t).collapse("show"))}}const g=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;var i=null,s=null,a=null,o="push",r=m();e.addEventListener("popstate",(t=>{o="pop";var n=e.location.href;a&&!n.match(/redirect/)&&(e.clearTimeout(a),a=null),r=n}),{passive:!0}),n.addEventListener("turbolinks:before-visit",(t=>{switch(a&&(e.clearTimeout(a),a=null),i=[e.scrollX,e.scrollY],t.srcElement.activeElement&&t.srcElement.activeElement.dataset&&t.srcElement.activeElement.dataset.scroll){case"true":s="none";break;case"false":s="remember";break;default:s=u(t.data.url,r)?"remember":p(t.data.url)?"scroll":"top"}}),{passive:!0}),n.addEventListener("turbolinks:render",(()=>{if(!(""===n.documentElement.getAttribute("data-turbolinks-preview"))&&e.location.hash){const i=n.getElementById(e.location.hash.slice(1));i&&f(i,t)}if("push"==o)switch(s){case"remember":e.scrollTo.apply(window,i);break;case"top":e.scrollTo.apply(window,[0,0])}o="push"}),{passive:!0}),n.addEventListener("turbolinks:request-end",(t=>{r=m();var i=t.data.xhr.getResponseHeader("Refresh");if(i){var s=i.substring(i.indexOf("=")+1),o=1e3*i.split(";")[0];a=e.setTimeout((()=>{n.location=s}),o)}}),{passive:!0})};var y=n(12238),v=n.n(y),b=n(64487),_=(n(27959),n(19755));function w(t){const e=document.getElementById("js-routes-by-mode"),n=JSON.parse(e.innerHTML),i={bus:"Bus",commuter_rail:"Train",subway:"Vehicle",ferry:"Boat"};t("#route-and-vehicle").hide();document.getElementById("support_mode").addEventListener("change",(e=>{t("#support_route").empty();const s=document.getElementById("support_route"),a=(e.target.selectedOptions?e.target.selectedOptions[0].text:e.target.options[e.target.selectedIndex].innerText).split(" ").map((t=>t.toLowerCase())).join("_"),o=n[`${a}_options`];if(o){t("#route-and-vehicle").show(),t("#vehicleLabel").text(`${i[a]} number`);const e=document.createElement("option");e.text="Select",e.value=" ",s.appendChild(e),o.forEach((t=>{const e=document.createElement("option");e.text=t,e.value=t,s.appendChild(e)}))}else t("#route-and-vehicle").hide()}),{passive:!0})}function k(t){const e=t("#upload-photo-link"),n=t("#photo");e.removeAttr("tabindex"),e.click((function(t){t.preventDefault(),n.click()}))}function E(t,e){const n=t(".photo-preview-container");t("#photo").change((function(){for(const i of this.files)C(t,i,n,e)}))}const C=(t,e,n,i)=>{/image\//.test(e.type)?L(e).then((s=>{s.name=e.name,function(t,e,n,i){i.push(e),x(n,i);let s=new S(t,e).addClickHandler(n,i).div();n.append(s)}(t,s,n,i),t("#support-upload-error-container").addClass("hidden-xs-up")})).catch((e=>{B(t,"#upload"),t("#upload-photo-error").html("Sorry. We had trouble uploading your image. Please try again.")})):(B(t,"#upload"),t("#upload-photo-error").html("We couldn't upload your file. Please make sure it's an image and try again.")),n.focus()};const L=t=>new Promise(((e,n)=>{const i=new FileReader;i.onerror=()=>{i.abort(),n(new DOMException("Error parsing file."))},i.onload=()=>{const t=new Image;t.onload=()=>{const n=function(t){const e=1e3;if(t.width<=e&&t.height<=e)return t;if(t.width>t.height){const n=t.height/t.width;t.width=e,t.height=e*n}else{const n=t.width/t.height;t.height=e,t.width=e*n}return t}({width:t.width,height:t.height}),i=document.createElement("canvas");i.width=n.width,i.height=n.height;i.getContext("2d").drawImage(t,0,0,n.width,n.height),i.msToBlob?e(i.msToBlob()):i.toBlob((t=>{e(t)}),"image/jpeg")},t.src=i.result},i.readAsDataURL(t)}));function x(t,e){e.length>0?t.removeClass("hidden-xs-up"):t.addClass("hidden-xs-up")}function S(t,e){n(42317);let i=t(`\n    <div class="photo-preview">\n      <div class="clear-upload-container">\n        <img height="64" class="m-r-1" alt="Uploaded image ${e.name} preview"></img>\n        <div class="clear-photo">\n          <i class="fa fa-circle fa-stack-1x" style="color: white" aria-hidden="true"></i>\n          <i class="fa fa-times-circle fa-stack-1x" aria-hidden="true"></i>\n          <span class="sr-only">Clear Photo Upload</span>\n        </div>\n      </div>\n    </div>\n  `),s=new FileReader;s.onloadend=()=>{i.find("img")[0].src=s.result},s.readAsDataURL(e),this.addClickHandler=function(t,n){return i.find(".clear-photo").click((s=>{s.preventDefault();let a=n.indexOf(e);n.splice(a,1),i.remove(),x(t,n)})),this},this.div=function(){return i}}function $(){const t=document.getElementById("comments"),e=function(t,e){t=t.nextElementSibling;for(;t&&-1===t.className.indexOf(e);)t=t.nextElementSibling;return t}(t,"form-text");t.addEventListener("keyup",(n=>{const i=t.value.length;e.innerHTML=i+"/3000 characters",i>0?(e.className+=" support-comment-success",e.parentNode.className+=" has-success"):(I(e,"support-comment-success"),I(e.parentNode,"has-success"))}),{passive:!0})}function M(t){const e=JSON.parse(document.getElementById("js-subjects-by-service").innerHTML);t("[name='support[service]']").change((function(){const n=t("[name='support[service]']:checked").val(),i=e[n];i?(t("#support_subject option").nextAll().remove(),t("#support_subject").append(i.map((t=>`<option value=${encodeURIComponent(t)}>${t}</option>`))),t("#subject").show()):t("#subject").hide()}))}function I(t,e){t.className=t.className.replace(e,"")}function A(t){t("#no_request_response").change((function(){t("#contactInfoForm").toggle(!t(this).is(":checked"))}))}const T={comments:function(t){return 0!==t("#comments").val().length},support_subject:function(t){const e=t("#support_subject").val();return e&&0!==e.length},service:function(t){return!!t("[name='support[service]']:checked").val()},first_name:function(t){return!D(t)||0!==t("#first_name").val().length},last_name:function(t){return!D(t)||0!==t("#last_name").val().length},email:function(t){return!D(t)||null!==t("#email").val().trim().match(/.+\@.+\..+/)},privacy:function(t){return!D(t)||t("#privacy").prop("checked")},recaptcha:function(t){return!!t("#g-recaptcha-response").val()},vehicle:function(t){const e=t("#vehicle").val();return/^[0-9]{0,8}$/.test(e)}};function D(t){return!t("#no_request_response")[0].checked}function O(t){["#privacy","#support_subject","#comments","#email","#first_name","#last_name","#vehicle"].forEach((e=>{t(e).on("keyup blur input change",(()=>{T[e.slice(1)](t)&&P(t,e)}))}))}function B(t,e){t(`.support-${e.slice(1)}-error-container`).removeClass("hidden-xs-up"),t(e).parent().addClass("has-danger").removeClass("has-success")}function P(t,e){t(`.support-${e.slice(1)}-error-container`).addClass("hidden-xs-up"),t(e).parent().removeClass("has-danger").addClass("has-success")}function j(t){t("#support-submit").prop("disabled",!1),t(".waiting").attr("hidden","hidden"),t("#support-submit").trigger("waiting:end")}function F(t,e){t("#support-submit").click((function(i){const s=window.FormData?window.FormData:n(6230),a=function(t){const e="#privacy",n="#support_subject",i="#comments",s="#service",a="#vehicle",o="#email",r="#first_name",l="#last_name",c="#g-recaptcha-response",d=[];return T.service(t)?P(t,s):(B(t,s),d.push(s)),T.support_subject(t)?P(t,n):(B(t,n),d.push(n)),T.comments(t)?P(t,i):(B(t,i),d.push(i)),T.first_name(t)?P(t,r):(B(t,r),d.push(r)),T.last_name(t)?P(t,l):(B(t,l),d.push(l)),T.vehicle(t)?P(t,a):(B(t,a),d.push(a)),T.email(t)?P(t,o):(B(t,o),d.push(o)),T.privacy(t)?P(t,e):(B(t,e),d.push(e)),T.recaptcha(t)?P(t,c):(B(t,c),d.push(c)),function(t,e){e.length>0&&t(`.support-${e[0].slice(1)}-error-container`).focus()}(t,d),0===d.length}(t);i.preventDefault();const o=document.getElementById("support-form-errors"),r=document.getElementById("support-form-error-list");if(r.innerHTML="",!a){const t=Array.from(document.querySelectorAll(".has-danger > label, .has-danger > legend")).map((t=>{const e=document.createTextNode(t.innerText.replace("*","")),n=document.createElement("li");return n.appendChild(e),n}));return void(t.length&&(t.forEach((t=>{r.appendChild(t)})),o.classList.remove("hidden")))}o.classList.add("hidden"),function(t){t("#support-submit").prop("disabled",!0),t(".waiting").removeAttr("hidden"),t("#support-submit").trigger("waiting:start")}(t);const l=new s,c=new(v());t("#support").serializeArray().forEach((t=>{let{name:e,value:n}=t;"support[comments]"===e&&(n=c.clean(n)),l.append(e,n)}));const d=l.get("support[subject]");l.set("support[subject]",decodeURIComponent(d)),e.forEach((t=>{l.append("support[photos][]",t,t.name)})),t.ajax({url:t("#support").attr("action"),method:"POST",processData:!1,data:l,contentType:!1,success:()=>{t(".support-confirmation--success").removeClass("hidden-xs-up").focus(),t(".support-confirmation--error").addClass("hidden-xs-up"),j(t),t("#support").remove()},error:(e,n,i)=>{console.error(n),b.Tb(i,{tags:{"dotcom.application":"frontend","support.form":!0},extra:{errorStatus:n,formData:l}}),t(".support-confirmation--error").removeClass("hidden-xs-up").focus(),j(t)}})}))}function R(t){t("#charlie-card-or-ticket-number").hide();document.getElementById("support_subject").addEventListener("change",(e=>{e.target.options[e.target.selectedIndex].text;e.target.value===encodeURIComponent("CharlieCards & Tickets")?t("#charlie-card-or-ticket-number").show():t("#charlie-card-or-ticket-number").hide()}))}var q=n(19755);var N=n(19755);function G(t){return()=>{t(".loading-indicator, .location-error").addClass("hidden-xs-up")}}function Y(t,e){return n=>{n.preventDefault();const i=function(t){var e=t;for(;!e.data().geolocationTarget;)e=e.parent();return e}(t(n.target)),s=t(`#${i.data("id")}-geolocation-error`);!function(t,e){const n=e.data("id"),i=e.find(".loading-indicator");i.removeClass("hidden-xs-up"),t(`#${n}`).on("geolocation:complete",(()=>{i.addClass("hidden-xs-up")}))}(t,i),s.addClass("hidden-xs-up"),e.geolocation.getCurrentPosition(function(t,e,n){return n=>{const i=e.data("id");e.data("field");t(`#${i}`).trigger("geolocation:complete",n)}}(t,i),function(t,e,n){return t=>{e.find(".loading-indicator").addClass("hidden-xs-up"),t.code==t.TIMEOUT||t.code==t.POSITION_UNAVAILABLE?(n.removeClass("hidden-xs-up"),n.html("We couldn't fetch your location &mdash; please wait a minute and try again, or enter your address.")):t.code==t.PERMISSION_DENIED&&(n.removeClass("hidden-xs-up"),n.html("It looks like you haven't granted permission to fetch your location &mdash; to use geolocation, update your browser's settings and try again."))}}(0,i,s))}}var H=n(19755);function U(t,e,n){return n.value!==function(t,e){const n=decodeURIComponent(e.substring(1)).split("&");let i,s;for(s=0;s<n.length;s+=1)if(i=n[s].split("="),i[0]===t)return void 0===i[1]||i[1];return null}(n.getAttribute("name"),e.search)||(t.preventDefault(),e.reload(),!1)}function K(t,e){google.maps.event.addListener(t,"place_changed",(function(){const n=function(t,e){const n=e.getAttribute("id"),i=e.getAttribute("name");var s;const a=window.location,o=a.protocol+"//"+a.host+a.pathname,r=e.value;s=t.geometry?`?latitude=${t.geometry.location.lat()}&longitude=${t.geometry.location.lng()}&${i}=${r}#${n}`:`?${i}=${t.name}#${n}`;return o+s}(t.getPlace(),e);window.location.href=encodeURI(n)}))}function Q(t,e){const n=`${window.location.protocol}//${window.location.host}${window.location.pathname}`,i=`?latitude=${e.coords.latitude}&longitude=${e.coords.longitude}`;window.location.href=encodeURI(n+i+"#address-search-input")}var W=n(19755);function V(){const t=W("[data-autocomplete=true]");if(0==t.length)return;const e={strictBounds:!0,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(41.3193,-71.938),new google.maps.LatLng(42.8266,-69.6189))};t.each((function(t,n){const i=new google.maps.places.Autocomplete(n,e);W(n).trigger("autocomplete:added",i),function(t,e,n,i){const s=t(`#${i}_latitude`),a=t(`#${i}_longitude`);if(s.length&&a.length){const t=function(t,e,n){return function(){const i=t.getPlace();if(i.geometry){const t=i.geometry.location.lat(),s=i.geometry.location.lng();e.val(t),n.val(s)}else e.val(""),n.val("")}}(n,s,a);e.addListener(n,"place_changed",t)}}(W,google.maps.event,i,n.id)}))}let z,J="en";const Z=[["ar","Arabic"],["zh-CN","Chinese (Simplified)"],["zh-TW","Chinese (Traditional)"],["en","English"],["fr","French"],["ht","Haitian Creole"],["it","Italian"],["km","Khmer"],["ko","Korean"],["pl","Polish"],["pt","Portuguese"],["ru","Russian"],["es","Spanish"],["vi","Vietnamese"]],X=()=>tt().then((t=>{nt(t),at()})).catch((t=>{})),tt=()=>new Promise(((t,e)=>{et(200,t,e)})),et=(t,e,n)=>t>1e4?n("taking too long to find element"):setTimeout((()=>{const i=document.querySelector(".goog-te-combo");i?e(i):et(2*t,e,n)}),t),nt=t=>{J=it(t),t.addEventListener("DOMNodeInserted",(()=>{const e=document.querySelector(".header--new");e&&(0,c.BN)(e),z&&clearTimeout(z),z=setTimeout((()=>{const e=it(t);J!==e&&(J=e,at())}),500)}))},it=t=>t&&t.options&&t.options[t.selectedIndex]&&t.options[t.selectedIndex].value?t.options[t.selectedIndex].value:"en",st=(t,e)=>{let n;J=e,t.value=e,"function"==typeof Event?n=new Event("change",{bubbles:!0,cancelable:!1}):(n=document.createEvent("Event"),n.initEvent("change",!0,!1)),t.dispatchEvent(n)},at=()=>{document.querySelectorAll(".m-menu__language").forEach((t=>t.innerHTML=ot())),[...document.querySelectorAll(".custom-language-selector")].forEach((t=>{t.addEventListener("keyup",lt("language-menu-toggle"))})),rt()},ot=()=>`\n  <i class="header-globe fa fa-globe fa-lg" aria-hidden="true"></i>\n  <i class="footer-globe fa fa-globe fa-xl" aria-hidden="true"></i>\n  <select class="custom-language-selector" aria-label="Page language">\n  ${Z.map((t=>{let[e,n]=t;return`<option ${e===J?"selected":""} data-toggle="language" data-lang="${e}">${n}</option>`}))}\n  </select>\n`,rt=()=>{const t=document.querySelector(".goog-te-combo");[...document.querySelectorAll("a[data-toggle='language']")].forEach((e=>{e.addEventListener("click",(e=>{st(t,e.target.getAttribute("data-lang")),at()}),!1),e.addEventListener("keyup",lt())})),[...document.querySelectorAll(".custom-language-selector")].forEach((e=>{e.addEventListener("change",(e=>{st(t,e.target.selectedOptions[0].getAttribute("data-lang")),at()}),!1)}))},lt=t=>e=>{13===(e.keyCode||e.which)&&(e.preventDefault(),e.stopPropagation(),t?document.getElementById(t).click():e.target.click())},ct=()=>{window.requestAnimationFrame((()=>{const t=document.querySelector("[data-scroll-to]");t&&dt(t)}))},dt=t=>{const e=t.offsetLeft-t.parentNode.offsetLeft-ut(t).clientWidth;let n=t.parentNode;for(;"TABLE"!==n.nodeName;)n=n.parentNode;n.parentNode.scrollLeft=e},ut=t=>{const e=t.parentNode.firstChild;return 1===e.nodeType?e:e?e.nextElementSibling:null};var ht=n(19755);var pt=n(19755);let mt=!1;const ft=()=>{const t=document.getElementById("timetable");t&&(t.style.borderTop=0,[...document.querySelectorAll("th[data-absolute]")].forEach((t=>{t.style.position="absolute"})),yt(),t.addEventListener("scroll",vt))},gt=t=>{const e=t.querySelector(".js-tt-stop-name").offsetHeight;[...t.querySelectorAll(".js-tt-cell")].forEach((t=>t.style.height=`${e}px`))},yt=()=>{[...document.querySelectorAll(".js-tt-row")].forEach(gt)},vt=t=>{!1!==mt&&clearTimeout(mt),mt=setTimeout((()=>{const e=t.target.scrollWidth-t.target.clientWidth,n=t.target.scrollLeft,i=document.querySelector("button[data-scroll='earlier']"),s=document.querySelector("button[data-scroll='later']");i&&(0===n?i.setAttribute("disabled",""):i.removeAttribute("disabled")),s&&(n===e?s.setAttribute("disabled",""):s.removeAttribute("disabled"))}),250)},bt=document.querySelector(".js-timetable-train-labels"),_t=bt?Array.from(bt.children):[],wt=document.getElementById("timetable"),kt=document.querySelector(".m-timetable tbody"),Et=document.createElement("div");Et.setAttribute("style","border: 1px solid #b0b5c0; overflow: hidden; position: fixed; top: 0;"),Et.setAttribute("aria-hidden","true");let Ct=null,Lt=!1;const xt=()=>{window.requestAnimationFrame((()=>{Et.scrollLeft=wt.scrollLeft}))},St=()=>{bt&&wt&&(document.addEventListener("scroll",(()=>{window.requestAnimationFrame((()=>{const{top:t,bottom:e}=kt.getBoundingClientRect();!Lt&&t<0&&e>20?(()=>{if(xt(),Ct)document.body.appendChild(Ct);else{const{right:t,width:e}=wt.getBoundingClientRect();Et.style.right=t-e+"px",Et.style.width=`${e}px`,_t.forEach((t=>{const{fontSize:e,width:n}=window.getComputedStyle(t),i=t.cloneNode(!0);i.className="m-timetable__header-cell",i.style.fontSize=e,i.style.minWidth=n,i.style.maxWidth=n,Et.appendChild(i)})),document.body.appendChild(Et)}wt.addEventListener("scroll",xt),Lt=!0})():Lt&&(t>=0||e<20)&&(Ct?Et.parentNode.removeChild(Et):Ct=Et.parentNode.removeChild(Et),wt.removeEventListener("scroll",xt),Lt=!1)}))})),window.addEventListener("resize",(()=>{window.requestAnimationFrame((()=>{Et.getBoundingClientRect().right!==kt.getBoundingClientRect().right&&(()=>{const{right:t,width:e}=wt.getBoundingClientRect();Et.style.right=t-e+"px",Et.style.width=`${e}px`;const n=Et.childNodes;n.length>0&&_t.forEach(((t,e)=>{const{fontSize:i,width:s}=window.getComputedStyle(t);n[e].style.fontSize=i,n[e].style.minWidth=s,n[e].style.maxWidth=s}))})()}))})))};var $t=n(19755);var Mt=n(19755);var It=n(19755);class At{constructor(t){this.selectors=t.selectors,this.onUpdateCallback=t.onUpdateCallback,this.init()}init(){this.dateInput=It(`#${this.selectors.dateEl.input}`);const t=document.getElementById(this.selectors.dateEl.label),e=parseInt(document.getElementById(this.selectors.month).value,10),n=this.dateInput.data("min-date"),i=this.dateInput.data("max-date"),s=new Date(document.getElementById(this.selectors.year).value,e-1,document.getElementById(this.selectors.day).value);t.setAttribute("data-date",At.getShortDate(s)),this.updateDateFormatToShort=this.updateDateFormatToShort.bind(this),this.updateDateFormatToLong=this.updateDateFormatToLong.bind(this),this.dateInput.datepicker({outputFormat:At.getDateFormatbyMediaQuery(),onUpdate:this.updateDate.bind(this),min:n,max:i,gainFocusOnConstruction:!1}),It(".datepicker-month").off(),It(".datepicker-month-fast-next").remove(),It(".datepicker-month-fast-prev").remove(),It(".datepicker-calendar").find(".glyphicon").removeClass("glyphicon").addClass("fa"),It(".datepicker-calendar").find(".glyphicon-triangle-right").removeClass("glyphicon-triangle-right").addClass("fa-caret-right"),It(".datepicker-calendar").find(".glyphicon-triangle-left").removeClass("glyphicon-triangle-left").addClass("fa-caret-left"),It(document).on("click",`#${this.selectors.dateEl.input}`,(t=>{t.preventDefault(),t.stopPropagation(),It(`#${this.selectors.dateEl.input}`).datepicker("show")})),window.matchMedia("(min-width: 1344px)").addListener(this.updateDateFormatToLong),window.matchMedia("(min-width: 1087px) and (max-width: 1344px)").addListener(this.updateDateFormatToShort),window.matchMedia("(min-width: 800px) and (max-width: 1087px)").addListener(this.updateDateFormatToShort),window.matchMedia("(min-width: 544px) and (max-width: 800px)").addListener(this.updateDateFormatToLong),window.matchMedia("(max-width: 544px)").addListener(this.updateDateFormatToShort),this.dateInput.datepicker("setDate",s)}static getDateFormatbyMediaQuery(){return window.matchMedia("(min-width: 1344px)").matches||window.matchMedia("(min-width: 544px) and (max-width: 800px)").matches?"EEEE, MMMM dd, yyyy":"EE, MMMM dd, yyyy"}updateDateFormatToShort(t){return!!t.matches&&this.setDatePickerFormat("EE, MMMM dd, yyyy")}updateDateFormatToLong(t){return!!t.matches&&this.setDatePickerFormat("EEEE, MMMM dd, yyyy")}setDatePickerFormat(t){this.dateInput.datepicker("outputFormat",t),this.dateInput.datepicker("update")}updateDate(t){const e=new Date(t),n=document.getElementById(this.selectors.dateEl.label),i=n.getAttribute("aria-label").split(", ")[3];n.setAttribute("data-date",At.getShortDate(e)),n.setAttribute("aria-label",`${t}, ${i}`),this.updateDateSelects(e),this.dateInput.datepicker("hide"),this.onUpdateCallback()}updateDateSelects(t){const e=t.getFullYear().toString(),n=(t.getMonth()+1).toString(),i=t.getDate().toString();this.updateSelect({month:n}),this.updateSelect({day:i}),this.updateSelect({year:e})}updateSelect(t){const e=Object.keys(t)[0],n=document.getElementById(this.selectors[e]),i=n.querySelector("option[selected='selected']")||n.querySelector("option[selected]"),s=n.querySelector(`option[value='${t[e]}']`);if(i&&i.removeAttribute("selected"),s)s.setAttribute("selected","selected");else{const i=document.createElement("option");i.value=t[e],i.text=t[e],i.setAttribute("selected","selected"),n.append(i)}}static getShortDate(t){return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear().toString().substr(2)}`}}var Tt=n(9577),Dt=n(19755);class Ot{constructor(){const{dateEl:t,month:e,day:n,year:i}=Ot.SELECTORS;document.getElementById(t.input)&&(this.resetPlanType(),this.DatePicker=new At({selectors:{dateEl:t,month:e,day:n,year:i},onUpdateCallback:this.updateControlTitleCallback.bind(this)}),this.timeInput(),this.controlSetup())}resetPlanType(){const t=document.getElementById(Ot.SELECTORS.title);t&&t.setAttribute("data-prefix","")}controlSetup(){const t=document.getElementById(Ot.SELECTORS.depart);t&&t.addEventListener("click",(()=>{this.updateControlTitle("Depart at")}));const e=document.getElementById(Ot.SELECTORS.arrive);e&&e.addEventListener("click",(()=>{this.updateControlTitle("Arrive by")}))}timeInput(){document.getElementById(Ot.SELECTORS.hour).addEventListener("change",this.updateTime.bind(this)),document.getElementById(Ot.SELECTORS.minute).addEventListener("change",this.updateTime.bind(this)),document.getElementById(Ot.SELECTORS.amPm).addEventListener("change",this.updateTime.bind(this))}getStateFromQuery(){return Tt.parseQuery(window.location.search,window.decodeURIComponent)}formatQueryPlanType(){return"arrive"===this.getStateFromQuery()["plan[time]"]?"Arrive by":"Depart at"}getPlanType(){const t=document.getElementById(Ot.SELECTORS.title);return t?t.getAttribute("data-prefix")||this.formatQueryPlanType():""}updateTime(){const t=new Date,e=parseInt(document.getElementById(Ot.SELECTORS.hour).value,10)%12,n="PM"===document.getElementById(Ot.SELECTORS.amPm).value?e+12:e,i=document.getElementById(Ot.SELECTORS.timeEl.label),s=i.getAttribute("aria-label").split(", ")[1];t.setHours(n),t.setMinutes(document.getElementById(Ot.SELECTORS.minute).value);const a=Ot.getFriendlyTime(t);i.setAttribute("data-time",a),i.setAttribute("aria-label",`${a}, ${s}`),this.updateControlTitle(this.getPlanType())}updateControlTitle(t){const e=document.getElementById(Ot.SELECTORS.title);if(e){const n=`${t} ${document.getElementById(Ot.SELECTORS.timeEl.label).getAttribute("data-time")}, ${document.getElementById(Ot.SELECTORS.dateEl.label).getAttribute("data-date")}`;e.innerHTML=n,e.setAttribute("data-prefix",t)}}updateControlTitleCallback(){this.updateControlTitle(this.getPlanType())}static getFriendlyTime(t){let e="AM",n=t.getHours(),i=t.getMinutes();return n>11&&(e="PM"),n>12&&(n-=12),0===n&&(n=12),i<10&&(i=`0${i}`),`${n}:${i} ${e}`}}var Bt=n(19755);function Pt(t){let{input:e,hitLimit:n,sessionToken:i}=t;return 0===e.length?Promise.resolve({}):new Promise(((t,s)=>{var a;Bt.getJSON(`/places/autocomplete/${encodeURIComponent(e)}/${n}/${a=i,a?a.Pf:null}`).done(Rt(t)).fail(s)}))}const jt=t=>new Promise(((e,n)=>{Bt.getJSON(`/places/details/${encodeURIComponent(t)}`).done(Nt(e)).fail(n)})),Ft=(t,e)=>new Promise(((n,i)=>{Bt.getJSON(`/places/reverse-geocode/${t}/${e}`).done(Gt(n,i)).fail(i)})),Rt=t=>e=>{let{predictions:n}=e;return t(qt(JSON.parse(n)))},qt=t=>({locations:{hits:t.map(((t,e)=>({...t,id:`location-${e}`}))),nbHits:t.length}}),Nt=t=>e=>{let{result:n}=e;return t(JSON.parse(n))},Gt=(t,e)=>n=>{let{results:i}=n;const s=JSON.parse(i);s[0]?t(s[0].formatted):e("No results")};var Yt=n(19755);const Ht=class{constructor(t,e){this._queries=t,this._activeQueryIds=Object.keys(t),this._defaultParams=e,this._viewMoreInc=20,this._lastQuery="",this._doBlankSearch=!0,this._widgets=[],this.errorContainer=document.getElementById("algolia-error"),this.reset()}get widgets(){return this._widgets}reset(){Object.keys(this._queries).forEach(this.resetDefaultParams()),this._lastQuery="",this.resetWidgets()}resetDefaultParams(){return t=>{this._defaultParams[t]?this._queries[t].params=JSON.parse(JSON.stringify(this._defaultParams[t])):console.error("default params not set for queryId",t,this._defaultParams)}}addPage(t){this._queries[t]&&(this._queries[t].params.hitsPerPage+=this._viewMoreInc)}search(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.toggleError(!1),"string"!=typeof t.query&&(t.query=this._lastQuery),t.query.length>0){const e=this._buildAllQueries(t);return this._lastQuery=t.query,this._doSearch(e)}return this.updateWidgets({}),this._lastQuery.length>0&&this.reset(),Promise.resolve({})}_doSearch(t){return this._sendQueries(t).then(this._processAlgoliaResults()).then((t=>(this.updateWidgets(t),t))).catch((t=>console.log(t)))}_addAnalyticsData(t){t.hits.forEach(((e,n)=>{e.analyticsData={queryID:t.queryID,position:t.hitsPerPage*t.page+n+1,objectID:e.objectID}}))}_sendQueries(t){const e={requests:t};return new Promise(((t,n)=>{Yt.ajax({type:"POST",url:"/search/query",data:JSON.stringify(e),dataType:"json",contentType:"application/json"}).done(t).fail(n)}))}_buildAllQueries(t){const e=this._activeQueryIds.length>0?this._activeQueryIds:Object.keys(this._queries),n=[];return e.forEach((e=>{n.push(this._buildQuery(e,t))})),n}_buildQuery(t,e){let{query:n}=e;const i=this._queries[t];return i.query=n,i.params=i.params||{},i.params.clickAnalytics=!0,i}updateAllParams(t,e){Object.keys(this._queries).forEach((t=>this._queries[t].params[t]=e))}updateActiveQueries(t){this._activeQueryIds=t}removeActiveQuery(t){const e=this._activeQueryIds.indexOf(t);-1!=e&&this._activeQueryIds.splice(e,1)}addActiveQuery(t){-1==this._activeQueryIds.indexOf(t)&&this._activeQueryIds.push(t)}updateFacetFilters(t,e){this._queries[t].params.facetFilters[0]=e}addFacetFilter(t,e){-1==this._queries[t].params.facetFilters[0].indexOf(e)&&this._queries[t].params.facetFilters[0].push(e)}removeFacetFilter(t,e){const n=this._queries[t].params.facetFilters[0].indexOf(e);-1!=n&&this._queries[t].params.facetFilters[0].splice(n,1)}updateParams(t,e){this._queries[t].params=e}updateParamsByKey(t,e,n){this._queries[t].params[e]=n}getParams(t){return this._queries[t].params}addWidget(t){t.init(this),this._widgets.push(t)}updateWidgets(t){t.error?this.toggleError(!0):this._widgets.forEach((function(e){"function"==typeof e.render&&e.render(t)}))}resetWidgets(){this._widgets.forEach((function(t){"function"==typeof t.reset&&t.reset()}))}_processAlgoliaResults(){return t=>{if(t.error)return Promise.resolve(t);{let e=this._activeQueryIds.slice(0);0==this._activeQueryIds.length&&(e=Object.keys(this._queries));const n=Object.keys(this._queries).length,i=t.results.slice(0,e.length),s=t.results.slice(e.length,e.length+n),a={};return i.forEach(((t,n)=>{this._addAnalyticsData(t),a[e[n]]=t})),s.forEach(((t,e)=>{a[`facets-${Object.keys(this._queries)[e]}`]=t})),Promise.resolve(a)}}}toggleError(t){this.errorContainer.style.display=!0===t?"block":"none"}};var Ut=n(96031),Kt=n(19755),Qt=n(19755),Wt=n(19755);function Vt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function zt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Jt(t,e,"set"),n),n}function Jt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Zt=new WeakMap;class Xt{constructor(t){let{id:e,selectors:n,indices:i,parent:s,containerEl:a=null,templates:o=Ut.TEMPLATES}=t;if(Vt(this,Zt,{writable:!0,value:void 0}),"string"!=typeof e)throw new window.Error("autocomplete must have an id");this.id=e,this.containerElement=a,this._parent=s,this.error=null,this._selectors=Object.assign(n,{resultsContainer:`${n.input}-autocomplete-results`}),this._input=this.getById(this._selectors.input),this._resultsContainer=this.getById(this._selectors.resultsContainer),this._searchContainer=this.getById(this._selectors.container),this._resetButton=this.getById(this._selectors.resetButton),this.announcer=this.getById(this._selectors.announcer),this._indices=i,this._datasets=[],this._results={},this._highlightedHit=null,this._autocomplete=null,zt(this,Zt,o),this.bind()}getById(t){return this.containerElement?this.containerElement.querySelector(`#${t}`):document.getElementById(t)}bind(){this.onClickSuggestion=this.onClickSuggestion.bind(this),this.onHitSelected=this.onHitSelected.bind(this),this.onCursorChanged=this.onCursorChanged.bind(this),this.onCursorRemoved=this.onCursorRemoved.bind(this),this.onOpen=this.onOpen.bind(this),this.onKeyup=this.onKeyup.bind(this),this.clear=this.clear.bind(this),this._toggleResetButton=this._toggleResetButton.bind(this),this.getById=this.getById.bind(this)}clear(){this._autocomplete.autocomplete.close(),this.setValue(""),this._toggleResetButton(!1),this._client.reset(),this._input.focus(),Kt(document).trigger("autocomplete:reset",{autocomplete:this})}init(t){this._client=t,this._input&&this._resetButton&&(this._addResultsContainer(),this._resultsContainer.innerHTML="",this._datasets=this._indices.reduce(((t,e)=>this._buildDataset(e,t)),[]),this._autocomplete=window.autocomplete(this._input,{appendTo:this._resultsContainer,debug:!0,autoselectOnBlur:!1,openOnFocus:!0,detachedMediaQuery:!1,hint:!1,minLength:0,cssClasses:{root:"c-search-bar__autocomplete",prefix:"c-search-bar__"}},this._datasets),this._addErrorMsg(),this._toggleResetButton(!1),this._addListeners())}resetResetButton(){this._toggleResetButton(""!==this._autocomplete.autocomplete.getVal())}setError(t){this.error=t}_addListeners(){Qt(document).on("autocomplete:cursorchanged",`#${this._selectors.input}`,this.onCursorChanged),Qt(document).on("autocomplete:cursorremoved",`#${this._selectors.input}`,this.onCursorRemoved),Qt(document).on("autocomplete:selected",`#${this._selectors.input}`,this.onHitSelected),Qt(document).on("autocomplete:shown",`#${this._selectors.input}`,this.onOpen),Qt(document).on("keyup",`#${this._input.id}`,this.onKeyup),window.addEventListener("resize",this.onOpen),this._resetButton.removeEventListener("click",this.clear),this._resetButton.addEventListener("click",this.clear),Qt(document).on("click",".c-search-bar__-suggestion",this.onClickSuggestion),document.addEventListener("turbolink:before-render",(()=>{Qt(document).off("autocomplete:cursorchanged",`#${this._selectors.input}`,this.onCursorChanged),Qt(document).off("autocomplete:cursorremoved",`#${this._selectors.input}`,this.onCursorRemoved),Qt(document).off("autocomplete:selected",`#${this._selectors.input}`,this.onHitSelected),Qt(document).off("autocomplete:shown",`#${this._selectors.input}`,this.onOpen),window.removeEventListener("resize",this.onOpen),Qt(document).off("keyup",`#${this._input.id}`,this.onKeyup),Qt(document).off("click",".c-search-bar__-suggestion",this.onClickSuggestion)}))}_toggleResetButton(t){this._resetButton.style.display=t?"block":"none"}_addErrorMsg(){if(this.getById("algolia-error"))return;const t=document.getElementsByClassName("c-search-bar__-dropdown-menu").item(0),e=document.createElement("div");e.id="algolia-error",e.classList.add("c-search__error"),e.innerHTML="There was a problem performing your search; please try again in a few minutes.",t.appendChild(e),this._client.errorContainer=e}onKeyup(){this._toggleResetButton(""!==this._autocomplete.autocomplete.getVal())}onOpen(){const t=Qt(this._resultsContainer).find(".c-search-bar__-dropdown-menu")[0];t&&this._input&&(this.positionDropdown(t),this.announceResults(t))}positionDropdown(t){const e=parseInt(Wt(`#${this._selectors.container}`).css("border-left-width"),10),{offsetLeft:n,offsetTop:i}=this._input;t.style.width=`${this._searchContainer.offsetWidth}px`,t.style.marginLeft=-e-n+"px",t.style.marginTop=`${e+i}px`}announceResults(t){const e=Array.from(t.querySelectorAll("a")).reduce((t=>t+1),0),n=1===e?"":"s";this.announcer.innerHTML=`${e} result${n}`}_addResultsContainer(){this._resultsContainer||(this._resultsContainer=document.createElement("div"),this._resultsContainer.id=this._selectors.resultsContainer,this._input.parentNode.appendChild(this._resultsContainer))}onCursorChanged(t){let{originalEvent:{_args:[e,n]}}=t;this._highlightedHit={hit:e,index:n}}onCursorRemoved(){this._highlightedHit=null}clickHighlightedOrFirstResult(){return this._highlightedHit?this.onHitSelected({originalEvent:{_args:[this._highlightedHit.hit,this._highlightedHit.index]}}):this.clickFirstResult()}clickFirstResult(){const t=this._indices.find((t=>this._results[t]&&this._results[t].hits.length>0));return!!t&&this.onHitSelected({originalEvent:{_args:[this._results[t].hits[0],t]}})}onClickSuggestion(t){t.preventDefault()}onHitSelected(t){let{originalEvent:{_args:[e,n]}}=t;const i=this._parent.getParams();this._input&&(this._input.value=""),Qt.post("/search/click",e.analyticsData,this.onHitSelectedCallback(e,n,i))}onHitSelectedCallback(t,e,n){window.Turbolinks.visit(Ut.getUrl(t,e)+Tt.paramsToString(n,window.encodeURIComponent))}_buildDataset(t,e){return e.push({source:this._datasetSource(t),displayKey:Xt.DISPLAY_KEYS[t],name:t,hitsPerPage:5,minLength:this.minLength(t),maxLength:this.maxLength(t),templates:{suggestion:this.renderResult(t),footer:this.renderFooterTemplate(t)},debounce:500}),e}minLength(){return 1}maxLength(){return null}renderFooterTemplate(){return null}_datasetSource(t){return(e,n)=>(this._client.reset(),this._client.search({query:e}).then((e=>this._onResults(n,t,e))))}_emptySearchSource(){return(t,e)=>e([{data:""}])}_onResults(t,e,n){n&&!n.error&&n[e]&&n[e].hits&&(this._results[e]=n[e],t(n[e].hits))}renderResult(t){return e=>{return Ut.renderResult(e,t,function(t,e){return e.get?e.get.call(t):e.value}(n=this,Jt(n,Zt,"get")));var n}}setValue(t){this._autocomplete.autocomplete.setVal(t),Qt(this._input).change(),this._autocomplete.autocomplete.close()}getValue(){return this._autocomplete.autocomplete.getVal()}}Xt.DISPLAY_KEYS={locations:"hit.place_id"};var te=n(99546),ee=n(72838);class ne extends Xt{constructor(t){let{id:e,selectors:n,indices:i,locationParams:s,popular:a,parent:o,containerEl:r=null,templates:l=Ut.TEMPLATES}=t;super({id:e,selectors:n,indices:i,parent:o,containerEl:r,templates:l}),this.debounceInterval=250,this._parent.getParams||(this._parent.getParams=()=>({})),this._popular=a,this._loadingIndicator=this.getById(n.locationLoadingIndicator),this.addUseMyLocationErrorEl(),this._locationParams=Object.assign(ne.DEFAULT_LOCATION_PARAMS,s),this._indices.splice(this._locationParams.position,0,"locations"),this._indices.push("usemylocation"),this._indices.push("popular")}addUseMyLocationErrorEl(){const t=this.getById(this._selectors.container);this.useMyLocationErrorEl=document.createElement("div"),this.useMyLocationErrorEl.classList.add("u-error"),this.useMyLocationErrorEl.style.display="none",this.useMyLocationErrorEl.innerHTML=`${window.location.host} needs permission to use your location.\n      Please update your browser's settings or refresh the page and try again.`,t.parentNode.appendChild(this.useMyLocationErrorEl)}_datasetSource(t){switch(t){case"locations":return(0,ee.default)(this._locationSource("locations"),this.debounceInterval);case"usemylocation":return this._useMyLocationSource();case"popular":return this._popularSource();default:return(0,ee.default)(super._datasetSource(t),this.debounceInterval)}}_locationSource(t){return(e,n)=>Pt({input:e,hitLimit:this._locationParams.hitLimit}).then((e=>this._onResults(n,t,e)))}_popularSource(){return(t,e)=>{const n={popular:{hits:this._popular}};return this._onResults(e,"popular",n)}}_useMyLocationSource(){return(t,e)=>this._onResults(e,"usemylocation",{usemylocation:{hits:[{}]}})}minLength(t){switch(t){case"usemylocation":case"popular":return 0;default:return 1}}maxLength(t){switch(t){case"usemylocation":case"popular":return 0;default:return null}}onHitSelected(t){const e=t.originalEvent;switch(e._args[1]){case"locations":this._input.value=e._args[0].address,this._doLocationSearch(e._args[0].address);break;case"usemylocation":this.useMyLocationSearch();break;default:super.onHitSelected(t)}}useMyLocationSearch(){return this.useMyLocationErrorEl.style.display="none",this._input.disabled=!0,this.setValue("Getting your location..."),this._loadingIndicator.style.visibility="visible",(0,te.default)().then((t=>this.onUseMyLocationResults(t))).catch((t=>this.onGeolocationError(t)))}onGeolocationError(t){this._input.disabled=!1,this.setValue(""),this._loadingIndicator.style.visibility="hidden",t.code&&1===t.code&&(this.useMyLocationErrorEl.style.display="block")}_doLocationSearch(t){return jt(t).then((t=>this._onLocationSearchResult(t)))}_onLocationSearchResult(t){return this.showLocation(t.latitude,t.longitude)}onUseMyLocationResults(t){let{coords:{latitude:e,longitude:n}}=t;return Ft(parseFloat(e),parseFloat(n)).then((t=>this.onReverseGeocodeResults(t,e,n)))}onReverseGeocodeResults(t,e,n){this._input.disabled=!1,this.setValue(t),this._loadingIndicator.style.visibility="hidden",this._input.value=t,this.showLocation(e,n)}showLocation(t,e){const n=this._parent.getParams();n.latitude=t,n.longitude=e,n.address=this._input.value;const i=Tt.paramsToString(((t,e)=>{switch(e){case"/schedules/commuter-rail":case"/schedules/commuter-rail/":return Object.assign(t,{filter:"commuter_rail"});case"/schedules/subway":case"/schedules/subway/":return Object.assign(t,{filter:"subway"});case"/schedules/bus":case"/schedules/bus/":return Object.assign(t,{filter:"bus"});default:return t}})(n,window.location.pathname),window.encodeURIComponent);window.Turbolinks.visit(`/transit-near-me${i}`)}}ne.DEFAULT_LOCATION_PARAMS={position:0,hitLimit:5};const ie=ne;var se=n(19755);class ae{constructor(){let{containerEl:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.containerElement=t,this.toInput=this.getById(ae.SELECTORS.to.input),this.fromInput=this.getById(ae.SELECTORS.from.input),this.toLat=this.getById(ae.SELECTORS.to.lat),this.toLng=this.getById(ae.SELECTORS.to.lng),this.fromLat=this.getById(ae.SELECTORS.from.lat),this.fromLng=this.getById(ae.SELECTORS.from.lng),this.controller=null,this.toInputDirty=!1,this.fromInputDirty=!1,this.markers={from:null,to:null},this.bind(),this.toInput&&this.fromInput&&this.init()}getById(t){return this.containerElement?this.containerElement.querySelector(`#${t}`):document.getElementById(t)}init(){this.toController=new Ht(ae.INDICES.to,ae.PARAMS),this.fromController=new Ht(ae.INDICES.from,ae.PARAMS),this.toAutocomplete=new ie({id:"trip-planner__autocomplete--to",selectors:ae.SELECTORS.to,indices:Object.keys(ae.INDICES.to),locationParams:{position:1,hitLimit:3},popular:ae.POPULAR,parent:this,containerEl:this.containerElement}),this.fromAutocomplete=new ie({id:"trip-planner__autocomplete--from",selectors:ae.SELECTORS.from,indices:Object.keys(ae.INDICES.from),locationParams:{position:1,hitLimit:3},popular:ae.POPULAR,parent:this,containerEl:this.containerElement}),this.autocompletes=[this.toAutocomplete,this.fromAutocomplete],this.autocompletes.forEach((t=>{t.renderFooterTemplate=this.renderFooterTemplate,t.setError(null),t.onHitSelected=this.onHitSelected(t,this.getById(t._selectors.lat),this.getById(t._selectors.lng)),t._resetButton.addEventListener("click",(()=>{this.removeMarker(t)})),t.showLocation=this.useMyLocation(t)})),this.toController.addWidget(this.toAutocomplete),this.fromController.addWidget(this.fromAutocomplete),this.getById("trip-plan-reverse-control").addEventListener("click",this.reverseTrip),this.setupFormValidation()}bind(){this.removeMarker=this.removeMarker.bind(this),this.reverseTrip=this.reverseTrip.bind(this),this.swapMarkers=this.swapMarkers.bind(this),this.resetResetButtons=this.resetResetButtons.bind(this),this.useMyLocation=this.useMyLocation.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onInvalidAddress=this.onInvalidAddress.bind(this),this.onAutocompleteShown=this.onAutocompleteShown.bind(this),this.onInputReset=this.onInputReset.bind(this)}setupFormValidation(){this.getById("plan").addEventListener("submit",this.onSubmit),this.autocompletes.forEach((t=>{this.getById(t._selectors.input).addEventListener("change",this.onInputChange(t)),this.getById(t._selectors.input).addEventListener("input",this.onInputChange(t)),this.getById(t._selectors.input).addEventListener("blur",this.onInputChange(t))})),document.addEventListener("autocomplete:empty",this.onInvalidAddress),document.addEventListener("autocomplete:shown",this.onAutocompleteShown),se(document).on("autocomplete:reset",this.onInputReset)}onSubmit(t){const e=""===this.getById("from").value,n=""===this.getById("to").value;return this.toInputDirty=!0,this.fromInputDirty=!0,!(this.fromAutocomplete.error||this.toAutocomplete.error||e||n)||(t.preventDefault(),e&&this.toggleError(this.fromAutocomplete,"missing"),n&&this.toggleError(this.toAutocomplete,"missing"),!1)}onAutocompleteShown(t){let{srcElement:e}=t;if(e&&("from"===e.id||"to"===e.id)){const t=this[`${e.id}Autocomplete`];this.toggleError(t,null)}}onInputReset(t,e){let{autocomplete:n}=e;n.id!==this.fromAutocomplete.id&&n.id!==this.toAutocomplete.id||(this.toInputDirty=!1,this.fromInputDirty=!1,this.toggleError(n,null))}onInputChange(t){return this.getById("to_id")&&(this.getById("to_id").value=null),this.getById("from_id")&&(this.getById("from_id").value=null),()=>{t&&"to"===t._input.id?this.toInputDirty=!0:t&&"from"===t._input.id&&(this.fromInputDirty=!0),"invalid"!==t.error&&(t&&0===t._input.value.length?this.toggleError(t,"missing"):this.toggleError(t,null))}}onInvalidAddress(t){let{srcElement:e}=t;if(e&&("from"===e.id||"to"===e.id)){const t=this[`${e.id}Autocomplete`];this.toggleError(t,"invalid")}}toggleError(t,e){const n=this.getById(t._selectors.required),i=this.getById(t._selectors.container),s=this.getById(t._selectors.input),a="from"===s.id&&this.fromInputDirty||"to"===s.id&&this.toInputDirty;if(n&&i&&s&&a){if("missing"===e||"invalid"===e)i.classList.add("c-form__input-container--error"),n.classList.remove("m-trip-plan__hidden"),s.setAttribute("aria-invalid","true");else{if(null!==e)throw new Error(`unrecognized error type: ${e}`);i.classList.remove("c-form__input-container--error"),n.classList.add("m-trip-plan__hidden"),s.setAttribute("aria-invalid","false")}t.setError(e),ae.updateErrorContent(t)}}static updateErrorContent(t){const e=document.getElementById(t._selectors.locationError);e&&(e.innerHTML="","invalid"===t.error&&(e.innerHTML="We're sorry, but we couldn't find that address."))}updateMarker(t,e,n,i){const s={latitude:e,longitude:n,label:t._input.getAttribute("data-label"),title:i},a=new Event("trip-plan:update-marker");a.detail=s,document.dispatchEvent(a)}removeMarker(t){const e={label:t._input.getAttribute("data-label")},n=new Event("trip-plan:remove-marker");n.detail=e,document.dispatchEvent(n)}resetResetButtons(){const t=this.fromAutocomplete,e=this.toAutocomplete;t.resetResetButton(),e.resetResetButton()}swapMarkers(){const t=this.fromAutocomplete,e=this.toAutocomplete,n=t.getValue(),i=e.getValue();n?this.updateMarker(t,this.getById("from_latitude").value,this.getById("from_longitude").value,n):this.removeMarker(t),i?this.updateMarker(e,this.getById("to_latitude").value,this.getById("to_longitude").value,e):this.removeMarker(e)}useMyLocation(t){return(e,n)=>{this.getById(t._selectors.lat).value=e,this.getById(t._selectors.lng).value=n;const i=t._input.value;this.updateMarker(t,e,n,i)}}onHitSelected(t,e,n){return i=>{let{originalEvent:{_args:[s,a]}}=i;switch(a){case"stops":this.setAutocompleteValue(t,s.stop.name,e,n,s._geoloc.lat,s._geoloc.lng);break;case"locations":jt(s.address).then((i=>{const{latitude:a,longitude:o}=i;this.setAutocompleteValue(t,s.address,e,n,a,o),t._input.blur()}));break;case"usemylocation":t.useMyLocationSearch();break;case"popular":this.setAutocompleteValue(t,s.name,e,n,s.latitude,s.longitude);break;default:console.error(`onHitSelected not implemented for ${a}.`)}}}setAutocompleteValue(t,e,n,i,s,a){t.setValue(e),n.value=s,i.value=a,this.updateMarker(t,s,a,e),this.resetResetButtons()}renderFooterTemplate(t){return"locations"===t&&Ut.autocompleteByGoogle()?Ut.TEMPLATES.poweredByGoogleLogo.render({logo:document.getElementById("powered-by-google-logo").innerHTML}):null}reverseTrip(t){t.preventDefault();const e=this.fromAutocomplete,n=this.toAutocomplete,i=e.error,s=n.error,a=e.getValue(),o=n.getValue(),r=this.getById("from_latitude").value,l=this.getById("from_longitude").value,c=this.getById("from_id"),d=this.getById("to_latitude").value,u=this.getById("to_longitude").value,h=this.getById("to_id");this.getById("from_latitude").value=d,this.getById("from_longitude").value=u,c&&(this.getById("from_id").value=h),this.getById("to_latitude").value=r,this.getById("to_longitude").value=l,h&&(this.getById("to_id").value=c),e.setValue(o),n.setValue(a),this.swapMarkers(),this.resetResetButtons(),this.toggleError(n,i),this.toggleError(e,s)}}ae.INDICES={to:{stops:{indexName:"stops",query:""}},from:{stops:{indexName:"stops",query:""}}},ae.SELECTORS={to:{input:"to",lat:"to_latitude",lng:"to_longitude",resetButton:"trip-plan__reset--to",container:"trip-plan__container--to",locationLoadingIndicator:"trip-plan__loading-indicator--to",required:"trip-plan__required--to",locationError:"trip-plan__location-error--to",announcer:"trip-plan__announcer--to"},from:{input:"from",lat:"from_latitude",lng:"from_longitude",resetButton:"trip-plan__reset--from",container:"trip-plan__container--from",locationLoadingIndicator:"trip-plan__loading-indicator--from",required:"trip-plan__required--from",locationError:"trip-plan__location-error--from",announcer:"trip-plan__announcer--from"},map:"trip-plan-map--initial"},ae.PARAMS={stops:{hitsPerPage:3,facets:["*"],facetFilters:[[]]}},ae.POPULAR=[{icon:"airplane",name:"Boston Logan Airport",features:[],latitude:42.365396,longitude:-71.017547,url:"#"},{icon:"station",name:"South Station",features:["red_line","bus","commuter_rail","access"],latitude:42.352271,longitude:-71.055242,url:"#"},{icon:"station",name:"North Station",features:["orange_line","green-line-c","green-line-e","bus","commuter_rail","access"],latitude:42.365577,longitude:-71.06129,url:"#"}];var oe=n(19755);var re=n(19755);let le={};const ce=(t,e)=>({el:t,images:e,figures:e.map((t=>t.innerHTML)),imageOffset:0,pageOffset:0,lastPage:de(e.length)}),de=t=>Math.max(0,Math.ceil(t/10)-1);function ue(t,e){const n=le[t].images.length-1;return-1===e?e=n:e>n&&(e=0),le[t].imageOffset=e,e}function he(t){t.preventDefault();const e=t.currentTarget.getAttribute("data-gallery");!function(t,e){const n=document.getElementById(`${t}primary`),i=document.getElementById(`${t}name`),s=e.querySelectorAll("img").item(0);n.setAttribute("src",s.getAttribute("src")),n.setAttribute("alt",s.getAttribute("alt")),i.innerHTML=e.querySelectorAll("figcaption").item(0).innerHTML}(e,((t,e)=>{const n=le[t].images[e];return n.innerHTML||(n.innerHTML=le[t].figures[e]),n})(e,ue(e,t.currentTarget.getAttribute("data-offset"))))}function pe(t){t.preventDefault();const e=t.currentTarget.getAttribute("data-gallery"),n=parseInt(t.currentTarget.getAttribute("data-increment")),i=1===n?"next":"prev";if(me(`${e}images`)){const t=function(t,e){let n=le[t].pageOffset+e;return-1===n?n=le[t].lastPage:n>le[t].lastPage&&(n=0),le[t].pageOffset=n,n}(e,n);ue(e,10*t)}else ue(e,le[e].imageOffset+n);ge(e,e.concat(i))}const me=t=>document.getElementById(t).offsetLeft>0,fe=()=>(new Date).getTime().toString()+Math.floor(1e6*Math.random());function ge(t,e){const n=le[t].images.filter(((e,n)=>n==le[t].imageOffset)).pop(),i=n.querySelectorAll("img").item(0),s=n.querySelectorAll("figcaption").item(0),a=le[t].images.length,o=10*le[t].pageOffset,r=o+10,l=le[t].images.length>10,c=le[t].images.filter(((t,e)=>e>=o&&e<r)),d=i.getAttribute("src")||i.attributes.src.nodeValue,u=i.getAttribute("alt")||i.attributes.alt.nodeValue,h=`\n    <div class="c-photo-gallery__main-container">\n      <figure>\n        <div class="c-photo-gallery__main-window">\n          <img class="c-photo-gallery__main-image"\n            id="${t}primary"\n            alt="${u}"\n            src="${d}">\n        </div>\n        <figcaption id="${t}name" class="c-photo-gallery__main-title">${s.innerHTML}</figcaption>\n      </figure>\n    </div>\n    <div id="${t}images" class="c-photo-gallery__thumbnails c-thumbnail-count--${c.length} c-thumbnail-total--${a}">\n      ${function(t,e,n){return t.map(((t,i)=>{const s=t.querySelectorAll("img").item(0),a=s.getAttribute("src")||s.attributes.src.nodeValue,o=s.getAttribute("alt")||s.attributes.alt.nodeValue;return`<a href="#gallery-image"\n        data-image="gallery"\n        data-gallery="${n}"\n        id="${n+(e+i)}"\n        role="navigation"\n        title="change photo to '${o}'"\n        data-offset="${e+i}">\n          <img\n            class="c-photo-gallery__thumbnail"\n            alt="${o}"\n            src="${a}"></a>`})).join("")}(c,o,t)}\n    </div>\n    ${function(t,e){return`<div class="c-photo-gallery__nav-btns${e?"":" hidden-md-up"}">\n      <a href="#gallery-previous"\n        title="previous photos"\n        role="navigation"\n        id="${t}prev"\n        data-gallery="${t}"\n        data-image="navigation"\n        data-increment="-1"><i class="fa fa-caret-left" aria-hidden="true"></i> Previous</a>\n      <a href="#gallery-next"\n        title="next photos"\n        role="navigation"\n        id="${t}next"\n        data-gallery="${t}"\n        data-image="navigation"\n        data-increment="1">Next <i class="fa fa-caret-right" aria-hidden="true"></i></a>\n    </div>`}(t,l)}\n  `;le[t].el.html(h),e&&document.getElementById(e).focus()}const ye=["search-stop","search-route","search-route--subway","search-route--commuter_rail","search-route--bus","search-route--ferry"],ve={"search-stop":"stations,stops,locations","search-route":"subway,commuter-rail,bus,ferry,locations","search-route--subway":"subway,stations,stops,locations","search-route--commuter_rail":"commuter-rail,stations,stops,locations","search-route--bus":"bus,stations,stops,locations","search-route--ferry":"ferry,stations,stops,locations","search-projects":"projects"},be={"search-stop":[],"search-route":[0,1,2,3,4].map((t=>`route.type:${t}`)),"search-route--subway":["route.type:0","route.type:1"],"search-route--commuter_rail":["route.type:2"],"search-route--bus":["route.type:3"],"search-route--ferry":["route.type:4"],"search-projects":["_content_type:project","_content_type:project_update"]};function _e(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function we(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ee(t,e,"get"))}function ke(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ee(t,e,"set"),n),n}function Ee(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ce=new WeakMap;class Le{constructor(t){let{pageId:e,withGoogle:n,selectors:i,params:s,indices:a,locationParams:o,templates:r=Ut.TEMPLATES}=t;_e(this,Ce,{writable:!0,value:void 0}),this.withGoogle=n,this.pageId=e,this.selectors=i,this.params=s,this.indices=a,this.locationParams=o||{position:Object.keys(a).length,hitLimit:3},this.input=document.getElementById(i.input),this.controller=null,this.autocomplete=null,this.goBtn=document.getElementById(i.goBtn),ke(this,Ce,r),this.bind(),this.input&&this.init()}bind(){this.onClickGoBtn=this.onClickGoBtn.bind(this)}init(){this.input.value="",this.controller=new Ht(this.indices,this.params),this.autocomplete=this.withGoogle?new ie({id:this.pageId,selectors:this.selectors,indices:Object.keys(this.indices),locationParams:this.locationParams,popular:[],templates:we(this,Ce),parent:this}):new Xt({id:this.pageId,selectors:this.selectors,indices:Object.keys(this.indices),locationParams:this.locationParams,popular:[],templates:we(this,Ce),parent:this}),this.autocomplete.renderFooterTemplate=Le.renderFooterTemplate,this.addEventListeners(),this.controller.addWidget(this.autocomplete)}addEventListeners(){this.goBtn.removeEventListener("click",this.onClickGoBtn),this.goBtn.addEventListener("click",this.onClickGoBtn)}buildSearchParams(){return Tt.paramsToString({query:this.input.value,facets:this.facets(),showmore:this.indexNames()},window.encodeURIComponent)}onClickGoBtn(){return window.Turbolinks.visit(`/search${this.buildSearchParams()}`)}indexNames(){return Object.keys(this.indices).join(",")}facets(){return ve[this.pageId]}getParams(){return{from:this.pageId,query:this.input.value}}static renderFooterTemplate(t){return"locations"===t&&Ut.autocompleteByGoogle()?Ut.TEMPLATES.poweredByGoogleLogo.render({logo:document.getElementById("powered-by-google-logo").innerHTML}):null}}const xe={routes:{indexName:"routes",query:""},stops:{indexName:"stops",query:""},pages:{indexName:"drupal",query:""}},Se={stops:{hitsPerPage:2,facets:["*"],facetFilters:[[]]},routes:{hitsPerPage:5,facets:["*"],facetFilters:[[]]},pages:{hitsPerPage:2,facets:["*"],facetFilters:[["_content_type:page","_content_type:search_result","_content_type:diversion","_content_type:landing_page","_content_type:person","_content_type:project","_content_type:project_update"]]}},$e={position:3,hitLimit:2};class Me extends Ht{constructor(t,e,n,i){super(t,e),this._locationEnabled=!0,this._hitLimit=i||5}_doSearch(t){let e={},n={};return this._locationEnabled&&0==this._activeQueryIds.length||(e=this._sendQueries(t).then(this._processAlgoliaResults()).catch((t=>console.error(t)))),!this._locationEnabled&&this._activeQueryIds.length>0||(n=Pt({input:this._lastQuery,hitLimit:this._hitLimit,sessionToken:this.sessionToken}).catch((t=>console.error("Error while contacting google places API:",t)))),Promise.all([e,n]).then((t=>{this.updateWidgets(t.reduce(((t,e)=>Object.assign(t,e))))})).catch((t=>console.error(t)))}reset(){super.reset(),this._locationEnabled=!1}enableLocationSearch(t){this._locationEnabled=t}setSessionToken(){this.sessionToken||(this.sessionToken=new window.google.maps.places.AutocompleteSessionToken)}resetSessionToken(){this.sessionToken=null}}var Ie=n(5485),Ae=n.n(Ie);class Te{get selectors(){return{textDisplay:`facet-text-${this._id}`,checkbox:`checkbox-item-${this._id}`,counter:`facet-item-counter-${this._id}`,childrenDiv:`facet-children-${this._id}`,checkboxLabel:`facet-label-${this._id}`,icon:`facet-icon-${this._id}`,expansionContainer:`expansion-container-${this._id}`,checkboxControlContainer:`checkbox-container-${this._id}`}}get templates(){const t=this._children.length>0?'role="button" aria-expanded="false" tabindex="0"':"";return{facetItem:Ae().compile(`\n        <div class="{{class}}">\n          <div id="${this.selectors.expansionContainer}" class="c-facets__flex-container--normal" ${t}>\n            <div class="c-facets__icon">\n              {{#iconClass}}\n                {{{iconClass}}}\n              {{/iconClass}}\n            </div>\n            <div id="${this.selectors.textDisplay}" class="c-facets__title">{{text}}</div>\n          </div>\n          <div id="${this.selectors.checkboxControlContainer}" class="c-facets__flex-container--wide">\n            <div class="c-facets__facet-item" id="${this.selectors.counter}"></div>\n            <div class="c-checkbox">\n              <input id="${this.selectors.checkbox}" class="c-checkbox__input" type="checkbox" name="{{text}}" aria-labelledby="${this.selectors.textDisplay}">\n              <label id="${this.selectors.checkboxLabel}" class="c-checkbox__label" for="${this.selectors.checkbox}"></label>\n            </div>\n          </div>\n        </div>\n        <div id="${this.selectors.childrenDiv}"></div>\n      `)}}constructor(t,e){this._id=t.id,this._name=t.name,this._parent=e,this._iconHTML=t.icon,this._facets=t.facets||[],this._prefix=t.prefix,this._count=0,this._facets=this._facets.map((t=>`${this._prefix}:${t}`)),this._facets.length>0&&this.addToMap(this._facets,this),this._checkbox=null,this._counter=null,this._textDisplay=null,this._childrenDiv=null,this._icon=null,this._children=[],t.items&&(this._iconHTML=this._triangleRightIcon(this._id),this._children=t.items.map((t=>(t.prefix||(t.prefix=this._prefix),new Te(t,this)))))}addToMap(t,e){this._parent.addToMap(t,e)}getActiveFacets(){const t=[].concat.apply([],this._children.map((t=>t.getActiveFacets())));return this.isChecked()?this._facets.concat(t):t}isChecked(){return this._checkbox.checked}_triangleRightIcon(t){return`<span id="${this.selectors.icon}" class="c-facets__triangle--right"></span>`}toggleExpansion(){"none"==this._childrenDiv.style.display?(document.getElementById(this.selectors.expansionContainer).setAttribute("aria-expanded","true"),document.getElementById(this.selectors.expansionContainer).setAttribute("aria-controls",this._childrenDiv.id),this._childrenDiv.style.display="block",this._icon.classList.remove("c-facets__triangle--right"),this._icon.classList.add("c-facets__triangle--down")):(document.getElementById(this.selectors.expansionContainer).setAttribute("aria-expanded","false"),document.getElementById(this.selectors.expansionContainer).setAttribute("aria-controls",this._childrenDiv.id),this._childrenDiv.style.display="none",this._icon.classList.remove("c-facets__triangle--down"),this._icon.classList.add("c-facets__triangle--right"))}gatherElements(){this._textDisplay=document.getElementById(this.selectors.textDisplay),this._checkbox=document.getElementById(this.selectors.checkbox),this._counter=document.getElementById(this.selectors.counter),this._childrenDiv=document.getElementById(this.selectors.childrenDiv),this._checkboxLabel=document.getElementById(this.selectors.checkboxLabel),this._icon=document.getElementById(this.selectors.icon),this._checkbox.checked=!1,this.setupListeners()}check(){this._checkbox.checked=!0,this._children.forEach((t=>{t.check()}))}uncheckUI(){this._checkbox.checked=!1}reset(){this.uncheck(),this._children.forEach((t=>t.reset())),this.updateCount(0)}uncheck(){this.uncheckUI(),this._children.forEach((t=>{t.uncheck()}))}isChecked(){return this._checkbox.checked}toggleCheck(){this._checkbox.checked?this.uncheck():this.check(),this._parent.update()}update(){this.updateState(),this._parent.update()}updateState(){this.allChildrenStatus(!0)?this.check():this.uncheckUI(),this._parent.updateState()}allChildrenStatus(t){return 0==this._children.length?this._checkbox.checked==t:this._children.every((e=>e.allChildrenStatus(t)))}updateCount(t){void 0===t&&(t=0),this._count=t,this._counter.innerHTML=t||"",this._parent.updateCount(this._parent.sumChildren())}sumChildren(t){return 0==this._children.length?this._count:this._children.map((t=>t.sumChildren())).reduce((function(t,e){return t+e}),0)}render(t,e){const n=document.createElement("div");n.id=`facet-item-${this._id}`,n.innerHTML=this.templates.facetItem.render({class:e,text:this._name,iconClass:this._iconHTML}),t.appendChild(n),this.gatherElements(),this._childrenDiv.style.display="none",this._childrenDiv=document.getElementById(`facet-children-${this._id}`),this._children.forEach((t=>{t.render(this._childrenDiv,"c-facets__search-facet-child")}))}setupListeners(){const t=document.getElementById(this.selectors.expansionContainer),e=document.getElementById(this.selectors.checkboxControlContainer),n=document.getElementById(this.selectors.checkbox);e.addEventListener("click",(t=>{this.toggleCheck()})),n.addEventListener("keydown",(t=>{const e=t.key||t.keyCode;" "!==e&&"Spacebar"!==e&&32!==e||this.toggleCheck()})),this._children.length>0&&(t.addEventListener("keydown",(t=>{const e=t.key||t.keyCode;" "!==e&&"Spacebar"!==e&&32!==e||(t.preventDefault(),this.toggleExpansion()),"Enter"!==e&&"Enter"!==e&&13!==e||this.toggleExpansion()})),t.addEventListener("click",(()=>{this.toggleExpansion()})))}setupAllListeners(){this.setupListeners(),this._children.forEach((function(t){t.setupAllListeners()}))}selectedFacetNames(t){return this.isChecked()&&t.push(this._id),this._children.forEach((e=>e.selectedFacetNames(t))),t}loadFacet(t){this._children.length>0&&this._children.forEach((e=>e.loadFacet(t))),this._id==t&&(this.check(),this.updateState())}}class De{constructor(t,e){this._facetMap={},this._parent=e,this._item=new Te(t,this)}addToMap(t,e){this._facetMap[t]=e}render(t,e){this._item.render(t,e)}sumChildren(){return!0}updateCount(){return!0}updateCounts(t){Object.keys(this._facetMap).forEach((e=>{let n=0;e.split(",").forEach((e=>{t[e]&&(n+=t[e])})),this._facetMap[e].updateCount(n)}))}update(){this._parent.update()}updateState(){this._parent.updateState()}getFacetsForQuery(){return this._item.getActiveFacets()}shouldDisableQuery(){return this._item.allChildrenStatus(!1)}modifySearch(t,e){this.shouldDisableQuery()||(t.updateFacetFilters(e,this.getFacetsForQuery()),t.addActiveQuery(e))}reset(){this._item.reset()}selectedFacetNames(){return this._item.selectedFacetNames([])}loadFacet(t){this._item.loadFacet(t)}}const Oe={FacetGroup:De,FacetLocationGroup:class extends De{constructor(t,e){super(t,e)}modifySearch(t,e){t.enableLocationSearch(this._item.isChecked())}updateCounts(t){this._item.updateCount(t.locations)}}};class Be{constructor(t,e,n,i){this._container=document.getElementById(t),this._search=e,this._parent=i,this._items={},this._facetPrefixes=[],this._container&&(this._container.innerHTML="",this._parseFacets(n))}updateCounts(t){Object.keys(this._items).forEach((e=>{this._items[e].updateCounts(t)}))}_parseFacets(t){Object.keys(t).forEach((e=>{const n=t[e].item;n.prefix||(n.prefix=t[e].facetName);const i=Oe[n.cls||"FacetGroup"];this._items[e]=new i(n,this),this._items[e].render(this._container,"c-facets__search-facet")}))}reset(){const t=this._items;for(let e in t)t[e].reset();this._resetQueries()}_resetQueries(){this._search.updateActiveQueries([]);for(const t in this._items)this._items[t].modifySearch(this._search,t)}update(){this.updateState(),this._search.search()}updateState(){this._resetQueries(),this._parent.updateState()}selectedFacetNames(){return Object.keys(this._items).reduce(((t,e)=>this._selectedFacetsReducer(e,t)),[])}_selectedFacetsReducer(t,e){return this._items[t].selectedFacetNames().forEach((t=>e.push(t))),e}loadState(t){t.forEach((t=>{Object.values(this._items).forEach((e=>e.loadFacet(t)))}))}}var Pe=n(26574);class je{constructor(t,e,n){this.selectors=t,this._closeModalBtn=null,this._showFacetsBtn=null,this._parent=n,this._facetsContainer=null,this._bind();const i={routes:{queryId:"routes",facetName:"route.type",item:{id:"lines-routes",name:"Lines and Routes",items:[{id:"subway",name:"Subway",facets:["0","1"],icon:Pe.J("subway")},{id:"bus",name:"Bus",facets:["3"],icon:Pe.J("bus")},{id:"commuter-rail",name:"Commuter Rail",facets:["2"],icon:Pe.J("commuter_rail")},{id:"ferry",name:"Ferry",facets:["4"],icon:Pe.J("ferry")}]}},stops:{queryId:"stops",facetName:"stop.station?",item:{id:"stops",name:"Stations and Stops",items:[{id:"facet-station",name:"Stations",facets:["true"],icon:Pe.J("station")},{id:"facet-stop",name:"Stops",facets:["false"],icon:Pe.J("stop")}]}},pages:{queryId:"pages",facetName:"_content_type",item:{id:"page",name:"Pages",facets:["page","search_result","landing_page","person","diversion"],icon:this._faIcon("fa-info")}},projects:{queryId:"projects",facetName:"_content_type",item:{id:"projects",name:"Projects",facets:["project","project_update"],icon:this._faIcon("fa-info")}},documents:{queryId:"documents",facetName:"_content_type",item:{id:"document",name:"Documents",prefix:"search_api_datasource",facets:["entity:file"],icon:this._faIcon("fa-file-o")}},events:{queryId:"events",facetName:"_content_type",item:{id:"event",name:"Events",icon:this._faIcon("fa-calendar"),facets:["event"]}},news:{queryId:"news",facetName:"_content_type",item:{id:"news",name:"News",icon:this._faIcon("fa-newspaper-o"),facets:["news_entry"]}},locations:{queryId:"locations",item:{id:"locations",name:"Locations",cls:"FacetLocationGroup",icon:this._faIcon("fa-map-marker")}}};this._facetBar=new Be("search-facets",e,i,this)}_bind(){this.onClickCloseModalBtn=this.onClickCloseModalBtn.bind(this),this.onClickShowFacetsBtn=this.onClickShowFacetsBtn.bind(this)}onClickShowFacetsBtn(t){this._facetsContainer.classList.add("c-search__facets-container--open"),this._closeModalBtn.classList.add("c-search__close-modal-button--open"),document.body.classList.add("c-search__open-modal")}onClickCloseModalBtn(t){this._facetsContainer.classList.remove("c-search__facets-container--open"),this._closeModalBtn.classList.remove("c-search__close-modal-button--open"),document.body.classList.remove("c-search__open-modal")}_faIcon(t){return`<span aria-hidden="true" class="c-search-result__content-icon fa ${t}"></span>`}init(){this._closeModalBtn=document.getElementById(this.selectors.closeModalButton),this._showFacetsBtn=document.getElementById(this.selectors.showFacetsButton),this._facetsContainer=document.getElementById(this.selectors.facetsContainer),this._closeModalBtn&&this._showFacetsBtn&&this._facetsContainer&&this.addEventListeners()}addEventListeners(){this._closeModalBtn.removeEventListener("click",this.onClickCloseModalBtn),this._closeModalBtn.addEventListener("click",this.onClickCloseModalBtn),this._showFacetsBtn.removeEventListener("click",this.onClickShowFacetsBtn),this._showFacetsBtn.addEventListener("click",this.onClickShowFacetsBtn)}reset(){this._facetBar.reset()}render(t){const e={};Object.keys(t).forEach((n=>{if(n.startsWith("facets-")){const{facets:i}=t[n];Object.keys(i).forEach((t=>{const n=i[t];Object.keys(n).forEach((i=>{e[`${t}:${i}`]=n[i]}))}))}else"locations"==n&&(e.locations=t.locations.hits.length)})),this._facetBar.updateCounts(e)}selectedFacetNames(){return this._facetBar.selectedFacetNames()}loadState(t){this._facetBar.loadState(t)}updateState(){this._parent.updateHistory()}}var Fe=n(19755);const Re={contentResults:Ae().compile('\n    <div class="c-search-results__section">\n      {{#hasHits}}\n        <div class="c-search-result__header">\n          {{title}}\n          {{#isLocation}}\n          <div id="search-result__use-my-location" class="c-search-result__header--location">\n          <i aria-hidden="true" class="fa fa-location-arrow "></i>\n          Use my location\n          <i aria-hidden="true" id="search-result__loading-indicator" class="fa fa-cog fa-spin c-search-result__loading-indicator"></i>\n          </div>\n          {{/isLocation}}\n        </div>\n        <div class="c-search-results__hits">\n          {{#hits}}\n              {{{.}}}\n          {{/hits}}\n          {{#isLocation}}\n            {{{googleLogo}}}\n          {{/isLocation}}\n          {{#showMore}}\n            <div id="show-more--{{group}}" class="c-search-results__show-more" data-group="{{group}}">\n              Show more\n            </div>\n          {{/showMore}}\n        </div>\n      {{/hasHits}}\n    </div>\n ')};class qe{constructor(t,e){this._parent=e,this._groups=["routes","stops","pages","projects","documents","events","news","locations"],this._container=document.getElementById(t),this._googleLogo=document.getElementById("powered-by-google-logo").innerHTML,this._container||console.error(`could not find results container with id: ${t}`),this._container.innerHTML="",this._bind()}_bind(){this.onClickShowMore=this.onClickShowMore.bind(this),this.onClickResult=this.onClickResult.bind(this),this.addResultClickHandler=this.addResultClickHandler.bind(this),this._showLocation=this._showLocation.bind(this)}_addLocationListeners(t){if(t.locations){t.locations.hits.forEach(((t,e)=>{const n=document.getElementById(`hit-location-${e}`);n&&n.addEventListener("click",this._locationSearch(t.address))}));const e=document.getElementById("search-result__use-my-location");e&&e.addEventListener("click",(()=>{this._useMyLocation().then((t=>{this._locationSearchByGeo(t.coords.latitude,t.coords.longitude)})).catch((t=>{console.error(t)}))}))}}_addShowMoreListener(t){const e=document.getElementById(`show-more--${t}`);e&&(e.removeEventListener("click",this.onClickShowMore),e.addEventListener("click",this.onClickShowMore))}onClickResult(t){t.currentTarget.href&&(t.preventDefault(),Fe.post("/search/click",{queryID:t.currentTarget.getAttribute("data-queryid"),position:t.currentTarget.getAttribute("data-hit-position"),objectID:t.currentTarget.getAttribute("data-objectid")},this.onClickResultCallback(t.currentTarget.href)))}onClickResultCallback(t){return e=>{this.reset(),window.Turbolinks.visit(t+Tt.paramsToString(this._parent.getParams(),window.encodeURIComponent))}}onClickShowMore(t){this._parent.onClickShowMore(t.target.getAttribute("data-group"))}_showLocation(t,e,n){const i=this._parent.getParams();i.latitude=t,i.longitude=e,i.address=n;const s=Tt.paramsToString(i,window.encodeURIComponent);window.Turbolinks.visit(`/transit-near-me${s}`)}_locationSearchByGeo(t,e){Ft(parseFloat(t),parseFloat(e)).then((n=>{document.getElementById("search-result__loading-indicator").style.display="none",this._showLocation(t,e,n)})).catch((t=>{console.error("Problem with retrieving location using the Google Maps API.")}))}_locationSearch(t){return()=>{jt(t).then((t=>{this._parent.resetSessionToken(),this._showLocation(t.latitude,t.longitude,t.formatted)})).catch((t=>{console.error(t)}))}}_useMyLocation(){return document.getElementById("search-result__loading-indicator").style.display="inline-block",new Promise(((t,e)=>{navigator.geolocation.getCurrentPosition((e=>t(e)),(t=>e(t)))}))}init(){}reset(){this.render({})}render(t){this._container&&(this._container.innerHTML=this._groups.map((e=>this._renderGroup(t,e))).join(""),Array.from(document.getElementsByClassName(Ut.SELECTORS.result)).forEach(this.addResultClickHandler),this._groups.forEach((t=>this._addShowMoreListener(t))),this._addLocationListeners(t))}_renderGroup(t,e){return t[e]?Re.contentResults.render({title:qe.indexTitles[e]||"",isLocation:"locations"==e||null,nbHits:t[e].nbHits,hasHits:t[e].nbHits>0,showMore:t[e].hits.length<t[e].nbHits,group:e,googleLogo:Ut.autocompleteByGoogle()?Ut.TEMPLATES.poweredByGoogleLogo.render({logo:document.getElementById("powered-by-google-logo").innerHTML}):null,hits:t[e].hits.map(this.renderResult(e,t[e]))}):""}renderResult(t,e){return(e,n)=>`\n        <div class="c-search-result__hit">\n          ${Ut.renderResult(e,t)}\n        </div>\n      `}addResultClickHandler(t){t.removeEventListener("click",this.onClickResult),t.addEventListener("click",this.onClickResult)}}qe.indexTitles={locations:"Locations",stops:"Stations and Stops",routes:"Lines and Routes",projects:"Projects",pages:"Pages",documents:"Documents",events:"Events",news:"News"};var Ne=n(19755);class Ge{constructor(){this.container=null,this.controller=null,this._facetsWidget=null,this._bind(),this._showMoreList=[],this._queryParams={}}_bind(){this.reset=this.reset.bind(this),this.onKeyup=this.onKeyup.bind(this),this.onFocusInput=this.onFocusInput.bind(this)}init(){if(this.container=document.getElementById(Ge.SELECTORS.input),this._resetButton=document.getElementById(Ge.SELECTORS.resetButton),!this.container)return!1;this.controller||(this.controller=new Me(Ge.INITIAL_QUERIES,Ge.DEFAULT_PARAMS,Ge.LATLNGBOUNDS)),this._facetsWidget=new je(Ge.SELECTORS,this.controller,this),this._facetsWidget.reset(),this.controller.addWidget(this._facetsWidget),this._resultsWidget=new qe(Ge.SELECTORS.resultsContainer,this),this.controller.addWidget(this._resultsWidget),this.addEventListeners(),this.loadState(window.location.search),this.controller.search({query:this.container.value})}addEventListeners(){this._resetButton.removeEventListener("click",this.reset),this._resetButton.addEventListener("click",this.reset);const t=document.getElementById(Ge.SELECTORS.input);Ne(document).on("keyup",`#${t.id}`,this.onKeyup),t.addEventListener("focus",this.onFocusInput),document.addEventListener("turbolinks:before-render",(()=>{Ne(document).off("keyup",`#${t.id}`,this.onKeyup)}))}loadState(t){this._queryParams=Tt.parseQuery(t,window.decodeURIComponent),this.container.value=this._queryParams.query||"";const e=this._queryParams.showmore||"";""!=e&&e.split(",").forEach((t=>{this.addPage(t)}));const n=this._queryParams.facets||"";this._facetsWidget.loadState(n.split(",")),""!=n&&this.controller.enableLocationSearch(n.includes("locations"))}reset(t){this.container.value="",this.controller.reset(),this._toggleResetButton(!1),this._queryParams={},this.updateHistory(),Ne(this.container).focus()}_toggleResetButton(t){this._resetButton.style.display=t?"block":"none"}onKeyup(t){const e=document.getElementById(Ge.SELECTORS.input);this._toggleResetButton(""!=e.value),this.controller.search({query:this.container.value}),this.updateHistory()}onFocusInput(t){this.controller.setSessionToken()}getSessionToken(){return this.controller.sessionToken}resetSessionToken(){this.controller.resetSessionToken()}updateHistory(){this._queryParams.query=this.container.value,this._queryParams.facets=this._facetsWidget.selectedFacetNames().join(","),this._queryParams.showmore=this._showMoreList.join(","),window.history.replaceState(window.history.state,"",window.location.pathname+Tt.paramsToString(this._queryParams,window.encodeURIComponent))}onClickShowMore(t){this.addPage(t),this.updateHistory(),this.controller.search({})}addPage(t){this.controller.addPage(t),this._showMoreList.push(t)}getParams(){return{from:"global-search",query:this.container.value,facets:this._facetsWidget.selectedFacetNames().join(",")}}}Ge.INITIAL_QUERIES={routes:{indexName:"routes",query:""},stops:{indexName:"stops",query:""},projects:{indexName:"drupal",query:""},pages:{indexName:"drupal",query:""},documents:{indexName:"drupal",query:""},events:{indexName:"drupal",query:""},news:{indexName:"drupal",query:""}},Ge.DEFAULT_PARAMS={routes:{hitsPerPage:5,facets:["*"],facetFilters:[[]]},stops:{hitsPerPage:5,facets:["*"],facetFilters:[[]]},projects:{hitsPerPage:5,facets:["*"],facetFilters:[["_content_type:project","_content_type:project_update"]]},pages:{hitsPerPage:5,facets:["*"],facetFilters:[["_content_type:page","_content_type:diversion","_content_type:search_result","_content_type:landing_page","_content_type:person"]]},documents:{hitsPerPage:5,facets:["*"],facetFilters:[["search_api_datasource:entity:file"]]},events:{hitsPerPage:5,facets:["_content_type"],facetFilters:[["_content_type:event"]]},news:{hitsPerPage:5,facets:["_content_type"],facetFilters:[["_content_type:news_entry"]]}},Ge.SELECTORS={facetsContainer:"search-facets-container",resultsContainer:"search-results-container",closeModalButton:"close-facets-modal",showFacetsButton:"show-facets",resetButton:"search-global__reset",input:"search-global__input"},Ge.LATLNGBOUNDS={west:41.3193,north:-71.938,east:42.8266,south:-69.6189};var Ye=n(19755);var He=n(23360),Ue=n(19755);const Ke="&nbsp;",Qe=t=>{Array.from(document.getElementsByClassName(t)).forEach((t=>(t.innerHTML=Ke,(t=>{const e=`${t}-tooltip`,n=document.getElementById(e),i=n.getAttribute("data-stop");Ue(n).tooltip("hide"),i?n.setAttribute("data-original-title",i):n.removeAttribute("data-original-title")})(t.parentNode.id))))};class We{constructor(t){this.priorStops=t.priorStops,this.schedules=t.schedules}addOrUpdateTrain(t){const{data:{vehicle:e,stop_name:n},marker:{tooltip_text:i}}=t,s={...e,stop_name:n},a=this.vehicleContainerId(s),o=document.getElementById(a);if(!o)return;o.innerHTML.trim()===Ke&&Qe(s.id),this.addTrain(s,o);((t,e)=>{const n=(t=>`${t}-tooltip`)(e),i=document.getElementById(n),s=i.getAttribute("data-original-title"),a=i.getAttribute("data-stop"),o=i.getAttribute("aria-describedby");if(a){const e=[t,a].join("<hr class='tooltip-divider'>");if(e===s)return;i.setAttribute("data-original-title",e)}else{if(t===s)return;i.setAttribute("data-original-title",t)}o&&Ue(i).tooltip("show")})("<p class='prediction-tooltip'>"+i+"</p>",a)}addTrain(t,e){e.innerHTML=`<div class="${t.id} js-train-icon"><span class="notranslate c-svg__icon-commuter-rail-default"><svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="m36.54 11.28a1.8073 1.8073 0 0 1 -.81-1.54v-4.79a3.03356 3.03356 0 0 0 -2.38-2.89 75.79021 75.79021 0 0 0 -8.71-2 3.37685 3.37685 0 0 0 -1.38.01c-2.6.57-5.22 1.08-7.8 1.8-1.52.42-3.12 1.26-3.12 3.08v4.76a1.78965 1.78965 0 0 1 -.83 1.54 3.14612 3.14612 0 0 0 -1.5 2.69v20.22a3.14244 3.14244 0 0 0 1.18 2.43l5.12 3.75-4.13 7.66h3.37l.58-1.06h15.81l.59 1.06h3.34l-4.09-7.66h.01l5.01-3.71a3.17036 3.17036 0 0 0 1.19-2.47v-20.22a3.17047 3.17047 0 0 0 -1.45-2.66zm-10.08-7.48a.99881.99881 0 0 1 1.21-.98l4.94 1.04a.98623.98623 0 0 1 .79.97v2.94a.99652.99652 0 0 1 -1.19.98l-4.94-.96a.99672.99672 0 0 1 -.81-.98zm-2.46 11.28a2.69727 2.69727 0 1 1 -1.91.79 2.69913 2.69913 0 0 1 1.91-.79zm-9.1-10.25a.98522.98522 0 0 1 .8-.97l4.94-1.04a.99473.99473 0 0 1 1.2.98v3.01a.99775.99775 0 0 1 -.8.98l-4.95.96a1.00066 1.00066 0 0 1 -1.19-.98zm1.0938 29.67a1.955 1.955 0 1 1 1.95-1.96 1.96318 1.96318 0 0 1 -1.95 1.96zm3.7062 5.97h8.63l.88995 1.6h-10.39995zm-2.68 4.86.91-1.65h12.19l.92 1.65zm15.98-10.83a1.955 1.955 0 1 1 1.95-1.96 1.96319 1.96319 0 0 1 -1.95 1.96z"></path></svg></span></div>`}vehicleContainerId(t){const e=`${t.stop_name}-${t.trip_id}`;if("in_transit"!==t.status)return e;const n=this.schedules[e].stop_sequence||1;return this.priorStops[`${t.trip_id}-${n-1}`]}}class Ve{constructor(t){if(!window.location.search.includes("date")){this.data={};try{this.getData()}catch(t){throw new Error("Not able to parse initial data from Commuter Rail Timetable",t.message)}this.bind(),this.channelId=t.getAttribute("data-channel"),this.addEventListeners(),this.icons=new We({schedules:this.schedules,priorStops:this.priorStops})}}getData(){const t=document.getElementById("js-cr-vehicle-schedules-data");this.data.schedulesInfo=JSON.parse(t.textContent);const e=document.getElementById("js-cr-vehicle-prior-stops-data");this.data.stopMap=JSON.parse(e.textContent)}get schedules(){return this.data.schedulesInfo}set schedules(t){this.data.schedulesInfo=t}get priorStops(){return this.data.stopMap}set priorStops(t){this.data.stopMap=t}bind(){this.onVehicles=this.onVehicles.bind(this),this.onRemoveVehicles=this.onRemoveVehicles.bind(this)}addEventListeners(){document.addEventListener(this.channelId,this.onVehicles),document.addEventListener("vehicles:remove",this.onRemoveVehicles),document.addEventListener("turbolinks:before-render",this.teardown.bind(this),{passive:!0})}removeEventListeners(){document.removeEventListener(this.channelId,this.onVehicles),document.removeEventListener("vehicles:remove",this.onRemoveVehicles)}onVehicles(t){const{data:e}=t.detail;e.forEach((t=>this.icons.addOrUpdateTrain(t)))}onRemoveVehicles(t){const{data:e}=t.detail;e.forEach((t=>Qe(t.toString().split("-")[1])))}teardown(){this.removeEventListeners()}}const ze="js-toggle-alert",Je=()=>{"undefined"!=typeof document&&[...document.querySelectorAll(".js-toggle-alert")].forEach((t=>{t.addEventListener("click",tn),t.addEventListener("keydown",Ze)}))},Ze=t=>Xe(t.key||t.keyCode)?tn(t):()=>{},Xe=t=>"Enter"===t||13===t,tn=t=>"A"!==t.target.tagName&&en(on(t.target,ze)),en=t=>nn(t,"true"===t.getAttribute("aria-expanded")),nn=(t,e)=>{sn(t,e),an(t,e)},sn=(t,e)=>!0===e?t.classList.remove("c-alert-item--open"):t.classList.add("c-alert-item--open"),an=(t,e)=>!0===e?t.setAttribute("aria-expanded","false"):t.setAttribute("aria-expanded","true"),on=(t,e)=>!0===t.classList.contains(e)?t:on(t.parentNode,e);var rn=n(38093);var ln=n(42812);function cn(){var t,e,i;Element.prototype.toggleAttribute||(Element.prototype.toggleAttribute=function(t,e){return void 0!==e&&(e=!!e),this.hasAttribute(t)?!!e||(this.removeAttribute(t),!1):!1!==e&&(this.setAttribute(t,""),!0)}),n.e(216).then(n.t.bind(n,99141,23)).then((t=>{const e=document.querySelectorAll(".sticky-month");t.add(e)})),t=Event.prototype,e=document,i=window,t.composedPath||(t.composedPath=function(){if(this.path)return this.path;let{target:t}=this;for(this.path=[];null!==t.parentNode;)this.path.push(t),t=t.parentNode;return this.path.push(e,i),this.path})}function dn(t){const e=t.dataset.group;t.classList.add("selected"),function(t){const e=[...document.querySelectorAll(".c-sales-locations__card")];let n=0;e.forEach((e=>{!function(t,e){return e.toLowerCase().includes("all")||t.toLowerCase()===e.toLowerCase()||t.toLowerCase().includes("both")}(e.dataset.psltype,t)||n>11?e.classList.add("hidden"):(e.classList.remove("hidden"),n++)}))}(e)}var un=n(48968),hn=n(22407),pn=n.n(hn),mn=n(49057),fn=n.n(mn),gn=n(75395),yn=n(51973),vn=n(12918),bn=n(71639),_n=n(19755);let wn=document.querySelector("meta[name='csrf-token']").getAttribute("content"),kn={};kn.AlgoliaAutocomplete={mounted(){fn()(this.el)}};let En=new yn._("/live",gn.sk,{params:{_csrf_token:wn},hooks:kn});En.connect(),window.liveSocket=En,pn()(),document.body.className=document.body.className.replace("no-js","js"),vn.start(),window.Turbolinks=vn,window.autocomplete=bn,window.nextTick=function(t){window.setTimeout(t,0)},window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,15)},"previousElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"previousElementSibling",{get(){let t=this.previousSibling;for(;t&&1!==t.nodeType;)t=t.previousSibling;return t}}),"nextElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"nextElementSibling",{get(){let t=this.nextSibling;for(;t&&1!==t.nodeType;)t=t.nextSibling;return t}}),Array.prototype.map||(Array.prototype.map=function(t){let e,n,i;if(null==this)throw new TypeError("this is null or not defined");const s=Object(this),a=s.length>>>0;if("function"!=typeof t)throw new TypeError(`${t} is not a function`);for(arguments.length>1&&(e=arguments[1]),n=new Array(a);i<a;){var o,r;i in s&&(o=s[i],r=t.call(e,o,i,s),n[i]=r),i++}return n}),Array.from||(Array.from=function(){const t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=Math.pow(2,53)-1,i=function(t){const e=function(t){const e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),n)};return function(t){const n=this,s=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");const a=arguments.length>1?arguments[1]:void 0;let o;if(void 0!==a){if(!e(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}const r=i(s.length),l=e(n)?Object(new n(r)):new Array(r);let c,d=0;for(;d<r;)c=s[d],l[d]=a?void 0===o?a(c,d):a.call(o,c,d):c,d+=1;return l.length=r,l}}()),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value(t){if(null==this)throw new TypeError('"this" is null or not defined');const e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");const i=arguments[1];let s=0;for(;s<n;){const n=e[s];if(t.call(i,n,s,e))return n;s++}}}),[Element.prototype,CharacterData.prototype].forEach((t=>{t.hasOwnProperty("nextElementSibling")||Object.defineProperty(t,"nextElementSibling",{configurable:!0,enumerable:!0,get(){let t=this;for(;t=t.nextSibling;)if(1===t.nodeType)return t;return null},set:void 0})})),"outerHTML"in SVGElement.prototype&&Object.defineProperty(SVGElement.prototype,"outerHTML",{get(){const t=document.createElement("div");return t.appendChild(this.cloneNode(!0)),t.innerHTML},enumerable:!1,configurable:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var Cn,Ln,xn,Sn,$n,Mn,In,An;!function(t,e){e=e||r,t.forEach((t=>{function n(t){e(t.target).siblings("label").find(".loading-indicator").removeClass("hidden-xs-up");const n=e(t.target).parents("form"),i=n.attr("action"),s=n.serialize();window.Turbolinks.visit(function(t,e,n){n||"undefined"!=typeof window&&(n=window.location.pathname);if(void 0===t||""===t||"#"===t)return n+"?"+e;if("#"==t.charAt(0))return n+"?"+e+t;const i=t.replace(/#/,"?"+e+"#");if(i===t)return t+"?"+e;return i}(i,s))}e(document).on(t,"[data-submit-on-"+t+"] select",n),e(document).on(t,"[data-submit-on-"+t+"] input",n),document.addEventListener("turbolinks:before-cache",(function(n){e(`[data-submit-on-${t}] label .loading-indicator`).addClass("hidden-xs-up")}),{passive:!0}),e('<style type="text/css">[data-submit-on-'+t+"] [type=submit] {display: none;}</style>").appendTo(e("head"))}))}(["blur","change"]),document.addEventListener("turbolinks:load",s),a=[],window.mapsCallback=function(){window.isMapReady=!0,a.forEach((t=>t())),a=[]},(0,c.ZP)(),function(t){function e(e,n){return function(i){i.preventDefault(),i.stopPropagation();const s=t(i.currentTarget).data("target");t(s).addClass("collapse").addClass(e).collapse({toggle:!1}).collapse(n)}}(t=t||l)(document).on("click","[data-hide=collapse]",e("in","hide")),t(document).on("click","[data-show=collapse]",e("","show")),t(document).on("shown.bs.collapse",".js-focus-on-expand",(t=>{t.target.focus()}))}(),document.addEventListener("turbolinks:load",Je,{passive:!0}),function(t){t=t||d,document.addEventListener("turbolinks:before-cache",(function(){t(".modal.in").modal("hide")}),{passive:!0})}(),g(),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;document.addEventListener("turbolinks:load",(()=>{document.getElementById("support")&&window.nextTick((()=>{k(t);const e=[];E(t,e),$(),A(t),M(t),O(t),F(t,e),w(t),R(t)}))}),{passive:!0})}(),function(t){function e(){t(".fixedsticky").fixedsticky("destroy"),t(".fixedsticky").fixedsticky()}t=t||q,document.addEventListener("turbolinks:load",(()=>window.nextTick(e)),{passive:!0}),document.addEventListener("shown.bs.collapse",(()=>window.nextTick(e)),{passive:!0})}(),(0,i.Z)(),function(){const t=Ye;t(document).on("focus",".js-form__input",(function(e){t(e.target.parentNode).addClass("c-form__input-focused")})),t(document).on("blur",".js-form__input",(function(e){t(e.target.parentNode).removeClass("c-form__input-focused")}))}(),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.navigator;"geolocation"in n?(e.addEventListener("turbolinks:before-visit",G(t),{passive:!0}),t(document).on("click","[data-geolocation-target]",Y(t,n))):e.documentElement.className+=" geolocation-disabled"}(),document.addEventListener("turbolinks:load",(function(){const t=document.getElementById("address-search-input");t&&t.form.addEventListener("submit",(e=>U(e,window.location,t)))}),{passive:!0}),H(document).on("autocomplete:added","#address-search-input",(function(t,e){K(e,t.target)})),H(document).on("geolocation:complete","#address-search-input",Q),o((()=>{document.addEventListener("turbolinks:load",V,{passive:!0}),V()})),document.addEventListener("turbolinks:load",X),document.addEventListener("turbolinks:load",ct,{passive:!0}),document.addEventListener("turbolinks:load",(()=>{(()=>{const t=document.querySelectorAll(".m-tabbed-nav__item"),e=document.querySelectorAll(".m-tabbed-nav__content-item");t.forEach((n=>{const{tabType:i}=n.dataset,s=((t,e,n)=>i=>{i.preventDefault(),e.forEach((e=>{const n=e.dataset.tabType===t;e.classList.toggle("active",n),e.setAttribute("aria-selected",n)})),n.forEach((e=>{const n=e.dataset.tabContentType===t;e.classList.toggle("active",n)}))})(i,t,e);n.addEventListener("click",s),n.addEventListener("keyup",(t=>{"Enter"===t.key&&s(t)}))}))})()})),(t=>{const e={animating:!1},n=n=>{if(!0===e.animating)return;const i=([...document.querySelectorAll(".js-tt-cell")].slice(1,2)[0].clientWidth+1)*n,s=t("[data-sticky-container]");s.animate({scrollLeft:s.scrollLeft()+i},{duration:200,step:()=>{e.animating=!0},done:()=>{e.animating=!1}})};(t=t||pt)(document).on("click","button[data-scroll='earlier']",(()=>n(-1))),t(document).on("click","button[data-scroll='later']",(()=>n(1)))})(),document.addEventListener("turbolinks:load",ft,{passive:!0}),window.addEventListener("resize",yt),document.addEventListener("turbolinks:load",St,{passive:!0}),function(t){t=t||$t;const e=e=>{e?(t(".direction-filter").removeAttr("hidden"),t(".date-picker-container").attr("hidden","hidden")):t(".date-picker-container").slideUp("slow",(()=>{t(".date-picker-container").attr("hidden","hidden"),t(".direction-filter").hide().removeAttr("hidden").slideDown("fast")})),t(".calendar-cover").attr("hidden","hidden")},n=()=>{t(".direction-filter").attr("hidden","hidden"),t(".date-picker-container").hide().removeAttr("hidden").slideDown("slow"),t(".calendar-cover").removeAttr("hidden")},i=t=>{t.preventDefault();const i=document.querySelector(".date-picker-container").hasAttribute("hidden"),s=document.getElementById("date-filter");i?(n(),document.getElementById("date-picker-calendar").focus()):(e(!1),s.focus()),s.setAttribute("aria-expanded",i)};e(!0),t(document).on("click",".date-picker-toggle",i),document.addEventListener("turbolinks:load",(()=>{document.getElementById("date-filter")&&(-1===window.location.search.indexOf("shift=")?requestAnimationFrame((()=>e(!0))):requestAnimationFrame(n))}),{passive:!0})}(),function(t){(t=t||Mt)(document).on("turbolinks:load",(function(){t("[toggle-element-collapse]").addClass("collapse")})),t(document).on("click","[data-toggle-collapse]",(function(){const e=t(this).attr("data-toggle-collapse");t("[data-toggle-route="+e+"]").toggle()})),t(document).on("click","[data-toggle-hide]",(function(){t("[data-toggle-hide]").hide()}))}(),function(t){(t=t||oe)(document).on("hide.bs.collapse show.bs.collapse",".collapse.stop-list",(function(e){const n=t(e.target).attr("id"),i=t("[data-target='#"+n+"']");i.find(".fa").toggleClass("fa-angle-down fa-angle-up"),function(e){const n=e.data("target-branch");t("[data-branch='"+n+"']").toggleClass("expanded"),e.parents(".route-branch-stop").toggleClass("expanded")}(i)}))}(),function(t,e){t(document).on("shown.bs.collapse","#search",(e=>{t("[data-input=search]").eq(0).focus()})),document.addEventListener("turbolinks:load",(()=>{!function(t,e){t("[data-facet=search] input[type='checkbox']").change((()=>{t("[data-form='search-filter']").submit()})),t("[data-container='search-filter']").addClass("hidden-sm-down"),t("[data-heading='search-filter']").addClass("closed").click((n=>{if(t(window).width()>e.md)return;const i=t(n.target),s=i.siblings("[data-container='search-filter']").eq(0);s.hasClass("hidden-sm-down")?(s.hide().removeClass("hidden-sm-down").slideDown("fast"),i.addClass("open").removeClass("closed")):(i.removeClass("open").addClass("closed"),s.slideUp("fast",(()=>{s.addClass("hidden-sm-down").css({display:"block"})})))}))}(t,e)}),{passive:!0})}(_n,{xs:0,sm:544,md:800,lg:1088,xxl:1344}),function(t){t=t||re,document.addEventListener("turbolinks:load",(()=>function(t){le=function(t){const e={};let n,i,s;return t('[data-component="photo-gallery"]').each(((a,o)=>{n=t(o),i=fe(),n.attr("data-gallery-id",i),s=n.find("figure").get(),e[i]=ce(n,s)})),e}(t),Object.keys(le).forEach((t=>ge(t)))}(t)),{passive:!0}),t(document).on("click",'[data-image="gallery"]',he),t(document).on("click",'[data-image="navigation"]',pe)}(),function(t){t=t||ht;const e='[data-toggle="tooltip"]',n=t=>{const e=t.data("lastTouchEnd")||t.data("lastTouchStart");return e&&new Date-e.timeStamp<=550},i=t=>{window.setTimeout((()=>{t.tooltip("hide")}),10)};document.addEventListener("turbolinks:before-cache",(function(){t(e).tooltip("dispose"),t(".tooltip").remove()}),{passive:!0}),document.addEventListener("turbolinks:load",(()=>{t(e).each((function(e,n){t(n).tooltip({container:t(n).parent()})})),t(document).on("touchstart",e,(function(e){t(this).data("lastTouchStart",e.originalEvent)})),t(document).on("touchend",e,(function(e){e.stopPropagation();const n=t(this);n.data("lastTouchEnd",e.originalEvent),(t=>{const e=t.data("lastTouchStart"),n=t.data("lastTouchEnd");return e&&n&&n.timeStamp-e.timeStamp<=500&&Math.abs(n.pageX-e.pageX)<=10&&Math.abs(n.pageY-e.pageY)<=10})(n)&&n.tooltip("toggle")})),t(document).on("mouseenter",e,(function(e){const i=t(this);n(i)||i.tooltip("show")})),t(document).on("mouseleave",e,(function(e){const s=t(this);n(s)||i(s)})),t(document).on("focus",e,(function(e){const i=t(this);n(i)||i.tooltip("show")})),t(document).on("focusout",e,(function(e){const s=t(this);n(s)||i(s)})),t(document).on("touchend","body",(()=>{i(t('[data-toggle="tooltip"]'))}))}),{passive:!0})}(),function(){const t=new Ge;document.addEventListener("turbolinks:load",(()=>{o((()=>{t.init()}))}),{passive:!0})}(),document.addEventListener("turbolinks:load",(()=>{["search-homepage","search-header-desktop","search-header-mobile","search-error-page"].forEach((t=>(t=>{const e={input:`${n=t}__input`,container:`${n}__container`,goBtn:`${n}__input-go-btn`,locationLoadingIndicator:`${n}__loading-indicator`,resetButton:`${n}__reset`,announcer:`${n}__announcer`};var n;const i=document.getElementById(e.input);if(!i)return null;i.setAttribute("name","query");const s=new Le({pageId:t,indices:xe,params:Se,selectors:e,locationParams:$e,withGoogle:!0,templates:Ut.TEMPLATES_ALT_USE_MY_LOCATION});return s.buildSearchParams=()=>Tt.paramsToString({query:s.input.value},window.encodeURIComponent),s})(t)))})),ye.forEach((t=>{const{selectors:e,params:n,indices:i}=(t=>{const e={input:`${t}__input`,container:`${t}__container`,goBtn:`${t}__input-go-btn`,locationLoadingIndicator:`${t}__loading-indicator`,resetButton:`${t}__reset`,announcer:`${t}__announcer`},n={},i={},s=(a="search-projects"===t,"search-stop"===t?"stops":a?"drupal":"routes");var a;return n[s]={hitsPerPage:5,facets:[ve[t]],facetFilters:[be[t]]},i[s]={indexName:s,query:""},{selectors:e,params:n,indices:i}})(t);document.addEventListener("turbolinks:load",(()=>{o((()=>new Le({pageId:t,selectors:e,params:n,indices:i,templates:Ut.TEMPLATES_ALT_USE_MY_LOCATION,withGoogle:!0})))}))})),document.addEventListener("turbolinks:load",(()=>{o((()=>{new ae}))})),Dt(document).on("turbolinks:load",(()=>{const t=document.getElementById("form-data");t&&(Ot.SELECTORS=JSON.parse(t.innerHTML),new Ot)})),function(){const t=(e="mbta_id",function(t,e){const n=t.split(";");for(let t in n){let i,s;if([i,s]=n[t].split("="),i&&i.trim()===e)return s.trim()}return null}(document.cookie,e));var e;let n=1;if(t)try{n=parseInt(t)}catch(t){console.error("Cookies.getUniqueId: Unable to parse mbta_id cookie as integer.")}return n}()%50==0&&(window._fs_debug=!1,window._fs_host="fullstory.com",window._fs_script="edge.fullstory.com/s/fs.js",window._fs_org="AQKVD",window._fs_namespace="FS",Cn=window,Ln=document,xn=window._fs_namespace,Sn="script",$n="user",xn in Cn?Cn.console&&Cn.console.log&&Cn.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].'):((In=Cn[xn]=function(t,e,n){In.q?In.q.push([t,e,n]):In._api(t,e,n)}).q=[],(Mn=Ln.createElement(Sn)).async=1,Mn.crossOrigin="anonymous",Mn.src="https://"+_fs_script,(An=Ln.getElementsByTagName(Sn)[0]).parentNode.insertBefore(Mn,An),In.identify=function(t,e,n){In($n,{uid:t},n),e&&In($n,e,n)},In.setUserVars=function(t,e){In($n,t,e)},In.event=function(t,e,n){In("event",{n:t,p:e},n)},In.anonymize=function(){In.identify(!1)},In.shutdown=function(){In("rec",!1)},In.restart=function(){In("rec",!0)},In.log=function(t,e){In("log",[t,e])},In.consent=function(t){In("consent",!arguments.length||t)},In.identifyAccount=function(t,e){Mn="account",(e=e||{}).acctId=t,In(Mn,e)},In.clearUserCookie=function(){},In._w={},An="XMLHttpRequest",In._w[An]=Cn[An],An="fetch",In._w[An]=Cn[An],Cn[An]&&(Cn[An]=function(){return In._w[An].apply(this,arguments)}),In._v="1.2.0")),(0,He.default)(),document.addEventListener("turbolinks:load",(()=>{const t=document.getElementById("js-cr-vehicle-data");return t?new Ve(t):{}}),{passive:!0}),(0,rn.Z)(),document.addEventListener("turbolinks:load",(()=>{const t=document.getElementsByClassName("c-paragraph--trip-plan-widget");Array.from(t).forEach((t=>{new ae({containerEl:t})}))})),document.addEventListener("turbolinks:load",(()=>{const t=document.querySelector(".m-view-previous-events");t&&t.classList.remove("hidden"),document.querySelector(".m-events-hub")&&(!!document.documentMode&&cn(),function(){const t=document.querySelector(".m-events-hub").querySelectorAll(".m-event-list__select");for(let e=0;e<t.length;e++)t[e].addEventListener("change",(t=>{let{target:e}=t;window.location.assign(e.value)}));const e=document.querySelector(".m-events-hub");if(!e)return;const n=e.querySelector(".m-event-list__nav--mobile-controls");let i=window.scrollY||document.documentElement.scrollTop,s=0,a=0;["scroll","wheel"].forEach((t=>{document.addEventListener(t,(()=>{window.requestAnimationFrame((()=>{const t=e.querySelectorAll(".c-expandable-block__link");for(let e=0;e<t.length;e++){const n=t[e],i=parseInt(window.getComputedStyle(n).top.replace("px",""),10),s=n.getBoundingClientRect().top===i;n.toggleAttribute("stuck",s)}const o=window.scrollY||document.documentElement.scrollTop;a=o>i?2:o<i?1:0;const r=n.getBoundingClientRect().height;a!==s&&(2===a&&o>r?(e.classList.add("js-nav-down"),e.classList.remove("js-nav-up")):1===a&&(e.classList.add("js-nav-up"),e.classList.remove("js-nav-down")),s=a),i=o,function(t){const e=t.querySelectorAll(".m-event-list__month");for(let t=0;t<e.length;t++){const n=e[t];"false"==n.querySelectorAll(".c-expandable-block__link")[0].getAttribute("aria-expanded")?n.classList.add("sticky-top"):n.classList.remove("sticky-top")}}(e)}))}),{capture:!1,passive:!0})}));const o=e.querySelector(".m-event-list__month--active");o&&o.scrollIntoView()}(),function(){const t=document.querySelector(".m-events-hub").querySelectorAll(".m-event-overlay");for(let e=0;e<t.length;e++){const n=t[e],i=new ln.Z(n),s=function(t){const e=t.composedPath(),n=e.find((function(t){return"m-event-calendar__event"===t.className})),s=n&&n.dataset.a11yDialogShow;s?i._id!==s&&i.hide():e.find((function(t){return"m-event-overlay"===t.className}))||i.hide()};document.addEventListener("click",s),document.addEventListener("turbolinks:before-render",(()=>document.removeEventListener("click",s)))}}())}),{passive:!0}),document.addEventListener("turbolinks:load",(()=>{[...document.querySelectorAll("a.m-previous-events-button")].forEach((t=>{t.addEventListener("click",(()=>{const e=t.dataset.group;[...document.querySelectorAll(`.m-event.hidden[data-group="${e}"]`)].forEach((t=>{t.classList.remove("hidden")})),t.parentElement.classList.add("hidden")})),t.addEventListener("keyup",(e=>{13===e.keyCode&&t.click()}))}))}),{passive:!0}),document.addEventListener("turbolinks:load",(()=>{const t=document.querySelector(".psl-types-buttons");t&&(t.classList.remove("hidden"),function(){const t=[...document.querySelectorAll(".psl-type-button")];t.forEach((e=>{e.addEventListener("click",(()=>{t.forEach((t=>{t!==e&&t.classList.remove("selected")})),dn(e)})),e.addEventListener("keyup",(t=>{13===t.keyCode&&e.click()}))})),dn(t[0])}())}),{passive:!0}),(0,un.sO)()},99546:(t,e,n)=>{"use strict";function i(){return new Promise((function(t,e){window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(t,e):e("window.navigator.geolocation not enabled")}))}n.r(e),n.d(e,{default:()=>i})},26574:(t,e,n)=>{"use strict";function i(t){const e=document.getElementById(`icon-feature-${t}`);return e?e.innerHTML:""}n.d(e,{J:()=>i})},17773:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const i=[{type:"TypeError",items:[{value:"Illegal invocation",function:"triggerEvent",module:"lazysizes/lazysizes"},{value:"Cannot read property '0' of undefined",function:"setAdPageRatioLogicConfig"},{value:"t.indexOf is not a function",function:"check_swipe_element"},{value:"undefined is not an object (evaluating 'document.getElementsByTagName(\"video\")[0].attributes')",function:"global code",module:"<unknown module>"}]},{type:"SyntaxError",items:[{value:"Unexpected end of input",function:"Object.parse",filename:"native"}]},{type:"SecurityError",items:[{value:'Blocked a frame with origin "https://www.toptal.com" from accessing a cross-origin frame.',module:"bootstrap/v5/tp.widget.bootstrap"},{value:'Blocked a frame with origin "https://www.toptal.com" from accessing a cross-origin frame.',function:"global code"}]},{type:"RangeError",items:[{value:"Maximum call stack size exceeded.",module:"smoothscroll-polyfill/dist/smoothscroll"}]}],s=[{type:"CompileError",items:[{value:"WebAssembly.instantiate(): expected magic word 00 61 73 6d, found 7b 22 61 6c @+0",type:"onunhandledrejection"}]},{type:"UnhandledRejection",items:[{value:"Non-Error promise rejection captured with value: Could not find Taboola in window",type:"onunhandledrejection"},{value:"Non-Error promise rejection captured with value: Could not find Nativo script in window",type:"onunhandledrejection"},{value:"Non-Error promise rejection captured with value: Could not find googletag in window",type:"onunhandledrejection"}]}],a=(t,e)=>{if("FetchJSONWithCache Error"===t?.message&&["Load failed","Failed to fetch","NetworkError when attempting to fetch resource."].includes(t?.extra?.error?.message))return null;const n=e.originalException;if(n?.message){const e=["twttr is not defined","Can't find variable: twttr","Can't find variable: article","Can't find variable: $","Can't find variable: WeixinJSBridge","Can't find variable: al_onPoststitialDismiss","Identifier 'boundExec' has already been declared","Identifier 'kImgMinWidth' has already been declared","tm_x is not defined","Unexpected token 'var'","chrome is not defined"],i=["Loading chunk","Loading CSS chunk","Object Not Found Matching Id:","instantSearchSDKJSBridgeClearHighlight","crazyegg","customDispatchEvent is not defined","Quora Pixel Error","mraid","MoatMAK","sendBeacon","pktAnnotationHighlighter","SecurityError: Blocked a frame with origin","SecurityError: Failed to read the 'cssRules' property from 'CSSStyleSheet': Cannot access rules","NetworkError: Load failed","NotAllowedError: Read permission denied","Failed to read the 'cookie' property from 'Document'","safari-extension","safari-web-extension","chrome-extension","moz-extension","perfectbrowsr_nodecheck","BetterJsPop","redefine property: googletag","localStorage","mobincube","crypto.getRandomValues","Zotero","zaloJSV2","QK_middlewareReadModePage","VUE_DEVTOOLS_IFRAME","UXCam","keydownt","onTabScrolled is not defined","window.appHotStart","window.bannerNight","window.showAngularStats","window.huawei","window.onunload is not a function","window.regainData is not a function","window.getPlayer is not a function","window.performance.getEntries is not a function","getHiAnalysticsParam","vid_mate_check","ucapi is not defined","fixedTimeID is not defined","UCShellJava","__show__deepen","Identifier 'VIDEO_PLAYING'","C3 is not defined","safari.self.tab.setContext","checkDomStatus","privateSpecialRepair","TypeError: WebKit","setIOSParameters","webkitExitFullScreen","getElementsByTagName('video')","NS_ERROR_","__firefox__","Java exception was raised","onAPWebViewPause","DOMNodeInsertedByJs","notifyCurrentVideoState is not defined","prebidjs","Taboola","fb.js","fbevents.js","ats.js","Could not find Nativo","Could not find googletag","grecaptcha is not defined","langDetector is not defined","DomNode has not been set for this SimpleScriptable","First argument to Readability constructor should be a document object","Can't find variable: al_","tgetT is not defined"],s=[/window.cb\d+ is not a function/],{message:a}=n;if(e.includes(a)||i.some((t=>a.includes(t)))||s.some((t=>t.test(a))))return null;const o=JSON.stringify(t);if(["r.beacon","nrWrapper","gtm.js","uwt.js","fb.js","ads/pixel.js","hstc.tracking","setupPops","translate_http","translate_a","common-scripts","clarity.js","srcIsLegacy","setupPops","safari-extension","safari-web-extension","chrome-extension","moz-extension","beacon.min.js","recaptcha/releases","RILLONGPRESS","bad-network-popup","adblocker","ats.js","processRandomSelector","card-injection.js","SnapTube","Grammarly.js","beforeLoad_SafariV2.js","MathJax.js","addons/pops/license","BVProxy.min.js","zteEnd","crypto.getRandomValues","localStorage","/Users/","C:\\Users\\","insitez.blob.core.windows"].some((t=>o.includes(t))))return null}const a=t?.exception?.values;if(a?.length){const[{type:e,value:n,stacktrace:o,mechanism:r}]=a;if(e.includes("NS_ERROR_"))return null;if("Event"===e&&"Non-Error exception captured with keys: currentTarget, isTrusted, target, type"===n&&"body > main#page-root > div#cookie-banner-host"===t.extra?.__serialized__?.target)return null;if("UnhandledRejection"===e&&((t,e,n)=>{if(/^Non-Error promise rejection captured with value: Timeout( \(\w\))?$/.test(e))return!0;if(!n&&"Non-Error promise rejection captured with keys: errors, message, name"===e){const e=t?.extra;if(e){const t=e.__serialized__?.message;if("1 errors occurred during unsubscription:\n1) RangeError: Maximum call stack size exceeded."===t)return!0}}})(t,n,o))return null;if(r){const t=s.find((t=>{let{type:n}=t;return n===e}));if(t){if(t.items.some((t=>{let{value:e,type:i}=t;return e===n&&i===r?.type})))return null}}if(o?.frames){const s=i.find((t=>{let{type:n}=t;return n===e}));if(s){if(o.frames.some((t=>s.items.some((e=>{let{value:i,...s}=e;return i===n&&Object.keys(s).every((e=>s[e]===t[e]))})))))return null}const a=["missing ] after element list","Unexpected identifier","Unexpected identifier 'Arguments'. Expected either a closing ']' or a ',' following an array element."];if("SyntaxError"===e&&a.includes(n)&&t?.extra?.arguments.length){const{frames:e}=o,[{isTrusted:n}]=t.extra.arguments,i=["get/<(<unknown module>)","Function([native code])","new Function(<anonymous>)"].includes(t?.culprit);if(n&&i&&e.some((t=>"<unknown module>"===t.module)))return null}}if((t=>{const{url:e,headers:n}=t.request||{};if(!e||!n)return!1;const i=e.split("/",4).pop(),[,s]=n["User-Agent"].match(/Chrome\/(\d+)\./)||[];return/^(javascript|react|nodejs)(\/(interview-questions|tips-and-practices))?$/.test(i)&&s>=102})(t))return null}return t}},41879:(t,e,n)=>{var i=n(19755);!function(t,e){Date.dp_locales={texts:{buttonTitle:"Select date ...",buttonLabel:"Click or press the Enter key or the spacebar to open the calendar",prevButtonLabel:"Go to previous month",prevMonthButtonLabel:"Go to the previous year",prevYearButtonLabel:"Go to the previous twenty years",nextButtonLabel:"Go to next month",nextMonthButtonLabel:"Go to the next year",nextYearButtonLabel:"Go to the next twenty years",changeMonthButtonLabel:"Click or press the Enter key or the spacebar to change the month",changeYearButtonLabel:"Click or press the Enter key or the spacebar to change the year",changeRangeButtonLabel:"Click or press the Enter key or the spacebar to go to the next twenty years",closeButtonTitle:"Close",closeButtonLabel:"Close the calendar",calendarHelp:"- Up Arrow and Down Arrow - goes to the same day of the week in the previous or next week respectively. If the end of the month is reached, continues into the next or previous month as appropriate.\r\n- Left Arrow and Right Arrow - advances one day to the next, also in a continuum. Visually focus is moved from day to day and wraps from row to row in the grid of days.\r\n- Control+Page Up - Moves to the same date in the previous year.\r\n- Control+Page Down - Moves to the same date in the next year.\r\n- Home - Moves to the first day of the current month.\r\n- End - Moves to the last day of the current month.\r\n- Page Up - Moves to the same date in the previous month.\r\n- Page Down - Moves to the same date in the next month.\r\n- Enter or Espace - closes the calendar, and the selected date is shown in the associated text box.\r\n- Escape - closes the calendar without any action."},directionality:"LTR",month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],month_names_abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],month_names_narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_names_abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],day_names_short:["Su","Mo","Tu","We","Th","Fr","Sa"],day_names_narrow:["S","M","T","W","T","F","S"],day_periods:{am:"AM",noon:"noon",pm:"PM"},day_periods_abbreviated:{am:"AM",noon:"noon",pm:"PM"},day_periods_narrow:{am:"a",noon:"n",pm:"p"},quarter_names:["1st quarter","2nd quarter","3rd quarter","4th quarter"],quarter_names_abbreviated:["Q1","Q2","Q3","Q4"],quarter_names_narrow:["1","2","3","4"],era_names:["Before Christ","Anno Domini"],era_names_abbreviated:["BC","AD"],era_names_narrow:["B","A"],full_format:"EEEE, MMMM d, y",long_format:"MMMM d, y",medium_format:"MMM d, y",short_format:"M/d/yy",firstday_of_week:0};var n=['<a class="datepicker-button input-group-addon" role="button" aria-haspopup="true" tabindex="0" aria-labelledby="datepicker-bn-open-label-CALENDARID">','<span id="datepicker-button"></span>',"</a>"],i=['<div class="datepicker-calendar" id="datepicker-calendar-CALENDARID" aria-hidden="false">','\t<div class="datepicker-month-wrap">','\t\t<div class="datepicker-month-fast-next pull-right" role="button" aria-labelledby="datepicker-bn-fast-next-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-forward"></span></div>','\t\t<div class="datepicker-month-next pull-right" role="button" aria-labelledby="datepicker-bn-next-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-triangle-right"></span></div>','\t\t<div class="datepicker-month-fast-prev pull-left" role="button" aria-labelledby="datepicker-bn-fast-prev-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-backward"></span></div>','\t\t<div class="datepicker-month-prev pull-left" role="button" aria-labelledby="datepicker-bn-prev-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-triangle-left"></span></div>','\t\t<div id="datepicker-month-CALENDARID" class="datepicker-month" tabindex="0" role="heading" aria-live="assertive" aria-atomic="true" title="Click or press the Enter key or the spacebar to change the month">July 2015</div>',"\t</div>",'\t<table class="datepicker-grid" role="grid" aria-readonly="true" aria-activedescendant="datepicker-err-msg-CALENDARID" aria-labelledby="datepicker-month-CALENDARID" tabindex="0">','\t\t<thead role="presentation">','\t\t\t<tr class="datepicker-weekdays" role="row">','\t\t\t\t<th scope="col" id="day0-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Sunday"><abbr title="Sunday">Su</abbr></th>','\t\t\t\t<th scope="col" id="day1-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Monday"><abbr title="Monday">Mo</abbr></th>','\t\t\t\t<th scope="col" id="day2-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Tuesday"><abbr title="Tuesday">Tu</abbr></th>','\t\t\t\t<th scope="col" id="day3-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Wednesday"><abbr title="Wednesday">We</abbr></th>','\t\t\t\t<th scope="col" id="day4-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Thursday"><abbr title="Thursday">Th</abbr></th>','\t\t\t\t<th scope="col" id="day5-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Friday"><abbr title="Friday">Fr</abbr></th>','\t\t\t\t<th scope="col" id="day6-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Saturday"><abbr title="Saturday">Sa</abbr></th>',"\t\t\t</tr>","\t\t</thead>",'\t\t<tbody role="presentation">',"\t\t\t<tr>",'\t\t\t\t<td id="datepicker-err-msg-CALENDARID" colspan="7">Javascript must be enabled</td>',"\t\t\t</tr>","\t\t</tbody>","\t</table>",'\t<div class="datepicker-close-wrap">','\t\t<button class="datepicker-close" id="datepicker-close-CALENDARID" aria-labelledby="datepicker-bn-close-label-CALENDARID">Close</button>',"\t</div>",'\t<div id="datepicker-bn-open-label-CALENDARID" class="datepicker-bn-open-label offscreen">Click or press the Enter key or the spacebar to open the calendar</div>','\t<div id="datepicker-bn-prev-label-CALENDARID" class="datepicker-bn-prev-label offscreen">Go to previous month</div>','\t<div id="datepicker-bn-next-label-CALENDARID" class="datepicker-bn-next-label offscreen">Go to next month</div>','\t<div id="datepicker-bn-fast-prev-label-CALENDARID" class="datepicker-bn-fast-prev-label offscreen">Go to previous year</div>','\t<div id="datepicker-bn-fast-next-label-CALENDARID" class="datepicker-bn-fast-next-label offscreen">Go to next year</div>','\t<div id="datepicker-bn-close-label-CALENDARID" class="datepicker-bn-close-label offscreen">Close the date picker</div>',"</div>"],s=function(t,a){var o=this;switch(this.$target=e(t),this.options=e.extend({},s.DEFAULTS,a),this.locales=Date.dp_locales,this.options.startView){case 1:case"months":this.options.startView=1;break;case 2:case"years":this.options.startView=2;break;default:this.options.startView=0}"string"==typeof this.options.inputFormat&&(this.options.inputFormat=[this.options.inputFormat]),null!=this.options.min?this.options.min=this.parseDate(this.options.min):this.$target.attr("min")&&(this.options.min=this.parseDate(this.$target.attr("min"))),null!=this.options.max?this.options.max=this.parseDate(this.options.max):this.$target.attr("max")&&(this.options.max=this.parseDate(this.$target.attr("max"))),this.id=this.$target.attr("id")||"datepicker-"+Math.floor(1e5*Math.random());var r=i.join("");r=r.replace(/CALENDARID/g,this.id+""),0==this.$target.parent(".input-group").length&&this.$target.wrap('<div class="input-group"></div>'),this.$label=this.$target.parents().find("label[for="+this.id+"]"),this.$group=this.$target.parent(".input-group"),this.$target.attr("aria-autocomplete","none"),this.$target.css("min-width","7em"),this.$target.addClass("form-control"),this.$target.attr("placeholder")||this.$target.attr("placeholder",this.options.inputFormat[0]);var l=n.join("");(l=l.replace(/CALENDARID/g,this.id+""),this.$button=e(l),this.$button.addClass(this.options.theme),this.$calendar=e(r),this.$calendar.addClass(this.options.theme),this.$target.after(this.$button),0!=this.options.inline)?(this.hideObject(this.$button),("string"==typeof this.options.inline?e("#"+this.options.inline):this.options.inline).append(this.$calendar),this.$calendar.css({position:"relative",left:"0px"}),this.initializeDate()):(this.$target.parent().after(this.$calendar),this.hide(!this.options.gainFocusOnConstruction));"static"===this.$calendar.parent().css("position")&&this.$calendar.parent().css("position","relative"),this.$calendar.find(".datepicker-bn-open-label").html(this.options.buttonLabel),this.$target.attr("id")&&this.$calendar.attr("aria-controls",this.$target.attr("id")),this.$button.find("span").attr("title",this.options.buttonTitle),this.$calendar.css("left",this.$target.parent().position().left+"px"),this.$monthObj=this.$calendar.find(".datepicker-month"),this.$prev=this.$calendar.find(".datepicker-month-prev"),this.$next=this.$calendar.find(".datepicker-month-next"),this.$fastprev=this.$calendar.find(".datepicker-month-fast-prev"),this.$fastnext=this.$calendar.find(".datepicker-month-fast-next"),this.$grid=this.$calendar.find(".datepicker-grid"),"RTL"===this.locales.directionality&&this.$grid.addClass("rtl");this.$grid.find("th.datepicker-day abbr");this.drawCalendarHeader(),0==this.options.inline&&1==this.options.modal?(this.$close=this.$calendar.find(".datepicker-close"),this.$close.html(this.options.closeButtonTitle).attr("title",this.options.closeButtonLabel),this.$calendar.find(".datepicker-bn-close-label").html(this.options.closeButtonLabel)):(this.hideObject(this.$calendar.find(".datepicker-close-wrap")),this.hideObject(this.$calendar.find(".datepicker-bn-close-label"))),this.keys={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40},this.bindHandlers(),this.$button.click((function(t){return"true"===o.$calendar.attr("aria-hidden")?(o.initializeDate(),o.show()):o.hide(),o.selectGridCell(o.$grid.attr("aria-activedescendant")),t.stopPropagation(),!1})),this.$button.keydown((function(t){var n=t||event;if(n.keyCode==o.keys.enter||n.keyCode==o.keys.space)return e(this).trigger("click"),!1})),this.$calendar.on("blur",(function(t){"false"===o.$calendar.attr("aria-hidden")&&o.hide()}))};s.VERSION="2.1.1",s.DEFAULTS={firstDayOfWeek:Date.dp_locales.firstday_of_week,weekDayFormat:"short",startView:0,daysOfWeekDisabled:[],inputFormat:[Date.dp_locales.short_format],outputFormat:Date.dp_locales.short_format,titleFormat:Date.dp_locales.full_format,buttonTitle:Date.dp_locales.texts.buttonTitle,buttonLabel:Date.dp_locales.texts.buttonLabel,prevButtonLabel:Date.dp_locales.texts.prevButtonLabel,prevMonthButtonLabel:Date.dp_locales.texts.prevMonthButtonLabel,prevYearButtonLabel:Date.dp_locales.texts.prevYearButtonLabel,nextButtonLabel:Date.dp_locales.texts.nextButtonLabel,nextMonthButtonLabel:Date.dp_locales.texts.nextMonthButtonLabel,nextYearButtonLabel:Date.dp_locales.texts.nextYearButtonLabel,changeMonthButtonLabel:Date.dp_locales.texts.changeMonthButtonLabel,changeYearButtonLabel:Date.dp_locales.texts.changeYearButtonLabel,changeRangeButtonLabel:Date.dp_locales.texts.changeRangeButtonLabel,closeButtonTitle:Date.dp_locales.texts.closeButtonTitle,closeButtonLabel:Date.dp_locales.texts.closeButtonLabel,onUpdate:function(t){},theme:"default",modal:!1,inline:!1,gainFocusOnConstruction:!0,min:null,max:null},s.prototype.initializeDate=function(){var t=this.$target.val(),e=""===t?new Date:this.parseDate(t);this.setDate(e)},s.prototype.getDate=function(){var t=this.$target.val();return""===t?new Date:this.parseDate(t)},s.prototype.setDate=function(t){switch(this.dateObj=t,null==this.dateObj&&(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=new Date,this.dateObj.setHours(0,0,0,0)),null!=this.options.min&&this.dateObj<this.options.min?(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=this.options.min):null!=this.options.max&&this.dateObj>this.options.max&&(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=this.options.max),this.$target.val(this.format(this.dateObj)),this.curYear=this.dateObj.getFullYear(),this.year=this.curYear,this.curMonth=this.dateObj.getMonth(),this.month=this.curMonth,this.date=this.dateObj.getDate(),this.options.startView){case 1:this.populateMonthsCalendar(),this.$grid.attr("aria-activedescendant",this.$grid.find(".curMonth").attr("id"));break;case 2:this.populateYearsCalendar(),this.$grid.attr("aria-activedescendant",this.$grid.find(".curYear").attr("id"));break;default:this.populateDaysCalendar(),this.$grid.attr("aria-activedescendant",this.$grid.find(".curDay").attr("id"))}},s.prototype.drawCalendarHeader=function(){for(var t=this.$grid.find("th.datepicker-day"),e=this.options.firstDayOfWeek,n=0;n<7;n++)t.eq(n).attr("aria-label",this.locales.day_names[e]),t.children("abbr").eq(n).attr("title",this.locales.day_names[e]).text("short"===this.options.weekDayFormat?this.locales.day_names_short[e]:this.locales.day_names_narrow[e]),e=(e+1)%7},s.prototype.populateDaysCalendar=function(){this.$calendar.find(".datepicker-bn-prev-label").html(this.options.prevButtonLabel),this.$calendar.find(".datepicker-bn-next-label").html(this.options.nextButtonLabel),this.$calendar.find(".datepicker-bn-fast-prev-label").html(this.options.prevMonthButtonLabel),this.$calendar.find(".datepicker-bn-fast-next-label").html(this.options.nextMonthButtonLabel),null!=this.options.min&&(this.year-1<this.options.min.getFullYear()||this.year-1==this.options.min.getFullYear()&&this.month<this.options.min.getMonth())?(this.$fastprev.attr("title",""),this.$fastprev.addClass("disabled"),this.$fastprev.removeClass("enabled")):(this.$fastprev.attr("title",this.options.prevMonthButtonLabel),this.$fastprev.addClass("enabled"),this.$fastprev.removeClass("disabled"));var t=this.previousMonth(this.year,this.month);null!=this.options.min&&(t.year<this.options.min.getFullYear()||t.year==this.options.min.getFullYear()&&t.month<this.options.min.getMonth())?(this.$prev.attr("title",""),this.$prev.addClass("disabled"),this.$prev.removeClass("enabled")):(this.$prev.attr("title",this.options.prevButtonLabel),this.$prev.addClass("enabled"),this.$prev.removeClass("disabled")),this.$monthObj.attr("title",this.options.changeMonthButtonLabel);var n=this.nextMonth(this.year,this.month);null!=this.options.max&&(n.year>this.options.max.getFullYear()||n.year==this.options.max.getFullYear()&&n.month>this.options.max.getMonth())?(this.$next.attr("title",""),this.$next.addClass("disabled"),this.$next.removeClass("enabled")):(this.$next.attr("title",this.options.nextButtonLabel),this.$next.addClass("enabled"),this.$next.removeClass("disabled")),null!=this.options.max&&(this.year+1>this.options.max.getFullYear()||this.year+1==this.options.max.getFullYear()&&this.month>this.options.max.getMonth())?(this.$fastnext.attr("title",""),this.$fastnext.addClass("disabled"),this.$fastnext.removeClass("enabled")):(this.$fastnext.attr("title",this.options.nextMonthButtonLabel),this.$fastnext.addClass("enabled"),this.$fastnext.removeClass("disabled")),this.showObject(this.$fastprev),this.showObject(this.$fastnext);var i=this.getDaysInMonth(this.year,this.month),s=this.getDaysInMonth(t.year,t.month),a=new Date(this.year,this.month,1).getDay(),o=(this.options.firstDayOfWeek+6)%7,r=1,l=1;this.$monthObj.html(this.locales.month_names[this.month]+" "+this.year),this.showObject(this.$grid.find("thead"));for(var c='\t<tr id="row0-'+this.id+'" role="row">\n',d=0,u=this.options.firstDayOfWeek;u!=a;)d++,u=(u+1)%7;for(;d>0;d--)c+='\t\t<td class="empty">'+(s-d+1)+"</td>\n";for(r=1;r<=i;r++){var h=new Date(this.year,this.month,r,0,0,0,0),p=this.formatDate(h,this.options.titleFormat),m=r==this.date&&this.month==this.curMonth&&this.year==this.curYear?" curDay":"";e.inArray(u,this.options.daysOfWeekDisabled)>-1||null!=this.options.min&&h<this.options.min||null!=this.options.max&&h>this.options.max?c+='\t\t<td id="cell'+r+"-"+this.id+'" class="day unselectable'+m+'"':c+='\t\t<td id="cell'+r+"-"+this.id+'" class="day selectable'+m+'"',c+=' data-value="'+r+'"',c+=' title="'+p+'"',c+=' aria-label="'+p+'"',c+=' headers="day'+u+"-header-"+this.id+'" role="gridcell" tabindex="-1" aria-selected="false">'+r,c+="</td>",u==o&&r<i&&(c+='\t</tr>\n\t<tr id="row'+l+"-"+this.id+'" role="row">\n',l++),r<i&&(u=(u+1)%7)}for(;u!=o;)c+='\t\t<td class="empty">'+ ++d+"</td>\n",u=(u+1)%7;c+="\t</tr>";var f=this.$grid.find("tbody");f.empty(),f.append(c),this.gridType=0},s.prototype.populateMonthsCalendar=function(){this.$calendar.find(".datepicker-bn-prev-label").html(this.options.prevMonthButtonLabel),this.$calendar.find(".datepicker-bn-next-label").html(this.options.nextMonthButtonLabel),this.hideObject(this.$fastprev),this.hideObject(this.$fastnext),null!=this.options.min&&this.year-1<this.options.min.getFullYear()?(this.$prev.attr("title",""),this.$prev.addClass("disabled"),this.$prev.removeClass("enabled")):(this.$prev.attr("title",this.options.prevMonthButtonLabel),this.$prev.addClass("enabled"),this.$prev.removeClass("disabled")),this.$monthObj.attr("title",this.options.changeYearButtonLabel),null!=this.options.max&&this.year+1>this.options.max.getFullYear()?(this.$next.attr("title",""),this.$next.addClass("disabled"),this.$next.removeClass("enabled")):(this.$next.attr("title",this.options.nextMonthButtonLabel),this.$next.addClass("enabled"),this.$next.removeClass("disabled"));var t=0,n=1,i=this.$grid.find("tbody");this.$monthObj.html(this.year),this.hideObject(this.$grid.find("thead")),i.empty(),e("#datepicker-err-msg-"+this.id).empty();var s='\t<tr id="row0-'+this.id+'" role="row">\n';for(t=0;t<12;t++)t==this.month&&this.year==this.curYear?s+='\t\t<td id="cell'+(t+1)+"-"+this.id+'" class="month curMonth selectable"':null!=this.options.min&&(this.year<this.options.min.getFullYear()||this.year==this.options.min.getFullYear()&&t<this.options.min.getMonth())||null!=this.options.max&&(this.year>this.options.max.getFullYear()||this.year==this.options.max.getFullYear()&&t>this.options.max.getMonth())?s+='\t\t<td id="cell'+(t+1)+"-"+this.id+'" class="month unselectable"':s+='\t\t<td id="cell'+(t+1)+"-"+this.id+'" class="month selectable"',s+=' data-value="'+t+'"',s+=' title="'+this.locales.month_names[t]+" "+this.year+'"',s+=' aria-label="'+this.locales.month_names[t]+" "+this.year+'"',s+=' role="gridcell" tabindex="-1" aria-selected="false">'+this.locales.month_names_abbreviated[t],s+="</td>",3!=t&&7!=t||(s+='\t</tr>\n\t<tr id="row'+n+"-"+this.id+'" role="row">\n',n++);s+="\t</tr>",i.append(s),this.gridType=1},s.prototype.populateYearsCalendar=function(){this.$calendar.find(".datepicker-bn-prev-label").html(this.options.prevYearButtonLabel),this.$calendar.find(".datepicker-bn-next-label").html(this.options.nextYearButtonLabel),this.hideObject(this.$fastprev),this.hideObject(this.$fastnext),null!=this.options.min&&this.year-20<this.options.min.getFullYear()?(this.$prev.attr("title",""),this.$prev.addClass("disabled"),this.$prev.removeClass("enabled")):(this.$prev.attr("title",this.options.prevYearButtonLabel),this.$prev.addClass("enabled"),this.$prev.removeClass("disabled")),this.$monthObj.attr("title",this.options.changeRangeButtonLabel),null!=this.options.max&&this.year+20>this.options.max.getFullYear()?(this.$next.attr("title",""),this.$next.addClass("disabled"),this.$next.removeClass("enabled")):(this.$next.attr("title",this.options.nextYearButtonLabel),this.$next.addClass("enabled"),this.$next.removeClass("disabled"));var t=10*Math.floor(this.year/10),n=t+19,i=1,s=this.$grid.find("tbody");this.$monthObj.html(t+"-"+n),this.hideObject(this.$grid.find("thead")),s.empty(),e("#datepicker-err-msg-"+this.id).empty();for(var a='\t<tr id="row0-'+this.id+'" role="row">\n',o=t;o<=n;o++){o==this.year?a+='\t\t<td id="cell'+(o-t+1)+"-"+this.id+'" class="year curYear selectable"':null!=this.options.min&&o<this.options.min.getFullYear()||null!=this.options.max&&o>this.options.max.getFullYear()?a+='\t\t<td id="cell'+(o-t+1)+"-"+this.id+'" class="year unselectable"':a+='\t\t<td id="cell'+(o-t+1)+"-"+this.id+'" class="year selectable"',a+=' data-value="'+o+'"',a+=' title="'+o+'"',a+=' role="gridcell" tabindex="-1" aria-selected="false">'+o,a+="</td>";var r=o-t;4!=r&&9!=r&&14!=r||(a+='\t</tr>\n\t<tr id="row'+i+"-"+this.id+'" role="row">\n',i++)}a+="\t</tr>",s.append(a),this.gridType=2},s.prototype.showDaysOfPrevMonth=function(t){var e=this.previousMonth(this.year,this.month);if(null!=this.options.min&&(e.year<this.options.min.getFullYear()||e.year==this.options.min.getFullYear()&&e.month<this.options.min.getMonth()))return!1;if(this.month=e.month,this.year=e.year,this.populateDaysCalendar(),null!=t){var n="cell"+(this.getDaysInMonth(this.year,this.month)-t)+"-"+this.id;this.$grid.attr("aria-activedescendant",n),this.selectGridCell(n)}return!0},s.prototype.showDaysOfMonth=function(t){if(null!=this.options.min&&(this.year<this.options.min.getFullYear()||this.year==this.options.min.getFullYear()&&t<this.options.min.getMonth()))return!1;if(null!=this.options.max&&(this.year>this.options.max.getFullYear()||this.year==this.options.max.getFullYear()&&t>this.options.max.getMonth()))return!1;this.month=t,this.date=Math.min(this.date,this.getDaysInMonth(this.year,this.month)),this.populateDaysCalendar();var e=this.$grid.find("tbody td[data-value='"+this.date+"']");return this.selectGridCell(e.attr("id")),!0},s.prototype.showMonthsOfPrevYear=function(t){if(null!=this.options.min&&this.year-1<this.options.min.getFullYear())return!1;if(this.year--,this.populateMonthsCalendar(),null!=t){var e="cell"+(12-t)+"-"+this.id;this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)}return!0},s.prototype.showMonthsOfYear=function(t){if(null!=this.options.min&&t<this.options.min.getFullYear())return!1;if(null!=this.options.max&&t>this.options.max.getFullYear())return!1;this.year=t,this.populateMonthsCalendar();var e=this.$grid.find("tbody td[data-value='"+this.month+"']");return this.$grid.attr("aria-activedescendant",e.attr("id")),this.selectGridCell(e.attr("id")),!0},s.prototype.showYearsOfPrevRange=function(t){if(null!=this.options.min&&this.year-20<this.options.min.getFullYear())return!1;if(this.year-=20,this.populateYearsCalendar(),null!=t){var e="cell"+(20-t)+"-"+this.id;this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)}return!0},s.prototype.showDaysOfNextMonth=function(t){var e=this.nextMonth(this.year,this.month);if(null!=this.options.max&&(e.year>this.options.max.getFullYear()||e.year==this.options.max.getFullYear()&&e.month>this.options.max.getMonth()))return!1;if(this.month=e.month,this.year=e.year,this.populateDaysCalendar(),null!=t){var n="cell"+t+"-"+this.id;this.$grid.attr("aria-activedescendant",n),this.selectGridCell(n)}return!0},s.prototype.showMonthsOfNextYear=function(t){if(null!=this.options.max&&this.year+1>this.options.max.getFullYear())return!1;if(this.year++,this.populateMonthsCalendar(),null!=t){var e="cell"+t+"-"+this.id;this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)}return!0},s.prototype.showYearsOfNextRange=function(t){if(null!=this.options.max&&this.year+20>this.options.max.getFullYear())return!1;if(this.year+=20,this.populateYearsCalendar(),null!=t){var e="cell"+t+"-"+this.id;this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)}return!0},s.prototype.showDaysOfPrevYear=function(){return(null==this.options.min||!(this.year-1<this.options.min.getFullYear()||this.year-1==this.options.min.getFullYear()&&this.month<this.options.min.getMonth()))&&(this.year--,this.populateDaysCalendar(),!0)},s.prototype.showDaysOfNextYear=function(){return(null==this.options.max||!(this.year+1>this.options.max.getFullYear()||this.year+1==this.options.max.getFullYear()&&this.month>this.options.max.getMonth()))&&(this.year++,this.populateDaysCalendar(),!0)},s.prototype.bindHandlers=function(){var t=this;this.$fastprev.click((function(e){return t.handleFastPrevClick(e)})),this.$prev.click((function(e){return t.handlePrevClick(e)})),this.$next.click((function(e){return t.handleNextClick(e)})),this.$fastnext.click((function(e){return t.handleFastNextClick(e)})),this.$monthObj.click((function(e){return t.handleMonthClick(e)})),this.$monthObj.keydown((function(e){return t.handleMonthKeyDown(e)})),this.$fastprev.keydown((function(e){return t.handleFastPrevKeyDown(e)})),this.$prev.keydown((function(e){return t.handlePrevKeyDown(e)})),this.$next.keydown((function(e){return t.handleNextKeyDown(e)})),this.$fastnext.keydown((function(e){return t.handleFastNextKeyDown(e)})),1==this.options.modal&&(this.$close.click((function(e){return t.handleCloseClick(e)})),this.$close.keydown((function(e){return t.handleCloseKeyDown(e)}))),this.$grid.keydown((function(e){return t.handleGridKeyDown(e)})),this.$grid.keypress((function(e){return t.handleGridKeyPress(e)})),this.$grid.focus((function(e){return t.handleGridFocus(e)})),this.$grid.blur((function(e){return t.handleGridBlur(e)})),this.$grid.delegate("td","click",(function(e){return t.handleGridClick(this,e)}))},s.prototype.handleFastPrevClick=function(t){if(this.showDaysOfPrevYear()){var e=this.$grid.attr("aria-activedescendant");this.month!=this.curMonth||this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e))}return t.stopPropagation(),!1},s.prototype.handlePrevClick=function(t){var e=this.$grid.attr("aria-activedescendant");switch(this.gridType){case 0:(t.ctrlKey?this.showDaysOfPrevYear():this.showDaysOfPrevMonth())&&(this.month!=this.curMonth||this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)));break;case 1:this.showMonthsOfPrevYear()&&(this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)));break;case 2:this.showYearsOfPrevRange()&&(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id))}return t.stopPropagation(),!1},s.prototype.handleMonthClick=function(t){return this.changeGrid(t),t.stopPropagation(),!1},s.prototype.handleNextClick=function(t){var e=this.$grid.attr("aria-activedescendant");switch(this.gridType){case 0:(t.ctrlKey?this.showDaysOfNextYear():this.showDaysOfNextMonth())&&(this.month!=this.curMonth||this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)));break;case 1:this.showMonthsOfNextYear()&&(this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)));break;case 2:this.showYearsOfNextRange()&&(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id))}return t.stopPropagation(),!1},s.prototype.handleFastNextClick=function(t){if(this.showDaysOfNextYear()){var e=this.$grid.attr("aria-activedescendant");this.month!=this.curMonth||this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e))}return t.stopPropagation(),!1},s.prototype.handleCloseClick=function(t){return this.hide(),t.stopPropagation(),!1},s.prototype.handleFastPrevKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?this.$close.focus():this.$prev.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:return!(!t.shiftKey&&!t.ctrlKey)||(this.showDaysOfPrevYear(),t.stopPropagation(),!1);case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handlePrevKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?0==this.gridType?this.$fastprev.focus():this.$close.focus():this.$monthObj.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:if(t.shiftKey)return!0;switch(this.gridType){case 0:t.ctrlKey?this.showDaysOfPrevYear():this.showDaysOfPrevMonth();break;case 1:this.showMonthsOfPrevYear();break;case 2:this.showYearsOfPrevRange()}return t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handleMonthKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?this.$prev.focus():this.$next.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:return this.changeGrid(t),t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handleNextKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?this.$monthObj.focus():0==this.gridType?this.$fastnext.focus():this.$grid.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:switch(this.gridType){case 0:t.ctrlKey?this.showDaysOfNextYear():this.showDaysOfNextMonth();break;case 1:this.showMonthsOfNextYear();break;case 2:this.showYearsOfNextRange()}return t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handleFastNextKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?this.$next.focus():this.$grid.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:return this.showDaysOfNextYear(),t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handleCloseKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!!t.ctrlKey||(t.shiftKey?this.$grid.focus():0==this.gridType?this.$fastprev.focus():this.$prev.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.esc:case this.keys.space:return!(!t.shiftKey&&!t.ctrlKey)||(this.hide(),t.stopPropagation(),!1)}return!0},s.prototype.handleGridKeyDown=function(t){var n=e("#"+this.$grid.attr("aria-activedescendant")),i=this.$grid.find("td.selectable"),s=this.$grid.find("tbody tr").eq(0).find("td").length;if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return 1==this.options.modal?(t.shiftKey?0==this.gridType?this.$fastnext.focus():this.$next.focus():this.$close.focus(),t.stopPropagation(),!1):(this.hide(),this.handleTabOut(t),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:if(t.ctrlKey)return!0;switch(this.gridType){case 0:this.update(),this.hide();break;case 1:this.showDaysOfMonth(parseInt(n.attr("data-value"),10));break;case 2:this.showMonthsOfYear(parseInt(n.attr("data-value"),10))}return t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1;case this.keys.left:case this.keys.right:if(t.keyCode==this.keys.left&&"LTR"===this.locales.directionality||t.keyCode==this.keys.right&&"RTL"===this.locales.directionality){if(t.ctrlKey||t.shiftKey)return!0;var a=null;if((r=i.index(n)-1)>=0)a=i.eq(r),this.unSelectGridCell(n.attr("id")),this.$grid.attr("aria-activedescendant",a.attr("id")),this.selectGridCell(a.attr("id"));else switch(this.gridType){case 0:this.showDaysOfPrevMonth(0);break;case 1:this.showMonthsOfPrevYear(0);break;case 2:this.showYearsOfPrevRange(0)}return t.stopPropagation(),!1}if(t.ctrlKey||t.shiftKey)return!0;var o=null;if((r=i.index(n)+1)<i.length)o=i.eq(r),this.unSelectGridCell(n.attr("id")),this.$grid.attr("aria-activedescendant",o.attr("id")),this.selectGridCell(o.attr("id"));else switch(this.gridType){case 0:this.showDaysOfNextMonth(1);break;case 1:this.showMonthsOfNextYear(1);break;case 2:this.showYearsOfNextRange(1)}return t.stopPropagation(),!1;case this.keys.up:if(t.ctrlKey||t.shiftKey)return!0;a=null;if((r=i.index(n)-s)>=0)a=i.eq(r),this.unSelectGridCell(n.attr("id")),this.$grid.attr("aria-activedescendant",a.attr("id")),this.selectGridCell(a.attr("id"));else switch(r=s-1-i.index(n),this.gridType){case 0:this.showDaysOfPrevMonth(r);break;case 1:this.showMonthsOfPrevYear(r);break;case 2:this.showYearsOfPrevRange(r)}return t.stopPropagation(),!1;case this.keys.down:if(t.ctrlKey||t.shiftKey)return!0;var r;o=null;if((r=i.index(n)+s)<i.length)o=i.eq(r),this.unSelectGridCell(n.attr("id")),this.$grid.attr("aria-activedescendant",o.attr("id")),this.selectGridCell(o.attr("id"));else switch(r=s+1-(i.length-i.index(n)),this.gridType){case 0:this.showDaysOfNextMonth(r);break;case 1:this.showMonthsOfNextYear(r);break;case 2:this.showYearsOfNextRange(r)}return t.stopPropagation(),!1;case this.keys.pageup:var l=this.$grid.attr("aria-activedescendant");if(t.shiftKey)return!0;t.preventDefault();var c=!1;switch(this.gridType){case 0:t.ctrlKey?(t.stopImmediatePropagation(),c=this.showDaysOfPrevYear()):c=this.showDaysOfPrevMonth();break;case 1:c=this.showMonthsOfPrevYear();break;case 2:c=this.showYearsOfPrevRange()}if(c)if(null==e("#"+l).attr("id")){var d=i.eq(i.length-1);this.$grid.attr("aria-activedescendant",d.attr("id")),this.selectGridCell(d.attr("id"))}else this.selectGridCell(l);return t.stopPropagation(),!1;case this.keys.pagedown:l=this.$grid.attr("aria-activedescendant");if(t.shiftKey)return!0;t.preventDefault();c=!1;switch(this.gridType){case 0:t.ctrlKey?(t.stopImmediatePropagation(),c=this.showDaysOfNextYear()):c=this.showDaysOfNextMonth();break;case 1:c=this.showMonthsOfNextYear();break;case 2:c=this.showYearsOfNextRange()}if(c)if(null==e("#"+l).attr("id")){d=i.eq(i.length-1);this.$grid.attr("aria-activedescendant",d.attr("id")),this.selectGridCell(d.attr("id"))}else this.selectGridCell(l);return t.stopPropagation(),!1;case this.keys.home:if(t.ctrlKey||t.shiftKey)return!0;var u=i.eq(0);return this.unSelectGridCell(n.attr("id")),this.$grid.attr("aria-activedescendant",u.attr("id")),this.selectGridCell(u.attr("id")),t.stopPropagation(),!1;case this.keys.end:if(t.ctrlKey||t.shiftKey)return!0;d=i.eq(i.length-1);return this.unSelectGridCell(n.attr("id")),this.$grid.attr("aria-activedescendant",d.attr("id")),this.selectGridCell(d.attr("id")),t.stopPropagation(),!1}return!0},s.prototype.handleGridKeyPress=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:case this.keys.enter:case this.keys.space:case this.keys.esc:case this.keys.left:case this.keys.right:case this.keys.up:case this.keys.down:case this.keys.pageup:case this.keys.pagedown:case this.keys.home:case this.keys.end:return t.stopPropagation(),!1}return!0},s.prototype.handleGridClick=function(t,n){var i=e(t);if(i.is(".empty")||i.is(".unselectable"))return!0;switch(this.$grid.find(".focus").removeClass("focus").attr("aria-selected","false").attr("tabindex",-1),this.gridType){case 0:this.$grid.attr("aria-activedescendant",i.attr("id")),this.selectGridCell(i.attr("id")),this.update(),this.hide();break;case 1:this.showDaysOfMonth(parseInt(i.attr("data-value"),10));break;case 2:this.showMonthsOfYear(parseInt(i.attr("data-value"),10))}return n.stopPropagation(),!1},s.prototype.handleGridFocus=function(t){var n=this.$grid.attr("aria-activedescendant");if(null==e("#"+n).attr("id")){var i=this.$grid.find("td.selectable"),s=i.eq(i.length-1);this.$grid.attr("aria-activedescendant",s.attr("id")),this.selectGridCell(s.attr("id"))}else this.selectGridCell(n);return!0},s.prototype.handleGridBlur=function(t){return this.unSelectGridCell(this.$grid.attr("aria-activedescendant")),!0},s.prototype.handleTabOut=function(t){var n=e("body").find("input:visible,textarea:visible,select:visible"),i=n.index(this.$target);return i>-1&&i<n.length&&(t.shiftKey?i>0&&i--:i+1<n.length&&i++,n.eq(i).focus()),!0},s.prototype.changeGrid=function(t){switch(this.gridType){case 0:if(this.populateMonthsCalendar(),this.year!=this.curYear){var e=this.$grid.find("td.selectable");this.$grid.attr("aria-activedescendant",e.eq(0).attr("id"))}else this.$grid.attr("aria-activedescendant",this.$grid.find(".curMonth").attr("id"));this.selectGridCell(this.$grid.attr("aria-activedescendant"));break;case 2:t.shiftKey?this.year-=20:this.year+=20;case 1:if(this.populateYearsCalendar(),this.year!=this.curYear){e=this.$grid.find("td.selectable");this.$grid.attr("aria-activedescendant",e.eq(0).attr("id"))}else this.$grid.attr("aria-activedescendant",this.$grid.find(".curYear").attr("id"));this.selectGridCell(this.$grid.attr("aria-activedescendant"))}return!0},s.prototype.selectGridCell=function(t){e("#"+t).addClass("focus").attr("aria-selected","true").attr("tabindex",0).focus()},s.prototype.unSelectGridCell=function(t){e("#"+t).removeClass("focus").attr("aria-selected","false").attr("tabindex",-1)},s.prototype.update=function(){var t=e("#"+this.$grid.attr("aria-activedescendant")),n=new Date(this.year,this.month,parseInt(t.attr("data-value"),10)),i=this.formatDate(n,this.options.outputFormat);this.$target.val(i),this.$target.removeAttr("aria-invalid"),this.$target.parents(".form-group").removeClass("has-error"),this.$target.trigger("change"),this.options.onUpdate&&this.options.onUpdate(i)},s.prototype.hideObject=function(t){t.attr("aria-hidden",!0),t.hide()},s.prototype.showObject=function(t){t.attr("aria-hidden",!1),t.show()},s.prototype.show=function(){var n=this;if(e(".datepicker-calendar").trigger("ab.datepicker.opening",[n.id]),1==this.options.modal){e(document).bind("click mousedown mouseup",(function(t){return n.$grid.focus(),t.stopPropagation,!1})),this.greyOut(!0);var i=parseInt(e("#datepicker-overlay").css("z-index"),10)||40;this.$calendar.css("z-index",i+1)}else e(document).bind("click",e.proxy(this.handleDocumentClick,this)),this.$calendar.bind("ab.datepicker.opening",(function(t,e){e!=n.id?n.hide():n.$grid.focus()}));this.$calendar.bind("ab.datepicker.opened",(function(t,e){e==n.id&&n.$grid.focus()}));var s=Math.max(0,Math.floor(this.$group.offset().top-this.$label.offset().top)),a=Math.max(0,Math.floor(this.$group.offset().left-this.$label.offset().left)),o=parseInt(this.$calendar.parent().css("padding-left"),10),r=this.$calendar.outerHeight(),l=this.$group.offset().top,c=(this.$group.offset().left,this.$group.outerHeight(!0)),d=Math.floor(l-e(t).scrollTop()),u=Math.floor(e(t).height()-(l+c-e(t).scrollTop()));u<r&&u<d?(this.$calendar.addClass("above"),this.$calendar.css({top:s-r+"px",left:a+o+"px"})):(this.$calendar.addClass("below"),this.$calendar.css({top:c+s+"px",left:a+o+"px"})),this.$calendar.attr("aria-hidden","false"),this.$calendar.fadeIn(),e(".datepicker-calendar").trigger("ab.datepicker.opened",[n.id])},s.prototype.refresh=function(){switch(this.drawCalendarHeader(),this.gridType){case 0:this.populateDaysCalendar();break;case 1:this.populateMonthsCalendar();break;case 2:this.populateYearsCalendar()}},s.prototype.handleDocumentClick=function(t){return 0==e(t.target).parents("#datepicker-calendar-"+this.id).length?(this.hide(),!0):(this.$grid.focus(),t.stopPropagation,!1)},s.prototype.hide=function(t){if(0==this.options.inline){1==this.options.modal?(e(document).unbind("click mousedown mouseup"),this.greyOut(!1)):(e(document).unbind("click",this.handleDocumentClick),this.$calendar.unbind("ab.datepicker.opening")),this.$calendar.removeClass("above below"),this.$calendar.attr("aria-hidden","true"),this.$calendar.fadeOut(),e(".datepicker-calendar").trigger("ab.datepicker.closed",[this.id]),t||this.$target.focus()}},s.prototype.greyOut=function(t){var n=e("#datepicker-overlay");if(0==n.length&&t){e("body").append('<div id="datepicker-overlay" class="datepicker-overlay"></div>'),n=e("#datepicker-overlay");var i=0;e("*").each((function(){var t=parseInt(e(this).css("z-index"),10);isNaN(t)||(i=Math.max(i,t))})),n.attr("z-index",i+10)}t?n.fadeIn(500):n.fadeOut(500)},s.prototype.absolutePosition=function(e){var n=0,i=0;if(e.getBoundingClientRect){var s=e.getBoundingClientRect(),a=document.body,o=document.documentElement,r=t.pageYOffset||o.scrollTop||a.scrollTop,l=t.pageXOffset||o.scrollLeft||a.scrollLeft,c=o.clientTop||a.clientTop||0,d=o.clientLeft||a.clientLeft||0;n=Math.round(s.top+r-c),i=Math.round(s.left+l-d)}else for(;e;)n+=parseInt(e.offsetTop,10),i+=parseInt(e.offsetLeft,10),e=e.offsetParent;return{top:n,left:i}},s.prototype.getDaysInMonth=function(t,e){return 32-new Date(t,e,32).getDate()},s.prototype.previousMonth=function(t,e){return 0==e?(e=11,t--):e--,{year:t,month:e}},s.prototype.nextMonth=function(t,e){return 11==e?(e=0,t++):e++,{year:t,month:e}},s.prototype.formatDate=function(t,e){var n=function(t){return(t<0||t>9?"":"0")+t},i=function(t){var e=new Date(t.getTime());return e.setHours(0),t-e},s=t.getFullYear()+"",a=t.getMonth()+1,o=t.getDate(),r=function(t){var e=new Date(t.getFullYear(),0,0);return Math.floor((t-e)/864e5)}(t),l=t.getDay(),c=t.getHours(),d=t.getMinutes(),u=t.getSeconds(),h=function(t){var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+e.getDay()+1)/7)}(t),p=function(t){return Math.ceil((t.getDate()-1-t.getDay())/7)}(t),m=Math.floor(t.getDate()/7)+1,f=Math.ceil((t.getMonth()+1)/3),g=t.getFullYear()<1?0:1,y={y:""+s,yyyy:s,yy:s.substring(2,4),L:a,LL:n(a),LLL:this.locales.month_names_abbreviated[a-1],LLLL:this.locales.month_names[a-1],LLLLL:this.locales.month_names_narrow[a-1],M:a,MM:n(a),MMM:this.locales.month_names_abbreviated[a-1],MMMM:this.locales.month_names[a-1],MMMMM:this.locales.month_names_narrow[a-1],d:o,dd:n(o),D:r,DD:r,DDD:r,A:Math.round(i(t)*Math.pow(10,-2)),AA:Math.round(i(t)*Math.pow(10,-1)),AAA:Math.round(i(t)*Math.pow(10,0)),AAAA:Math.round(i(t)*Math.pow(10,1)),AAAAA:Math.round(i(t)*Math.pow(10,2)),AAAAAA:Math.round(i(t)*Math.pow(10,3)),E:this.locales.day_names_abbreviated[l],EE:this.locales.day_names_abbreviated[l],EEE:this.locales.day_names_abbreviated[l],EEEE:this.locales.day_names[l],EEEEE:this.locales.day_names_narrow[l],EEEEEE:this.locales.day_names_short[l],e:l,ee:l,eee:this.locales.day_names_abbreviated[l],eeee:this.locales.day_names[l],eeeee:this.locales.day_names_narrow[l],eeeeee:this.locales.day_names_short[l],c:l,cc:l,ccc:this.locales.day_names_abbreviated[l],cccc:this.locales.day_names[l],ccccc:this.locales.day_names_narrow[l],cccccc:this.locales.day_names_short[l],F:m,G:this.locales.era_names_abbreviated[g],GG:this.locales.era_names_abbreviated[g],GGG:this.locales.era_names_abbreviated[g],GGGG:this.locales.era_names[g],GGGGG:this.locales.era_names_narrow[g],Q:f,QQ:n(f),QQQ:this.locales.quarter_names_abbreviated[f-1],QQQQ:this.locales.quarter_names[f-1],QQQQQ:this.locales.quarter_names_narrow[f-1],q:f,qq:n(f),qqq:this.locales.quarter_names_abbreviated[f-1],qqqq:this.locales.quarter_names[f-1],qqqqq:this.locales.quarter_names_narrow[f-1],H:c,HH:n(c),h:0==c?12:c>12?c-12:c,hh:n(0==c?12:c>12?c-12:c),K:c>11?c-12:c,k:c+1,KK:n(c>11?c-12:c),kk:n(c+1),a:c>11?this.locales.day_periods.pm:this.locales.day_periods.am,m:d,mm:n(d),s:u,ss:n(u),w:h,ww:n(h),W:p};return e.replace(/('[^']+'|y{1,4}|L{1,5}|M{1,5}|c{1,6}|d{1,2}|D{1,3}|E{1,6}|e{1,6}|F{1,1}|G{1,5}|Q{1,5}|q{1,5}|H{1,2}|h{1,2}|K{1,2}|k{1,2}|m{1,2}|s{1,2}|w{1,2}|W{1,1}|A{1,6})/g,(function(t){return"'"===t.charAt(0)?t.substr(1,t.length-2):y[t]||t}))},s.prototype.createDateFromFormat=function(t,n){var i=function(t,e,n,i){for(var s=i;s>=n;s--){var a=t.substring(e,e+s);if(a.length<n)return null;if(/^\d+$/.test(a))return a}return null},s=function(t,e){for(var i=0;i<t.length;i++){var s=t[i];if(n.substring(e,e+s.length).toLowerCase()==s.toLowerCase())return s.length}return 0},a=0,o=new Date,r=o.getYear(),l=o.getMonth()+1,c=1,d=0,u=0,h=0,p="",m=this;if(e.each(t.match(/(.).*?\1*/g),(function(t,e){switch(e){case"yyyy":null!=(r=i(n,a,4,4))&&(a+=r.length);break;case"yy":null!=(r=i(n,a,2,2))&&(a+=r.length);break;case"y":null!=(r=i(n,a,2,4))&&(a+=r.length);break;case"MMM":case"LLL":l=0;for(var o=0;o<m.locales.month_names_abbreviated.length;o++){var f=m.locales.month_names_abbreviated[o];if(n.substring(a,a+f.length).toLowerCase()==f.toLowerCase()){l=o+1,a+=f.length;break}}break;case"MMMM":case"LLLL":l=0;for(o=0;o<m.locales.month_names.length;o++){f=m.locales.month_names[o];if(n.substring(a,a+f.length).toLowerCase()==f.toLowerCase()){l=o+1,a+=f.length;break}}break;case"EEE":case"EE":case"E":case"eee":a+=s(m.locales.day_names_abbreviated,a);break;case"EEEE":case"eeee":case"cccc":a+=s(m.locales.day_names,a);break;case"EEEEEE":case"eeeeee":case"cccccc":a+=s(m.locales.day_names_short,a);break;case"MM":case"M":case"LL":case"L":if(null==(l=i(n,a,e.length,2))||l<1||l>12)return null;a+=l.length;break;case"dd":case"d":if(null==(c=i(n,a,e.length,2))||c<1||c>31)return null;a+=c.length;break;case"hh":case"h":if(null==(d=i(n,a,e.length,2))||d<1||d>12)return null;a+=d.length;break;case"HH":case"H":if(null==(d=i(n,a,e.length,2))||d<0||d>23)return null;a+=d.length;break;case"KK":case"K":if(null==(d=i(n,a,e.length,2))||d<0||d>11)return null;a+=d.length;break;case"kk":case"k":if(null==(d=i(n,a,e.length,2))||d<1||d>24)return null;a+=d.length,d--;break;case"mm":case"m":if(null==(u=i(n,a,e.length,2))||u<0||u>59)return null;a+=u.length;break;case"ss":case"s":if(null==(h=i(n,a,e.length,2))||h<0||h>59)return null;a+=h.length;break;case"a":var g=m.locales.day_periods.am.length,y=m.locales.day_periods.pm.length;if(n.substring(a,a+g)==m.locales.day_periods.am)p="AM",a+=g;else{if(n.substring(a,a+y)!=m.locales.day_periods.pm)return null;p="PM",a+=y}break;default:if(n.substring(a,a+e.length)!=e)return null;a+=e.length}})),a!=n.length)return null;if(null==r)return null;if(2==r.length&&(r=r>50?r-0+1900:r-0+2e3),l<1||l>12)return null;if(2==l)if(r%4==0&&r%100!=0||r%400==0){if(c>29)return null}else if(c>28)return null;return(4==l||6==l||9==l||11==l)&&c>30?null:(d<12&&"PM"==p?d=d-0+12:d>11&&"AM"==p&&(d-=12),new Date(r,l-1,c,d,u,h))},s.prototype.parseDate=function(t){var n=null,i=this;return e.each(this.options.inputFormat,(function(e,s){if(null!=(n=i.createDateFromFormat(s,t)))return!1})),null==n&&(n=i.createDateFromFormat(this.options.outputFormat,t)),n},s.prototype.min=function(t){return null!=t&&(this.options.min=t instanceof Date?t:this.parseDate(t),null!=this.options.min&&this.dateObj<this.options.min&&(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=this.options.min),0!=this.options.inline&&this.refresh()),this.options.min},s.prototype.max=function(t){return null!=t&&(this.options.max=t instanceof Date?t:this.parseDate(t),null!=this.options.max&&this.dateObj>this.options.max&&(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=this.options.max),0!=this.options.inline&&this.refresh()),this.options.max},s.prototype.theme=function(t){return null!=t&&(this.$button.removeClass(this.options.theme),this.$calendar.removeClass(this.options.theme),this.options.theme=t,this.$button.addClass(this.options.theme),this.$calendar.addClass(this.options.theme)),this.options.theme},s.prototype.firstDayOfWeek=function(t){return null!=t&&(this.options.firstDayOfWeek=parseInt(t,10),0==this.options.inline?this.drawCalendarHeader():this.refresh()),this.options.firstDayOfWeek},s.prototype.daysOfWeekDisabled=function(t){if(null!=t){this.options.daysOfWeekDisabled=[],e.isArray(t)||(t=[t]);var n=this;e.each(t,(function(t,e){"number"==typeof e?n.options.daysOfWeekDisabled.push(e):"string"==typeof e&&n.options.daysOfWeekDisabled.push(parseInt(e,10))}))}return this.options.daysOfWeekDisabled},s.prototype.weekDayFormat=function(t){return null!=t&&(this.options.weekDayFormat=t,this.drawCalendarHeader()),this.options.weekDayFormat},s.prototype.inputFormat=function(t){return null!=t&&(e.isArray(t)||(t=[t]),this.$target.attr("placeholder")==this.options.inputFormat[0]&&this.$target.attr("placeholder",t[0]),this.options.inputFormat=t),this.options.inputFormat},s.prototype.outputFormat=function(t){return null!=t&&(this.options.outputFormat=t),this.options.outputFormat},s.prototype.modal=function(t){if(null!=t)if(this.options.modal=t,1==this.options.modal){0==this.options.inline&&(this.showObject(this.$calendar.find(".datepicker-close-wrap")),this.showObject(this.$calendar.find(".datepicker-bn-close-label"))),this.$close=this.$calendar.find(".datepicker-close"),this.$close.html(this.options.closeButtonTitle).attr("title",this.options.closeButtonLabel),this.$calendar.find(".datepicker-bn-close-label").html(this.options.closeButtonLabel);var e=this;this.$close.click((function(t){return e.handleCloseClick(t)})),this.$close.keydown((function(t){return e.handleCloseKeyDown(t)}))}else this.hideObject(this.$calendar.find(".datepicker-close-wrap")),this.hideObject(this.$calendar.find(".datepicker-bn-close-label"));return this.options.modal},s.prototype.inline=function(t){null!=t&&(0!=t?(this.hideObject(this.$button),this.hideObject(this.$calendar.find(".datepicker-close-wrap")),this.hideObject(this.$calendar.find(".datepicker-bn-close-label")),("string"==typeof t?e("#"+t):t).append(this.$calendar),this.$calendar.css({position:"relative",left:"0px",top:"0px"}),this.options.inline=t,this.initializeDate(),this.showObject(this.$calendar)):(this.$target.parent().after(this.$calendar),this.showObject(this.$button),1==this.options.modal&&(this.showObject(this.$calendar.find(".datepicker-close-wrap")),this.showObject(this.$calendar.find(".datepicker-bn-close-label"))),"static"===this.$calendar.parent().css("position")&&this.$calendar.parent().css("position","relative"),this.$calendar.css({position:"absolute"}),this.options.inline=t,this.hide()));return this.options.inline},s.prototype.format=function(t){return this.formatDate(t,this.options.outputFormat)},s.prototype.setLocales=function(t){this.locales=t,this.options.inputFormat=[this.locales.short_format],this.options.outputFormat=this.locales.short_format,this.options.titleFormat=this.locales.full_format,this.options.firstDayOfWeek=this.locales.firstday_of_week,this.options.buttonTitle=this.locales.texts.buttonTitle,this.$button.find("span").attr("title",this.options.buttonTitle),this.options.buttonLabel=this.locales.texts.buttonLabel,this.options.prevButtonLabel=this.locales.texts.prevButtonLabel,this.options.prevMonthButtonLabel=this.locales.texts.prevMonthButtonLabel,this.options.prevYearButtonLabel=this.locales.texts.prevYearButtonLabel,this.options.nextButtonLabel=this.locales.texts.nextButtonLabel,this.options.nextMonthButtonLabel=this.locales.texts.nextMonthButtonLabel,this.options.nextYearButtonLabel=this.locales.texts.nextYearButtonLabel,this.options.changeMonthButtonLabel=this.locales.texts.changeMonthButtonLabel,this.options.changeYearButtonLabel=this.locales.texts.changeYearButtonLabel,this.options.changeRangeButtonLabel=this.locales.texts.changeRangeButtonLabel,this.options.closeButtonTitle=this.locales.texts.closeButtonTitle,this.options.closeButtonLabel=this.locales.texts.closeButtonLabel,this.options.calendarHelp=this.locales.texts.calendarHelp,this.drawCalendarHeader(),"RTL"===this.locales.directionality?this.$grid.addClass("rtl"):this.$grid.removeClass("rtl")};var a=e.fn.datepicker;e.fn.datepicker=function(t,n){if("string"!=typeof t||1!=e(this).length)return this.each((function(){var i=e(this),a=i.data("ab.datepicker"),o=e.extend({},s.DEFAULTS,i.data(),"object"==typeof t&&t);a||i.data("ab.datepicker",a=new s(this,o)),"string"==typeof t&&a[t](n)}));var i=e(this).eq(0).data("ab.datepicker");return i?i[t](n):void 0},e.fn.datepicker.Constructor=s,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=a,this}}(window,i)},95433:(t,e,n)=>{var i=n(19755);!function(t,e){function n(t,e,n){var i=t+":",s=document.createElement("test").style;return s.cssText=n?i+e:i+["-webkit-","-moz-","-ms-","-o-",""].join(e+";"+i)+e+";",-1!==s[t].indexOf(e)}function i(t){return parseInt(t,10)||0}var s=0,a={classes:{plugin:"fixedsticky",active:"fixedsticky-on",inactive:"fixedsticky-off",clone:"fixedsticky-dummy",withoutFixedFixed:"fixedsticky-withoutfixedfixed"},keys:{offset:"fixedStickyOffset",position:"fixedStickyPosition",id:"fixedStickyId"},tests:{sticky:n("position","sticky"),fixed:n("position","fixed",!0)},getScrollTop:function(){var e="pageYOffset",n="scrollTop";return t?e in t?t[e]:t.document.documentElement[n]:t.document.body[n]},bypass:function(){return a.tests.sticky&&!a.optOut||!a.tests.fixed||t.FixedFixed&&!e(t.document.documentElement).hasClass("fixed-supported")},update:function(t){if(t.offsetWidth){var n,s,o,r,l=e(t),c=l.outerHeight(),d=l.data(a.keys.offset),u=a.getScrollTop(),h=l.is("."+a.classes.active),p=function(t){l[t?"addClass":"removeClass"](a.classes.active)[t?"removeClass":"addClass"](a.classes.inactive)},m=e(window).height(),f=l.data(a.keys.position),g=l.parent(),y=g.offset().top,v=g.outerHeight();void 0===d?(d=l.offset().top,l.data(a.keys.offset,d),l.after(e("<div>").addClass(a.classes.clone).height(c))):l.next("."+a.classes.clone).height(c),f||((n="auto"!==l.css("top")||"auto"!==l.css("bottom"))||l.css("position","fixed"),f={top:"auto"!==l.css("top"),bottom:"auto"!==l.css("bottom")},n||l.css("position",""),l.data(a.keys.position,f)),s=i(l.css("top")),o=i(l.css("bottom")),f.top&&(d<(r=u+s)&&r+c<=y+v)||f.bottom&&d+(c||0)>u+m-o&&u+m-o>=y+(c||0)?h||p(!0):h&&p(!1)}},destroy:function(n){var i=e(n);return a.bypass()?i:i.each((function(){var n=e(this),i=n.data(a.keys.id);e(t).unbind(".fixedsticky"+i),n.removeData([a.keys.offset,a.keys.position,a.keys.id]).removeClass(a.classes.active).removeClass(a.classes.inactive).next("."+a.classes.clone).remove()}))},init:function(n){var i=e(n);return a.bypass()?i:i.each((function(){var n=this,o=s++;e(this).data(a.keys.id,o),e(t).bind("scroll.fixedsticky"+o,(function(){a.update(n)})).trigger("scroll.fixedsticky"+o),e(t).bind("resize.fixedsticky"+o,(function(){i.is("."+a.classes.active)&&a.update(n)}))}))}};t.FixedSticky=a,e.fn.fixedsticky=function(t){if("function"==typeof a[t])return a[t].call(a,this);if("object"!=typeof t&&t)throw new Error("Method `"+t+"` does not exist on jQuery.fixedsticky");return a.init.call(a,this)},t.FixedFixed||e(t.document.documentElement).addClass(a.classes.withoutFixedFixed)}(window,i)},15525:()=>{}},s={};function a(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={id:t,loaded:!1,exports:{}};return i[t].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=i,a.amdD=function(){throw new Error("define cannot be used indirect")},t=[],a.O=(e,n,i,s)=>{if(!n){var o=1/0;for(d=0;d<t.length;d++){for(var[n,i,s]=t[d],r=!0,l=0;l<n.length;l++)(!1&s||o>=s)&&Object.keys(a.O).every((t=>a.O[t](n[l])))?n.splice(l--,1):(r=!1,s<o&&(o=s));if(r){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[n,i,s]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"==typeof t&&t){if(4&i&&t.__esModule)return t;if(16&i&&"function"==typeof t.then)return t}var s=Object.create(null);a.r(s);var o={};e=e||[null,n({}),n([]),n(n)];for(var r=2&i&&t;"object"==typeof r&&!~e.indexOf(r);r=n(r))Object.getOwnPropertyNames(r).forEach((e=>o[e]=()=>t[e]));return o.default=()=>t,a.d(s,o),s},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.e=()=>Promise.resolve(),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),a.j=143,(()=>{var t={143:0};a.O.j=e=>0===t[e];var e=(e,n)=>{var i,s,[o,r,l]=n,c=0;if(o.some((e=>0!==t[e]))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var d=l(a)}for(e&&e(n);c<o.length;c++)s=o[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},n=globalThis.webpackChunksite_dotcom=globalThis.webpackChunksite_dotcom||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var o=a.O(void 0,[216,514],(()=>a(49035)));o=a.O(o)})();
//# sourceMappingURL=./app.js-8c008bcc2d055e35e14ea66b30d2c371.map