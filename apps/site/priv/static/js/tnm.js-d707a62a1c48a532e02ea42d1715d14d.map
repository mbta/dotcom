{"version":3,"file":"./tnm-728833fff215cf5f34d71f1b65ded9b5.js","mappings":"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","sources":["webpack://site-dotcom/webpack/runtime/chunk loaded","webpack://site-dotcom/webpack/runtime/create fake namespace object","webpack://site-dotcom/./ts/components/Alerts.tsx","webpack://site-dotcom/./ts/components/Direction.tsx","webpack://site-dotcom/./ts/components/FilterButton.tsx","webpack://site-dotcom/./ts/components/Headsign.tsx","webpack://site-dotcom/./ts/components/ModeFilter.tsx","webpack://site-dotcom/./ts/components/RouteCardHeader.tsx","webpack://site-dotcom/./ts/components/StopCard.tsx","webpack://site-dotcom/./ts/helpers/css.ts","webpack://site-dotcom/./ts/helpers/date.ts","webpack://site-dotcom/./ts/helpers/debounce.ts","webpack://site-dotcom/./ts/helpers/fetch-json.ts","webpack://site-dotcom/./ts/helpers/icon.tsx","webpack://site-dotcom/./ts/helpers/keyboard-events-react.ts","webpack://site-dotcom/./ts/helpers/media-breakpoints-react.ts","webpack://site-dotcom/./ts/helpers/media-breakpoints.ts","webpack://site-dotcom/./ts/helpers/prediction-helpers.tsx","webpack://site-dotcom/./ts/helpers/query.ts","webpack://site-dotcom/./ts/helpers/render-fa.tsx","webpack://site-dotcom/./ts/helpers/render-svg.tsx","webpack://site-dotcom/./ts/helpers/routes.ts","webpack://site-dotcom/./ts/helpers/text.ts","webpack://site-dotcom/./ts/leaflet/bounds.ts","webpack://site-dotcom/./ts/leaflet/components/Map.tsx","webpack://site-dotcom/./ts/leaflet/components/MapTooltip.tsx","webpack://site-dotcom/./ts/leaflet/icon.ts","webpack://site-dotcom/./ts/leaflet/state.ts","webpack://site-dotcom/./ts/models/alert.ts","webpack://site-dotcom/./ts/models/prediction.ts","webpack://site-dotcom/./ts/models/route.ts","webpack://site-dotcom/./ts/stop/components/StopAccessibilityIcon.tsx","webpack://site-dotcom/./ts/stop/components/StopCard.tsx","webpack://site-dotcom/./ts/stop/state.ts","webpack://site-dotcom/./ts/tnm/components/ModeFilterContainer.tsx","webpack://site-dotcom/./ts/tnm/components/ModeIcon.tsx","webpack://site-dotcom/./ts/tnm/components/RouteCard.tsx","webpack://site-dotcom/./ts/tnm/components/RouteSidebarPills.tsx","webpack://site-dotcom/./ts/tnm/components/RoutesSidebar.tsx","webpack://site-dotcom/./ts/tnm/components/SidebarTitle.tsx","webpack://site-dotcom/./ts/tnm/components/StopWithRoutesCard.tsx","webpack://site-dotcom/./ts/tnm/components/StopsSidebar.tsx","webpack://site-dotcom/./ts/tnm/components/TransitNearMe.tsx","webpack://site-dotcom/./ts/tnm/components/leaflet/MapWrapper.tsx","webpack://site-dotcom/./ts/tnm/components/leaflet/MarkerWrapper.tsx","webpack://site-dotcom/./ts/tnm/components/leaflet/TransitNearMeMap.tsx","webpack://site-dotcom/./ts/tnm/helpers/process-realtime-data.ts","webpack://site-dotcom/./ts/tnm/helpers/stop-includes-modes.ts","webpack://site-dotcom/./ts/tnm/search.ts","webpack://site-dotcom/./ts/tnm/state.ts","webpack://site-dotcom/./ts/tnm/transit-near-me-loader.tsx","webpack://site-dotcom/./ts/transit-near-me-entry.ts","webpack://site-dotcom/./js/algolia-autocomplete-with-geo.js","webpack://site-dotcom/./js/algolia-autocomplete.js","webpack://site-dotcom/./js/algolia-result.js","webpack://site-dotcom/./js/algolia-search.js","webpack://site-dotcom/./js/geolocation-promise.js","webpack://site-dotcom/./js/google-maps-helpers.js","webpack://site-dotcom/./js/google-maps-loaded.js","webpack://site-dotcom/./js/icons.js","webpack://site-dotcom/./js/trip-planner-location-controls.js","webpack://site-dotcom/./static/images/icon-accessible-small.svg","webpack://site-dotcom/./static/images/icon-alerts-triangle.svg","webpack://site-dotcom/./static/images/icon-bike.svg","webpack://site-dotcom/./static/images/icon-blue-line-default.svg","webpack://site-dotcom/./static/images/icon-blue-line-small.svg","webpack://site-dotcom/./static/images/icon-cancelled-default.svg","webpack://site-dotcom/./static/images/icon-circle-t-small.svg","webpack://site-dotcom/./static/images/icon-crowding.svg","webpack://site-dotcom/./static/images/icon-elevator.svg","webpack://site-dotcom/./static/images/icon-escalator.svg","webpack://site-dotcom/./static/images/icon-fares.svg","webpack://site-dotcom/./static/images/icon-green-line-b-small.svg","webpack://site-dotcom/./static/images/icon-green-line-c-small.svg","webpack://site-dotcom/./static/images/icon-green-line-d-small.svg","webpack://site-dotcom/./static/images/icon-green-line-e-small.svg","webpack://site-dotcom/./static/images/icon-green-line-small.svg","webpack://site-dotcom/./static/images/icon-mattapan-line-small.svg","webpack://site-dotcom/./static/images/icon-mode-bus-small.svg","webpack://site-dotcom/./static/images/icon-mode-commuter-rail-small.svg","webpack://site-dotcom/./static/images/icon-mode-ferry-small.svg","webpack://site-dotcom/./static/images/icon-mode-subway-default.svg","webpack://site-dotcom/./static/images/icon-mode-subway-small.svg","webpack://site-dotcom/./static/images/icon-orange-line-small.svg","webpack://site-dotcom/./static/images/icon-red-line-small.svg","webpack://site-dotcom/./static/images/icon-search-reverse-default.svg","webpack://site-dotcom/./static/images/icon-shuttle-default.svg","webpack://site-dotcom/./static/images/icon-silver-line-small.svg","webpack://site-dotcom/./static/images/icon-snow-default.svg","webpack://site-dotcom/./static/images/icon-vehicle-bordered-expanded.svg","webpack://site-dotcom/webpack/bootstrap","webpack://site-dotcom/webpack/runtime/amd define","webpack://site-dotcom/webpack/runtime/compat get default export","webpack://site-dotcom/webpack/runtime/define property getters","webpack://site-dotcom/webpack/runtime/global","webpack://site-dotcom/webpack/runtime/harmony module decorator","webpack://site-dotcom/webpack/runtime/hasOwnProperty shorthand","webpack://site-dotcom/webpack/runtime/make namespace object","webpack://site-dotcom/webpack/runtime/node module decorator","webpack://site-dotcom/webpack/runtime/runtimeId","webpack://site-dotcom/webpack/runtime/jsonp chunk loading","webpack://site-dotcom/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","import React, { ReactElement, useState } from \"react\";\nimport { Alert as AlertType, Lifecycle } from \"../__v3api\";\nimport { handleReactEnterKeyPress } from \"../helpers/keyboard-events-react\";\nimport { caret } from \"../helpers/icon\";\nimport renderSVG from \"../helpers/render-svg\";\nimport shuttleIcon from \"../../static/images/icon-shuttle-default.svg\";\nimport cancelIcon from \"../../static/images/icon-cancelled-default.svg\";\nimport snowIcon from \"../../static/images/icon-snow-default.svg\";\nimport alertIcon from \"../../static/images/icon-alerts-triangle.svg\";\n\ninterface Props {\n  alerts: AlertType[];\n}\n\nconst alertClassNames = (\n  { priority, description }: AlertType,\n  expanded: boolean\n): string => {\n  const classNames = `c-alert-item c-alert-item--${priority}`;\n  if (description) {\n    if (expanded) {\n      return `${classNames} c-alert-item--expandable c-alert-item--open`;\n    }\n    return `${classNames} c-alert-item--expandable c-alert-item--closed`;\n  }\n  return classNames;\n};\n\nexport const iconForAlert = ({\n  priority,\n  effect\n}: AlertType): ReactElement<HTMLElement> | null => {\n  if (priority === \"low\") return null;\n  if (priority === \"system\")\n    return renderSVG(\"c-svg__icon-alerts-triangle\", alertIcon);\n  switch (effect) {\n    case \"suspension\":\n    case \"cancellation\":\n      return renderSVG(\"c-svg__icon-cancelled-default\", cancelIcon);\n    case \"snow_route\":\n      return renderSVG(\"c-svg__icon-snow-default\", snowIcon);\n    case \"shuttle\":\n      return renderSVG(\"c-svg__icon-shuttle-default\", shuttleIcon);\n    default:\n      return renderSVG(\"c-svg__icon-alerts-triangle\", alertIcon);\n  }\n};\n\nconst humanLifecycle = (lifecycle: Lifecycle): string | null => {\n  switch (lifecycle) {\n    case \"new\":\n    case \"unknown\":\n      return null;\n    case \"upcoming\":\n    case \"ongoing_upcoming\":\n      return \"Upcoming\";\n    case \"ongoing\":\n      return \"Ongoing\";\n    default:\n      return null;\n  }\n};\n\nexport const humanLabelForAlert = ({\n  effect,\n  severity,\n  lifecycle\n}: AlertType): string | null => {\n  if (effect === \"delay\") {\n    switch (severity) {\n      case 0:\n      case 1:\n      case 2:\n        return null;\n      case 3:\n        return \"up to 10 minutes\";\n      case 4:\n        return \"up to 15 minutes\";\n      case 5:\n        return \"up to 20 minutes\";\n      case 6:\n        return \"up to 25 minutes\";\n      case 7:\n        return \"up to 30 minutes\";\n      case 8:\n        return \"30+ minutes\";\n      case 9:\n        return \"more than an hour\";\n      default:\n        return humanLifecycle(lifecycle);\n    }\n  }\n  return humanLifecycle(lifecycle);\n};\n\nexport const alertLabel = (alert: AlertType): ReactElement<HTMLElement> => {\n  const alertClasses = [\"u-small-caps\", \"c-alert-item__badge\"];\n  if (alert.priority === \"system\") {\n    alertClasses.push(\"c-alert-item__badge--system\");\n  }\n  if (\n    alert.lifecycle === \"upcoming\" ||\n    alert.lifecycle === \"ongoing_upcoming\"\n  ) {\n    alertClasses.push(\"c-alert-item__badge--upcoming\");\n  }\n  return (\n    <span className={alertClasses.join(\" \")}>{humanLabelForAlert(alert)}</span>\n  );\n};\n\nexport const effectNameForAlert = (alert: AlertType): string =>\n  alert.effect\n    .split(\"_\")\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(\" \");\n\nconst caretIcon = (\n  noDescription: boolean,\n  expanded: boolean\n): ReactElement<HTMLElement> | null => {\n  if (noDescription) return null;\n  return caret(\"c-expandable-block__header-caret--black\", expanded);\n};\n\nconst alertDescription = (alert: AlertType): ReactElement<HTMLElement> => (\n  <div\n    className={`c-alert-item__bottom c-alert-item__buttom--${alert.priority}`}\n    // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n    tabIndex={0}\n    role=\"region\"\n    aria-labelledby={`alert-${alert.id}`}\n    ref={panel => panel && panel.focus()}\n  >\n    <div className=\"c-alert-item__description\">\n      <div\n        // eslint-disable-next-line react/no-danger\n        dangerouslySetInnerHTML={{\n          __html: alert.description\n        }}\n      />\n      <div className=\"c-alert-item__updated\">{alert.updated_at}</div>\n    </div>\n  </div>\n);\n\nexport const Alert = ({\n  alert\n}: {\n  alert: AlertType;\n}): ReactElement<HTMLElement> => {\n  const [expanded, toggleExpanded] = useState(false);\n  const onClick = (): void => toggleExpanded(!expanded);\n\n  const alertUrl = alert.url ? alert.url : \"\";\n\n  // remove [http:// | https:// | www.] from alert URL:\n  let strippedAlertUrl = alertUrl.replace(/(https?:\\/\\/)?(www\\.)?/i, \"\");\n\n  // capitalize 'mbta' (special case):\n  strippedAlertUrl = strippedAlertUrl.replace(/mbta/gi, \"MBTA\");\n\n  const headerContent = alert.url\n    ? `${alert.header}<span>&nbsp;</span><a href=\"${alert.url}\" target=\"_blank\">${strippedAlertUrl}</a>`\n    : alert.header;\n\n  return (\n    <li\n      id={`alert-${alert.id}`}\n      tabIndex={0}\n      className={alertClassNames(alert, expanded)}\n      onClick={onClick}\n      onKeyPress={e => handleReactEnterKeyPress(e, onClick)}\n      aria-expanded={expanded}\n      // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n      role=\"button\"\n    >\n      <div className=\"c-alert-item__icon\">{iconForAlert(alert)}</div>\n      <div className=\"c-alert-item__top\">\n        <div className=\"c-alert-item__top-text-container\">\n          <div className=\"c-alert-item__effect\">\n            {`${effectNameForAlert(alert)} `}\n            {humanLabelForAlert(alert) ? alertLabel(alert) : null}\n          </div>\n          {/* eslint-disable-next-line react/no-danger */}\n          <div dangerouslySetInnerHTML={{ __html: headerContent }} />\n        </div>\n        {alert.description && (\n          <div className=\"c-alert-item__top-caret-container\">\n            {caretIcon(alert.description === \"\", expanded)}\n          </div>\n        )}\n      </div>\n      {expanded && alert.description ? alertDescription(alert) : null}\n      {/* No javascript support */}\n      {alert.description ? (\n        <noscript>{alertDescription(alert)}</noscript>\n      ) : null}\n    </li>\n  );\n};\n\nconst Alerts = ({ alerts }: Props): ReactElement<HTMLElement> => (\n  <div className=\"container\">\n    <div className=\"page-section\">\n      <ul className=\"c-alert-group\">\n        {alerts.map((alert: AlertType) => (\n          <Alert key={alert.id} alert={alert} />\n        ))}\n      </ul>\n    </div>\n  </div>\n);\n\nexport default Alerts;\n","import React, { ReactElement } from \"react\";\nimport Headsign from \"./Headsign\";\nimport { Direction as DirectionType, EnhancedRoute } from \"../__v3api\";\n\ninterface Props {\n  direction: DirectionType;\n  route: EnhancedRoute;\n}\n\nexport const directionIsEmpty = (dir: DirectionType): boolean =>\n  dir.headsigns.length === 0;\n\nexport const Direction = ({\n  direction,\n  route\n}: Props): ReactElement<HTMLElement> | null => {\n  if (directionIsEmpty(direction)) {\n    return null;\n  }\n\n  const condensed = direction.headsigns.length === 1;\n\n  const hideDirectionDestination =\n    condensed || route.type === 0 || route.type === 1 || route.type === 2;\n\n  return (\n    <div className=\"m-tnm-sidebar__direction\">\n      <div className=\"m-tnm-sidebar__direction-name u-small-caps\">\n        {route.direction_names[direction.direction_id]}\n      </div>\n      {!hideDirectionDestination && (\n        <div className=\"m-tnm-sidebar__direction-destination\">\n          {route.direction_destinations[direction.direction_id]}\n        </div>\n      )}\n      <div className=\"m-tnm-sidebar__direction-headsigns\">\n        {direction.headsigns.map(headsign => (\n          <Headsign\n            key={headsign.name}\n            headsign={headsign}\n            routeType={route.type}\n            condensed={condensed}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Direction;\n","import React, { ReactElement } from \"react\";\n\ntype IsSelectedFunction<T> = (identifier: T) => boolean;\n\ninterface Props<T> {\n  identifier: T;\n  icon: ReactElement<HTMLElement> | string | null;\n  name: string;\n  isSelected: IsSelectedFunction<T>;\n  onClick: (identifier: T) => () => void;\n}\n\n// The second, dummy type parameter below works around a quirk of using\n// generics in TSX files. In a TSX file, if you have a single type parameter\n// in angle brackets like <TypeName>, the compiler will try to interpret that\n// as an opening \"TypeName\" TSX tag. The dummy type parameter keeps the compiler\n// from trying to interpret the type params as a tag.\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst FilterButton = <T, _>({\n  identifier,\n  icon,\n  name,\n  isSelected,\n  onClick\n}: Props<T>): ReactElement<HTMLElement> => (\n  <button\n    className={`btn btn-secondary btn-sm m-tnm-sidebar__filter-btn ${\n      isSelected(identifier) ? \"active\" : \"inactive\"\n    }`}\n    id={`mode-button__${identifier}`}\n    onClick={onClick(identifier)}\n    type=\"button\"\n    aria-label={\n      isSelected(identifier)\n        ? `remove filter by ${identifier}`\n        : `add filter by ${identifier}`\n    }\n  >\n    {icon}\n    {name}\n  </button>\n);\n\nexport default FilterButton;\n","import React, { ReactElement } from \"react\";\nimport { RouteType, PredictedOrScheduledTime, Headsign } from \"../__v3api\";\nimport {\n  timeForCommuterRail,\n  statusForCommuterRail,\n  trackForCommuterRail\n} from \"../helpers/prediction-helpers\";\n\ninterface Props {\n  headsign: Headsign;\n  routeType: RouteType;\n  condensed: boolean;\n}\n\nconst headsignClass = (condensed: boolean): string => {\n  if (condensed === true) {\n    return \"m-tnm-sidebar__headsign-schedule m-tnm-sidebar__headsign-schedule--condensed\";\n  }\n  return \"m-tnm-sidebar__headsign-schedule\";\n};\n\nconst renderHeadsignName = ({\n  headsign,\n  routeType,\n  condensed\n}: Props): ReactElement<HTMLElement> => {\n  const modifier = !condensed && routeType === 3 ? \"small\" : \"large\";\n\n  const headsignNameClass = `m-tnm-sidebar__headsign-name m-tnm-sidebar__headsign-name--${modifier}`;\n\n  const headsignName = headsign.headsign || headsign.name;\n  if (headsignName && headsignName.includes(\" via \")) {\n    const split = headsignName.split(\" via \");\n    return (\n      <>\n        <div className={headsignNameClass}>{split[0]}</div>\n        <div className=\"m-tnm-sidebar__via\">{`via ${split[1]}`}</div>\n      </>\n    );\n  }\n  return <div className={headsignNameClass}>{headsignName}</div>;\n};\n\nconst renderTrainName = (trainName: string): ReactElement<HTMLElement> => (\n  <div className=\"m-tnm-sidebar__headsign-train\">{trainName}</div>\n);\n\nconst renderTimeCommuterRail = (\n  data: PredictedOrScheduledTime,\n  modifier: string\n): ReactElement<HTMLElement> => {\n  const status = statusForCommuterRail(data) || \"\";\n  return (\n    <div\n      className={`m-tnm-sidebar__time m-tnm-sidebar__time--commuter-rail ${modifier} ${\n        status === \"Scheduled\" ? \"text-muted\" : \"\"\n      }`}\n    >\n      {timeForCommuterRail(\n        data,\n        `${\n          status === \"Canceled\" ? \"strikethrough\" : \"\"\n        } m-tnm-sidebar__time-number`\n      )}\n      <div className=\"m-tnm-sidebar__status\">\n        {`${status}${trackForCommuterRail(data)}`}\n      </div>\n    </div>\n  );\n};\n\nconst renderTimeDefault = (\n  time: string[],\n  modifier: string\n): ReactElement<HTMLElement> => (\n  <div className={`m-tnm-sidebar__time ${modifier}`}>\n    <div className=\"m-tnm-sidebar__time-number\">{time[0]}</div>\n    <div className=\"m-tnm-sidebar__time-mins\">{time[2]}</div>\n  </div>\n);\n\nconst renderTime = (\n  tnmTime: PredictedOrScheduledTime,\n  headsignName: string,\n  routeType: RouteType,\n  idx: number\n): ReactElement<HTMLElement> => {\n  // eslint-disable-next-line camelcase\n  const { prediction, scheduled_time } = tnmTime;\n  // eslint-disable-next-line camelcase\n  const time = prediction ? prediction.time : scheduled_time!;\n\n  const classModifier =\n    !prediction && [0, 1, 3].includes(routeType)\n      ? \"m-tnm-sidebar__time--schedule\"\n      : \"\";\n\n  return (\n    <div\n      // eslint-disable-next-line camelcase\n      key={`${headsignName}-${idx}`}\n      className=\"m-tnm-sidebar__schedule\"\n    >\n      {routeType === 2\n        ? renderTimeCommuterRail(tnmTime, classModifier)\n        : renderTimeDefault(time, classModifier)}\n    </div>\n  );\n};\n\nconst HeadsignComponent = (props: Props): ReactElement<HTMLElement> => {\n  const { headsign, routeType, condensed } = props;\n  const { times } = headsign;\n  if (times.length === 2) {\n    const first = times[0].prediction?.time?.[0];\n    const second = times[1].prediction?.time?.[0];\n    const firstMeridiem = times[0].prediction?.time?.[2] ?? \"\";\n    const secondMeridiem = times[1].prediction?.time?.[2] ?? \"\";\n    const isMinutes = times[0].prediction?.time?.[2] === \"min\";\n    // time could be in minutes, hh:mm, or simply \"arriving\"\n    if (first !== undefined && second !== undefined) {\n      if (isMinutes) {\n        if (parseInt(first, 10) > parseInt(second, 10)) {\n          headsign.times = headsign.times.reverse();\n        }\n      } else if (\n        (Date.parse(first.concat(firstMeridiem)) >\n          Date.parse(second.concat(secondMeridiem)) &&\n          first !== \"arriving\") ||\n        second === \"arriving\"\n      ) {\n        headsign.times.reverse();\n      }\n    }\n  }\n  return (\n    <div className={headsignClass(condensed)}>\n      <div className=\"m-tnm-sidebar__headsign\">\n        {renderHeadsignName(props)}\n\n        {routeType === 2 && renderTrainName(`Train ${headsign.train_number}`)}\n      </div>\n      <div className=\"m-tnm-sidebar__schedules\">\n        {headsign.times.map((time, idx) => {\n          if (routeType === 2 && idx > 0) return null; // limit to 1 headsign\n          return renderTime(time, headsign.name, routeType, idx);\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default HeadsignComponent;\n","import React, { ReactElement } from \"react\";\nimport { Mode } from \"../__v3api\";\nimport FilterButton from \"./FilterButton\";\nimport ModeIcon from \"../tnm/components/ModeIcon\";\n\ntype IsModeSelectedFunction = (mode: Mode) => boolean;\n\ninterface Props {\n  isModeSelected: IsModeSelectedFunction;\n  onModeClickAction: (mode: Mode) => void;\n  modeButtonsToShow?: string[];\n}\n\ninterface ModeButtonProps {\n  mode: Mode;\n  icon: string;\n  name: string;\n  isModeSelected: IsModeSelectedFunction;\n  onClick: (mode: Mode) => () => void;\n}\n\ninterface ModeByV3ModeType {\n  [s: number]: Mode;\n}\n\nexport const modeByV3ModeType: ModeByV3ModeType = {\n  0: \"subway\",\n  1: \"subway\",\n  2: \"commuter_rail\",\n  3: \"bus\"\n};\n\nconst ModeButton = ({\n  mode,\n  icon,\n  name,\n  isModeSelected,\n  onClick\n}: ModeButtonProps): ReactElement<HTMLElement> => (\n  <FilterButton\n    identifier={mode}\n    icon={<ModeIcon type={icon} />}\n    name={name}\n    isSelected={isModeSelected}\n    onClick={onClick}\n  />\n);\n\nconst shouldShowModeButton = (\n  mode: string,\n  modeButtonsToShow?: string[]\n): boolean => {\n  if (modeButtonsToShow) {\n    return modeButtonsToShow.includes(mode);\n  }\n\n  // By default, show all available modes except ferry.\n\n  if (mode === \"ferry\") {\n    return false;\n  }\n  return true;\n};\n\nexport const ModeFilter = ({\n  isModeSelected,\n  onModeClickAction,\n  modeButtonsToShow\n}: Props): ReactElement<HTMLElement> => (\n  <div className=\"m-tnm-sidebar__filter-bar\">\n    <span className=\"m-tnm-sidebar__filter-header u-small-caps\">Filter</span>\n\n    <div className=\"c-mode-filter__filter-btn-group\">\n      {shouldShowModeButton(\"subway\", modeButtonsToShow) && (\n        <ModeButton\n          mode=\"subway\"\n          icon=\"subway\"\n          name=\"Subway\"\n          isModeSelected={isModeSelected}\n          onClick={mode => () => onModeClickAction(mode)}\n        />\n      )}\n      {shouldShowModeButton(\"bus\", modeButtonsToShow) && (\n        <ModeButton\n          mode=\"bus\"\n          icon=\"bus\"\n          name=\"Bus\"\n          isModeSelected={isModeSelected}\n          onClick={mode => () => onModeClickAction(mode)}\n        />\n      )}\n    </div>\n\n    <div className=\"c-mode-filter__filter-btn-group\">\n      {shouldShowModeButton(\"commuter_rail\", modeButtonsToShow) && (\n        <ModeButton\n          mode=\"commuter_rail\"\n          icon=\"commuter_rail\"\n          name=\"Rail\"\n          isModeSelected={isModeSelected}\n          onClick={mode => () => onModeClickAction(mode)}\n        />\n      )}\n      {shouldShowModeButton(\"ferry\", modeButtonsToShow) && (\n        <ModeButton\n          mode=\"ferry\"\n          icon=\"ferry\"\n          name=\"Ferry\"\n          isModeSelected={isModeSelected}\n          onClick={mode => () => onModeClickAction(mode)}\n        />\n      )}\n    </div>\n  </div>\n);\n","import React, { ReactElement } from \"react\";\nimport { Alert, EnhancedRoute } from \"../__v3api\";\nimport { routeBgClass, busClass } from \"../helpers/css\";\nimport { isASilverLineRoute } from \"../models/route\";\nimport { alertIcon } from \"../helpers/icon\";\nimport { breakTextAtSlash } from \"../helpers/text\";\n\nconst RouteCardHeader = ({\n  route,\n  alerts\n}: {\n  route: EnhancedRoute;\n  alerts: Alert[];\n}): ReactElement<HTMLElement> => (\n  <div\n    className={`c-link-block h3 m-tnm-sidebar__route-name ${routeBgClass(\n      route\n    )}`}\n  >\n    <a className=\"c-link-block__outer-link\" href={`/schedules/${route.id}`}>\n      <span className=\"sr-only\">Go to route</span>\n    </a>\n    <div className=\"c-link-block__inner\">\n      <span>\n        <span className={busClass(route)}>\n          {isASilverLineRoute(route.id)\n            ? `Silver Line ${route.name}`\n            : breakTextAtSlash(route.name)}\n        </span>\n        <div className=\"c-link-block__view-schedule\">View schedule</div>\n      </span>\n      {alerts?.length > 0 && (\n        <a\n          className=\"c-link-block__inner-link\"\n          href={`/schedules/${route.id}/alerts`}\n          title=\"alert\"\n        >\n          {alertIcon(\"c-svg__icon-alerts-triangle m-tnm-sidebar__route-alert\")}\n          <span>\n            {alerts.length}\n            {alerts.length > 1 ? \" alerts\" : \" alert\"}\n          </span>\n        </a>\n      )}\n    </div>\n  </div>\n);\n\nexport default RouteCardHeader;\n","import React, { ReactElement, KeyboardEvent, CSSProperties } from \"react\";\nimport { Direction as DirectionType, EnhancedRoute, Stop } from \"../__v3api\";\nimport { clickStopCardAction, Dispatch } from \"../tnm/state\";\nimport Direction from \"./Direction\";\nimport renderSvg from \"../helpers/render-svg\";\nimport { useSMDown } from \"../helpers/media-breakpoints-react\";\nimport { accessibleIcon, alertIcon } from \"../helpers/icon\";\nimport stationSymbol from \"../../static/images/icon-circle-t-small.svg\";\nimport { effectNameForAlert } from \"./Alerts\";\nimport { isDiversion, alertsByStop, uniqueByEffect } from \"../models/alert\";\nimport { isABusRoute } from \"../models/route\";\n\ninterface Props {\n  stop: Stop;\n  directions: DirectionType[];\n  route: EnhancedRoute;\n  dispatch: Dispatch;\n  distance: string;\n}\n\nconst renderStopIcon = (stop: Stop): JSX.Element =>\n  stop[\"station?\"] ? (\n    renderSvg(\"m-tnm-sidebar__stop-marker\", stationSymbol)\n  ) : (\n    <></>\n  );\n\nconst handleKeyPress = (\n  e: KeyboardEvent<HTMLDivElement>,\n  onClick: Function\n): void => {\n  if (e.key === \"Enter\") {\n    onClick();\n  }\n};\n\ninterface ButtonProps {\n  role: string;\n  tabIndex: number;\n  onClick: (event: MouseEvent) => void;\n  style: CSSProperties;\n  onKeyPress: (event: KeyboardEvent<HTMLDivElement>) => void;\n}\n\nexport const buttonProps = (\n  dispatch: Dispatch,\n  stopId: string\n): ButtonProps => {\n  const onClick = (): void => dispatch(clickStopCardAction(stopId));\n\n  return {\n    role: \"button\",\n    style: { cursor: \"pointer\" },\n    tabIndex: 0,\n    onClick,\n    onKeyPress: (e: KeyboardEvent<HTMLDivElement>) => handleKeyPress(e, onClick)\n  };\n};\n\nexport const StopCard = ({\n  stop,\n  directions,\n  route,\n  dispatch,\n  distance\n}: Props): ReactElement<HTMLElement> | null => {\n  const isSmallBreakpoint = useSMDown();\n\n  const key = `${route.id}-${stop.id}`;\n  const containerProps = !isSmallBreakpoint\n    ? buttonProps(dispatch, stop.id)\n    : {};\n\n  return (\n    <div className=\"m-tnm-sidebar__route-stop\" {...containerProps}>\n      <div className=\"m-tnm-sidebar__stop-info\">\n        <a href={stop.href} className=\"m-tnm-sidebar__stop-name\">\n          {renderStopIcon(stop)}\n          {stop.name}\n          {// NOTE: Bus stops are always considered accessible, see\n          // https://app.asana.com/0/1201653980996886/1201894234147725/f\n          (isABusRoute(route) ||\n            (!!stop.accessibility.length &&\n              !stop.accessibility.includes(\"unknown\"))) &&\n            accessibleIcon(\"m-tnm-sidebar__stop-accessible\")}\n        </a>\n        <div className=\"m-tnm-sidebar__stop-distance\">{distance}</div>\n      </div>\n      {alertsByStop(route.alerts?.filter(isDiversion) || [], stop.id)\n        .filter(uniqueByEffect)\n        .map(alert => (\n          <div key={alert.id} className=\"m-tnm-sidebar__route-alert-effect\">\n            <a\n              className=\"m-stop-page__departures-alert\"\n              href={`/schedules/${route.id}/alerts`}\n            >\n              {alertIcon(\"c-svg__icon-alerts-triangle\")}\n              {effectNameForAlert(alert)}\n            </a>\n          </div>\n        ))}\n      {directions.map(direction => (\n        <Direction\n          key={`${key}-${direction.direction_id}`}\n          direction={direction}\n          route={route}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default StopCard;\n","import {\n  isABusRoute,\n  isACommuterRailRoute,\n  isAGreenLineRoute,\n  isASilverLineRoute\n} from \"../models/route\";\nimport { Route } from \"../__v3api\";\n\nexport const routeToCSSClass = (route: string): string =>\n  route.toLowerCase().replace(/[ _]/g, \"-\");\n\nexport const busClass = (route: Route): string =>\n  isABusRoute(route) && !isASilverLineRoute(route) ? \"bus-route-sign\" : \"\";\n\nexport const routeToModeName = (route: Route): string => {\n  if (isACommuterRailRoute(route)) return \"commuter-rail\";\n  if (route.type === 4) return \"ferry\";\n  if (route.id === \"Red\" || route.id === \"Mattapan\") return \"red-line\";\n  if (route.id === \"Orange\") return \"orange-line\";\n  if (route.id === \"Blue\") return \"blue-line\";\n  if (isAGreenLineRoute(route)) return \"green-line\";\n  if (isASilverLineRoute(route)) return \"silver-line\";\n  if (isABusRoute(route)) return \"bus\";\n  return \"unknown\";\n};\n\nexport const routeBgClass = (route: Route): string =>\n  `u-bg--${routeToModeName(route)}`;\n","import {\n  differenceInSeconds,\n  getMinutes,\n  parseISO,\n  secondsInHour,\n  secondsInMinute\n} from \"date-fns\";\nimport { formatInTimeZone } from \"date-fns-tz\";\n\nconst BOSTON_TIMEZONE = \"America/New_York\";\n\n// this returns a Date() in the browser time zone, unlike new Date(unformatted)\nexport const stringToDateObject = (unformatted: string): Date => {\n  const [year, month, day] = unformatted\n    .split(/-/)\n    .map(part => Number.parseInt(part, 10));\n\n  // Remember that months in JS are 0-indexed for some reason, hence \"month - 1\".\n  const parsedDate = new Date(year, month - 1, day);\n  return parsedDate;\n};\n\n// Returns a date in the form of \"2019-08-07\"\nexport const dateObjectToString = (date: Date): string =>\n  [\n    date.getFullYear(),\n    `0${date.getMonth() + 1}`.slice(-2),\n    `0${date.getDate()}`.slice(-2)\n  ].join(\"-\");\n\n// Returns a date in the form of \"August 7, 2019\"\nexport const formattedDate = (unformatted: string): string => {\n  const parsedDate = stringToDateObject(unformatted);\n  return parsedDate.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n    timeZone: \"UTC\"\n  });\n};\n\n// Returns a date in the form of \"Aug 7\"\nexport const shortDate = (date: Date): string =>\n  date.toLocaleDateString(\"en-US\", {\n    month: \"short\",\n    day: \"numeric\",\n    timeZone: \"UTC\"\n  });\n\nexport const compareStringTimes = (\n  timeStr1: string[],\n  timeStr2: string[]\n): string => {\n  const today = new Date();\n  const dateFormatted = new Intl.DateTimeFormat(\"en-US\").format(today);\n\n  const fullDate1 = `${dateFormatted} ${timeStr1.join(\"\")}`; // \"11/24/2013 2:10 PM\"\n  const fullDate2 = `${dateFormatted} ${timeStr2.join(\"\")}`;\n\n  const timeInMs1 = new Date(fullDate1).getTime();\n  const timeInMs2 = new Date(fullDate2).getTime();\n\n  let comparison = \"eq\";\n  if (timeInMs1 < timeInMs2) {\n    comparison = \"lt\";\n  } else if (timeInMs1 > timeInMs2) {\n    comparison = \"gt\";\n  }\n  return comparison;\n};\n\nexport const formatToBostonTime = (\n  dateTimeString: string | Date,\n  overrideFormat?: string\n): string => {\n  const dateTime =\n    typeof dateTimeString === \"string\"\n      ? parseISO(dateTimeString)\n      : dateTimeString;\n  let formatString = \"h:mm aa\"; // 5:00 AM\n  if (getMinutes(dateTime) === 0) {\n    formatString = \"h aa\"; // 5 AM\n  }\n  formatString = overrideFormat !== undefined ? overrideFormat : formatString;\n  return formatInTimeZone(dateTime, BOSTON_TIMEZONE, formatString);\n};\n\nexport const formatRelativeTime = (\n  time: Date,\n  targetDate: Date = new Date()\n): string => {\n  const seconds = differenceInSeconds(time, targetDate);\n  if (seconds <= 60) {\n    return \"<1 minute away\";\n  }\n  if (seconds < secondsInHour) {\n    return `${Math.floor(seconds / secondsInMinute)} min`;\n  }\n\n  return formatToBostonTime(time, \"h:mm aa\");\n};\n\nexport const isSameDayInBoston = (\n  dateTime1: Date | undefined,\n  dateTime2: Date | undefined\n): boolean => {\n  // if there is no day to compare then the it should be the same day\n  if (!dateTime1 || !dateTime2) {\n    return true;\n  }\n  // returns strings in mm/dd/yyyy format\n  const date1InBoston = dateTime1.toLocaleDateString(\"en-US\", {\n    timeZone: BOSTON_TIMEZONE\n  });\n  const date2InBoston = dateTime2.toLocaleDateString(\"en-US\", {\n    timeZone: BOSTON_TIMEZONE\n  });\n\n  return date1InBoston === date2InBoston;\n};\n\nexport default formattedDate;\n","// Debounce is meant to be used with event listeners. Use it to delay a call\n// until after a burst of events, such as keyboard input.\n//\n//   usage:\n//\n//     const callback = (ev: Event) => {}\n//     document.addEventListener(\"keyup\", debounce(callback, 250))\n//\n\nconst debounce = (callback: Function, delay: number): EventListener => {\n  let timer: number | undefined;\n\n  return (...args) => {\n    window.clearTimeout(timer);\n    timer = window.setTimeout(() => callback(...args), delay);\n  };\n};\n\nexport const debouncePromise = (\n  callback: Function,\n  delay: number\n): Function => {\n  let timerId: number | undefined;\n\n  return function debounced(...args: unknown[]) {\n    if (timerId) {\n      window.clearTimeout(timerId);\n    }\n\n    return new Promise(resolve => {\n      timerId = window.setTimeout(() => resolve(callback(...args)), delay);\n    });\n  };\n};\n\nexport default debounce;\n","export const isFetchFailed = <T>(r: FetchResult<T>): r is FetchFailed =>\n  r && typeof r === \"object\" && \"statusText\" in r;\n\nexport const throwIfFetchFailed = <T>(result: FetchResult<T>): T => {\n  if (isFetchFailed(result)) {\n    throw new Error(`Fetch failed: ${result}`);\n  }\n\n  return result;\n};\n\nexport type FetchFailed = Response;\nexport type FetchResult<T> = T | FetchFailed;\nexport const fetchJson = async <T>(\n  ...args: Parameters<typeof fetch>\n): Promise<FetchResult<T>> => {\n  const resp = await fetch(...args);\n  if (!resp.ok) {\n    return resp;\n  }\n\n  return resp.json();\n};\n\nexport const fetchJsonOrThrow = async <T>(\n  ...args: Parameters<typeof fetch>\n): Promise<T> => fetchJson<T>(...args).then(throwIfFetchFailed);\n","import React, { ReactElement } from \"react\";\nimport renderSvg from \"./render-svg\";\nimport { isASilverLineRoute } from \"../models/route\";\nimport accessibleIconSvg from \"../../static/images/icon-accessible-small.svg\";\nimport alertIconSvg from \"../../static/images/icon-alerts-triangle.svg\";\nimport blueLineIconSvg from \"../../static/images/icon-blue-line-default.svg\";\nimport busIconSvg from \"../../static/images/icon-mode-bus-small.svg\";\nimport commuterRailIconSvg from \"../../static/images/icon-mode-commuter-rail-small.svg\";\nimport ferryIconSvg from \"../../static/images/icon-mode-ferry-small.svg\";\nimport genericSubwayIconSvg from \"../../static/images/icon-mode-subway-default.svg\";\nimport greenLineIconSvg from \"../../static/images/icon-green-line-small.svg\";\nimport greenBLineIconSvg from \"../../static/images/icon-green-line-b-small.svg\";\nimport greenCLineIconSvg from \"../../static/images/icon-green-line-c-small.svg\";\nimport greenDLineIconSvg from \"../../static/images/icon-green-line-d-small.svg\";\nimport greenELineIconSvg from \"../../static/images/icon-green-line-e-small.svg\";\nimport mattapanLineIconSvg from \"../../static/images/icon-mattapan-line-small.svg\";\nimport orangeLineIconSvg from \"../../static/images/icon-orange-line-small.svg\";\nimport redLineIconSvg from \"../../static/images/icon-red-line-small.svg\";\nimport silverLineIconSvg from \"../../static/images/icon-silver-line-small.svg\";\nimport vehicleArrowSvg from \"../../static/images/icon-vehicle-bordered-expanded.svg\";\nimport searchIconSvg from \"../../static/images/icon-search-reverse-default.svg\";\nimport crowdingIconSvg from \"../../static/images/icon-crowding.svg\";\nimport bikeIconSvg from \"../../static/images/icon-bike.svg\";\nimport escalatorIconSvg from \"../../static/images/icon-escalator.svg\";\nimport elevatorIconSvg from \"../../static/images/icon-elevator.svg\";\nimport faresIconSvg from \"../../static/images/icon-fares.svg\";\n\nimport renderFa from \"./render-fa\";\n\nexport const accessibleIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, accessibleIconSvg, false);\n\nexport const alertIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, alertIconSvg, false);\n\nexport const blueLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, blueLineIconSvg, false);\n\nexport const busIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, busIconSvg, false);\n\nexport const commuterRailIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, commuterRailIconSvg, false);\n\nexport const ferryIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, ferryIconSvg, false);\n\nexport const genericSubwayIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, genericSubwayIconSvg, false);\n\nexport const greenLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenLineIconSvg, false);\n\nexport const greenBLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenBLineIconSvg, false);\n\nexport const greenCLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenCLineIconSvg, false);\n\nexport const greenDLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenDLineIconSvg, false);\n\nexport const greenELineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, greenELineIconSvg, false);\n\nexport const mattapanLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, mattapanLineIconSvg, false);\n\nexport const orangeLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, orangeLineIconSvg, false);\n\nexport const parkingIcon = (className: string = \"\"): JSX.Element =>\n  renderFa(className, \"fa-square-parking\", false);\n\nexport const redLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, redLineIconSvg, false);\n\nexport const silverLineIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, silverLineIconSvg, false);\n\nexport const vehicleArrowIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, vehicleArrowSvg, false);\n\nexport const searchIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, searchIconSvg, false);\n\nexport const bikeIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, bikeIconSvg, false);\nexport const escalatorIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, escalatorIconSvg, false);\nexport const elevatorIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, elevatorIconSvg, false);\nexport const faresIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(className, faresIconSvg, false);\n\nexport const modeIcon = (routeId: string): JSX.Element | undefined => {\n  if (routeId.startsWith(\"CR-\")) return commuterRailIcon(\"c-svg__icon\");\n  if (routeId.startsWith(\"Boat-\")) return ferryIcon(\"c-svg__icon\");\n  if (routeId === \"Blue\") return blueLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green\") return greenLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green-B\") return greenBLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green-C\") return greenCLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green-D\") return greenDLineIcon(\"c-svg__icon\");\n  if (routeId === \"Green-E\") return greenELineIcon(\"c-svg__icon\");\n  if (routeId === \"Mattapan\") return mattapanLineIcon(\"c-svg__icon\");\n  if (routeId === \"Orange\") return orangeLineIcon(\"c-svg__icon\");\n  if (routeId === \"Red\") return redLineIcon(\"c-svg__icon\");\n  if (isASilverLineRoute(routeId)) return silverLineIcon(\"c-svg__icon\");\n\n  return busIcon(\"c-svg__icon-bus-small\");\n};\n\nexport const caret = (\n  className: string,\n  expanded: boolean\n): ReactElement<HTMLElement> => {\n  const unicodeCharacter = expanded ? \"&#xF106;\" : \"&#xF107;\";\n  return (\n    <span\n      className={`fa ${className}`}\n      // eslint-disable-next-line react/no-danger\n      dangerouslySetInnerHTML={{ __html: unicodeCharacter }}\n    />\n  );\n};\n\n/*\nA minimal component that gives its child component\na basic tooltip containing the specified text. Has no\nvisual appearance itself.\n\nNote: data-selector=\"true\" and data-original-title are\nspecified here in order to preserve `title` text post-trigger\n*/\n\n// Corresponds to Bootstrap's tooltip options\ninterface TooltipOptions {\n  animation?: boolean;\n  container?: string | HTMLElement | false;\n  delay?: number | object;\n  html?: boolean;\n  placement?: string | Function;\n  selector?: string;\n  template?: string;\n  title?: string | HTMLElement | Function;\n  trigger?: string;\n  constraints?: [];\n  offset?: string;\n}\n\nconst defaultTooltipOptions: TooltipOptions = {\n  animation: true,\n  html: false,\n  placement: \"top\",\n  trigger: \"hover focus\"\n};\n\nexport const TooltipWrapper: React.FC<{\n  children: JSX.Element;\n  tooltipText: string;\n  tooltipOptions?: TooltipOptions;\n  href?: string;\n}> = ({ children, tooltipText, tooltipOptions, href }): JSX.Element => {\n  const options = Object.assign({}, defaultTooltipOptions, tooltipOptions);\n\n  const Tag = href ? \"a\" : \"span\";\n\n  return (\n    <Tag\n      href={href}\n      data-toggle=\"tooltip\"\n      data-trigger={options.trigger}\n      data-placement={options.placement}\n      data-animation={options.animation}\n      data-html={options.html}\n      data-selector=\"true\"\n      data-original-title={tooltipText}\n    >\n      {children}\n    </Tag>\n  );\n};\n\nexport const crowdingIcon = (className: string = \"\"): JSX.Element =>\n  renderSvg(`c-svg__icon c-icon__crowding ${className}`, crowdingIconSvg, true);\n","import { KeyboardEvent as ReactKeyboardEvent } from \"react\";\n\n// for React\nexport const handleReactEnterKeyPress = (\n  e: ReactKeyboardEvent,\n  onClick: Function\n): void => {\n  if (e.key === \"Enter\") {\n    onClick();\n  }\n};\n\nexport const handleReactExitKeyPress = (\n  e: ReactKeyboardEvent,\n  onClick: Function\n): void => {\n  if (e.key === \"Escape\") {\n    onClick();\n  }\n};\n","import { useEffect, useState } from \"react\";\nimport { isSMDown } from \"./media-breakpoints\";\n\n// eslint-disable-next-line import/prefer-default-export\nexport const useSMDown = (): boolean => {\n  const [isSmallBreakpoint, setIsSmallBreakpoint] = useState(isSMDown());\n  useEffect(() => {\n    const handleResize = (): void => {\n      setIsSmallBreakpoint(isSMDown());\n    };\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return isSmallBreakpoint;\n};\n","// Specify in pixels, but in numbers here for calculations\nconst mediaBreakpoints = {\n  xs: 0,\n  sm: 544,\n  md: 800,\n  lg: 1088,\n  xxl: 1344\n};\n\nexport const isLGDown = (): boolean =>\n  window.matchMedia(`(max-width: ${mediaBreakpoints.lg}px)`).matches;\n\nexport const isSMDown = (): boolean =>\n  window?.matchMedia(`(max-width: ${mediaBreakpoints.sm}px)`)?.matches;\n","import React, { ReactElement } from \"react\";\nimport { differenceInSeconds } from \"date-fns\";\nimport { PredictedOrScheduledTime } from \"../__v3api\";\nimport { isSkippedOrCancelled } from \"../models/prediction\";\nimport { TripPrediction } from \"../schedule/components/__trips\";\nimport { compareStringTimes } from \"./date\";\nimport { PredictionWithTimestamp } from \"../models/predictions\";\nimport { ScheduleWithTimestamp } from \"../models/schedules\";\n\nconst delayForCommuterRail = (\n  data: PredictedOrScheduledTime,\n  className = \"\"\n): ReactElement<HTMLElement> => (\n  <>\n    <div className={`${className ? `${className}--delayed` : \"\"}`}>\n      {data.scheduled_time!.join(\"\")}\n    </div>\n    <div className={className}>\n      {data.prediction && data.prediction.time.join(\"\")}\n    </div>\n  </>\n);\n\nexport const timeForCommuterRail = (\n  data: PredictedOrScheduledTime,\n  className = \"\"\n): ReactElement<HTMLElement> => {\n  const { delay, prediction, scheduled_time: scheduledTime } = data;\n\n  if (delay >= 5 && prediction) {\n    return delayForCommuterRail(data, className);\n  }\n\n  let time = prediction ? prediction.time : scheduledTime;\n\n  // when 'On time', show the scheduled time only if it's later than the predicted time:\n  if (\n    scheduledTime &&\n    prediction &&\n    prediction.time[2] !== \"min\" &&\n    compareStringTimes(prediction.time, scheduledTime) === \"lt\"\n  ) {\n    // \"On time\"\n    time = scheduledTime;\n  }\n\n  return <div className={className}>{time!.join(\"\")}</div>;\n};\n\nexport const statusForCommuterRail = ({\n  delay,\n  scheduled_time: scheduledTime,\n  prediction\n}: PredictedOrScheduledTime): string | null => {\n  // If there is a human-entered status string, prioritize that\n  if (prediction && prediction.status) return prediction.status;\n\n  if (isSkippedOrCancelled((prediction as unknown) as TripPrediction))\n    return \"Canceled\";\n\n  // Indicate \"Delayed\" if train is delayed 5+ minutes\n  if (delay >= 5) return `Delayed ${delay} min`;\n\n  // Indicate \"On time\" if train otherwise has a prediction\n  // Indicate \"Scheduled\" if train is not \"Delayed\" and we have a scheduled time\n  // (even if there is no real-time prediction)\n  if (scheduledTime && prediction) return \"On time\";\n  if (scheduledTime) return \"Scheduled\";\n\n  // We have just a prediction with no scheduled time, so we can't say whether\n  // the train is on time, delayed, etc.\n  return null;\n};\n\nexport const trackForCommuterRail = ({\n  prediction\n}: PredictedOrScheduledTime): string =>\n  prediction && prediction.track ? ` track ${prediction.track}` : \"\";\n\nexport const isCancelled = (\n  prediction: PredictionWithTimestamp | undefined\n): boolean => {\n  return !!prediction && prediction.schedule_relationship === \"cancelled\";\n};\n\nexport const isSkipped = (\n  prediction: PredictionWithTimestamp | undefined\n): boolean => {\n  return !!prediction && prediction.schedule_relationship === \"skipped\";\n};\n\n// Finds the corresponding schedule to the prediction and compares the times\n// If the prediction and schedule are more than 60 seconds apart it is delayed\nexport const isDelayed = (\n  prediction: PredictionWithTimestamp | undefined,\n  schedule: ScheduleWithTimestamp | undefined,\n  maxDifferenceInSeconds: number = 60\n): boolean => {\n  return (\n    !!schedule &&\n    !!prediction &&\n    !!prediction.time &&\n    // Is the prediction meaningfully after the schedule\n    differenceInSeconds(prediction.time, schedule.time) > maxDifferenceInSeconds\n  );\n};\n","export interface QueryParams {\n  [key: string]: string;\n}\n\n// The encoder/decoder functions must be injected\n// because this helper is used by some vanilla JS files,\n// and MochaJS insists that the window object does not\n// include encodeURIComponent or decodeURIComponent,\n// which causes a compiler error. If/when there are\n// no more JS modules using these helpers, the\n// injections should be removed.\ntype EncoderDecoder = (str: string) => string;\n\nexport const paramsToString = (\n  params: QueryParams,\n  encoder: EncoderDecoder\n): string => {\n  if (!params || Object.keys(params).length === 0) {\n    return \"\";\n  }\n\n  return `?${Object.keys(params)\n    .map(key => `${key}=${encoder(params[key])}`)\n    .join(\"&\")}`;\n};\n\ntype QueryReducer = (params: QueryParams, kvString: string) => QueryParams;\n\nconst queryReducer = (decoder: EncoderDecoder): QueryReducer => (\n  params: QueryParams,\n  kvString: string\n) => {\n  const [key, val] = kvString.split(\"=\");\n  return { ...params, [decoder(key)]: decoder(val.replace(/\\+/g, \" \")) };\n};\n\nexport const parseQuery = (\n  query: string,\n  decoder: EncoderDecoder\n): QueryParams =>\n  query\n    ? query\n        .substring(1)\n        .split(\"&\")\n        .reduce(queryReducer(decoder), {})\n    : {};\n","import React from \"react\";\n\nconst FontAwesomeIcon = (\n  className: string,\n  svgName: string,\n  ariaHide: boolean = true\n): JSX.Element => (\n  <i\n    className={\n      className\n        ? `fa ${svgName} notranslate ${className}`\n        : `fa ${svgName} notranslate`\n    }\n    aria-hidden={ariaHide ? \"true\" : \"false\"}\n  />\n);\n\nexport default FontAwesomeIcon;\n","import React from \"react\";\n\nconst SVGIcon = (\n  className: string,\n  svgText: string,\n  ariaHide: boolean = true\n): JSX.Element => (\n  <span\n    className={className ? `notranslate ${className}` : \"notranslate\"}\n    aria-hidden={ariaHide ? \"true\" : \"false\"}\n    // eslint-disable-next-line react/no-danger\n    dangerouslySetInnerHTML={{ __html: svgText }}\n  />\n);\n\nexport default SVGIcon;\n","import { RouteStop } from \"../schedule/components/__schedule\";\nimport { RouteWithDirection, TypedRoutes } from \"../stop/components/__stop\";\nimport { isABusRoute } from \"../models/route\";\nimport { Route } from \"../__v3api\";\n\nexport function isBusRouteStop(stop: RouteStop): boolean {\n  return !!stop.route && isABusRoute(stop.route);\n}\n\nexport function routesWithDirectionsAreAllBusStops(\n  routes: RouteWithDirection[]\n): boolean {\n  return (\n    routes.length > 0 &&\n    routes.reduce((acc: boolean, r) => isABusRoute(r.route) && acc, true)\n  );\n}\n\nexport function typedRoutesHasBusRoute(routes: TypedRoutes[]): boolean {\n  return !!routes.find(r => r.group_name === \"bus\");\n}\n\nexport function routesHasBusRoute(routes: Route[]): boolean {\n  return !!routes.find(r => isABusRoute(r));\n}\n","/**\n * Replaces slashes in a given string with a slash + ZERO_WIDTH_SPACE.\n * It's visually the same, but allows browsers to break the text into multiple lines.\n */\n// eslint-disable-next-line import/prefer-default-export\nexport const breakTextAtSlash = (str: string): string =>\n  str.replace(/\\//g, \"/\");\n\nexport interface HighlightedSpan {\n  offset: number;\n  length: number;\n}\nexport function highlightText(\n  text: string,\n  spans: HighlightedSpan[] = []\n): string {\n  const parts = [];\n  let cursor = 0;\n  spans.forEach(span => {\n    const { offset, length } = span;\n\n    parts.push(text.slice(cursor, offset));\n    parts.push(`<em>${text.slice(offset, offset + length)}</em>`);\n    cursor = length + offset;\n  });\n  parts.push(text.slice(cursor));\n\n  return parts.join(\"\");\n}\n","import { LatLng, latLng, LatLngBounds, latLngBounds } from \"leaflet\";\nimport { MapMarker as Marker } from \"./components/__mapdata\";\n\nconst getBounds = (markers: Marker[]): LatLngBounds | undefined => {\n  if (!markers.length) return undefined;\n  const points: LatLng[] = markers.map(m => latLng(m.latitude, m.longitude));\n  return latLngBounds(points);\n};\n\nexport default getBounds;\n","import React, { ReactElement, useLayoutEffect } from \"react\";\nimport { uniqBy } from \"lodash\";\nimport deepEqual from \"fast-deep-equal/react\";\nimport {\n  Icon,\n  LatLngBounds,\n  Marker as LeafletMarker,\n  MarkerOptions\n} from \"leaflet\";\nimport Leaflet from \"react-leaflet\";\nimport { MapData, MapMarker, IconOpts } from \"./__mapdata\";\n\nexport interface ZoomOpts {\n  maxZoom: number;\n  minZoom: number;\n  scrollWheelZoom: boolean;\n  style: object;\n}\n\nexport const defaultZoomOpts: ZoomOpts = {\n  maxZoom: 18,\n  minZoom: 9,\n  scrollWheelZoom: false,\n  style: { touchAction: \"none\" } // fix for chrome-android to prevent zooming page\n};\n\ninterface Props {\n  bounds?: LatLngBounds;\n  boundsByMarkers?: boolean;\n  mapData: MapData;\n}\n\nconst mapCenter = (\n  markers: MapMarker[],\n  { latitude, longitude }: { latitude: number; longitude: number }\n): [number, number] | undefined => {\n  if (markers.length === 1) return [markers[0].latitude, markers[0].longitude];\n  return [latitude, longitude];\n};\n\nconst rotateMarker = (\n  markerEl: LeafletMarker<MarkerOptions>,\n  { rotation_angle: angle }: MapMarker\n): void => {\n  // TS does not recognize setRotationAngle, which\n  // is added by the leaflet-rotatedmarker plugin\n  // @ts-ignore\n  markerEl.setRotationAngle(angle);\n};\n\nconst Component = ({\n  bounds,\n  boundsByMarkers,\n  mapData: {\n    default_center: defaultCenter,\n    markers,\n    polylines,\n    tile_server_url: tileServerUrl,\n    zoom\n  }\n}: Props): ReactElement<HTMLElement> | null => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const mapRef = React.createRef<any>();\n  useLayoutEffect(() => {\n    if (mapRef.current && mapRef.current.leafletElement) {\n      // tells Leaflet to redraw the map\n      mapRef.current.leafletElement.invalidateSize();\n    }\n  }, [mapRef]);\n\n  if (typeof window !== \"undefined\" && tileServerUrl !== \"\") {\n    /* eslint-disable */\n    const leaflet: typeof Leaflet = require(\"react-leaflet\");\n    const buildIcon: (\n      icon: string | null,\n      opts?: IconOpts\n    ) => Icon | undefined = require(\"../icon\").default;\n    require(\"leaflet-rotatedmarker\");\n    const getBounds = require(\"../bounds\").default;\n    /* eslint-enable */\n    const { Map, Marker, Polyline, Popup, TileLayer } = leaflet;\n    /* istanbul ignore next */\n    const boundsOrByMarkers = bounds || (boundsByMarkers && getBounds(markers));\n    const position = mapCenter(markers, defaultCenter);\n    const nonNullZoom = zoom === null ? undefined : zoom;\n\n    const onTilesLoaded = (): void => {\n      mapRef.current.container.parentElement.classList += \" map--loaded\";\n    };\n\n    return (\n      <Map\n        ref={mapRef}\n        bounds={boundsOrByMarkers}\n        center={position}\n        zoom={nonNullZoom}\n        {...defaultZoomOpts}\n      >\n        <TileLayer\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url={`${tileServerUrl}/osm_tiles/{z}/{x}/{y}.png`}\n          onload={onTilesLoaded}\n        />\n        {polylines.map(\n          /* istanbul ignore next */\n          polyline => (\n            <Polyline\n              className={polyline.className}\n              key={\n                polyline.id || `polyline-${Math.floor(Math.random() * 1000)}`\n              }\n              positions={polyline.positions}\n              color={polyline.color}\n              weight={polyline.weight}\n              dashArray={polyline[\"dotted?\"] ? \"4px 8px\" : \"none\"}\n              lineCap={polyline[\"dotted?\"] ? \"butt\" : \"round\"}\n              lineJoin={polyline[\"dotted?\"] ? \"miter\" : \"round\"}\n            />\n          )\n        )}\n        {uniqBy(markers, \"id\").map(marker => (\n          <Marker\n            icon={buildIcon(marker.icon, marker.icon_opts)}\n            key={\n              marker.id ||\n              /* istanbul ignore next */ `marker-${Math.floor(\n                Math.random() * 1000\n              )}`\n            }\n            alt={marker.alt || \"Marker\"}\n            position={[marker.latitude, marker.longitude]}\n            ref={ref => ref && rotateMarker(ref.leafletElement, marker)}\n            zIndexOffset={marker.z_index}\n            keyboard={false}\n            onclick={marker.onClick}\n          >\n            {marker.tooltip && <Popup maxHeight={175}>{marker.tooltip}</Popup>}\n          </Marker>\n        ))}\n      </Map>\n    );\n  }\n  return null;\n};\n\nexport default React.memo(Component, deepEqual);\n","import React, { ReactElement } from \"react\";\nimport { Stop, EnhancedRoute } from \"../../__v3api\";\nimport StopCard from \"../../stop/components/StopCard\";\nimport { RouteWithDirection } from \"../../stop/components/__stop\";\n\nexport interface Props {\n  stop: Stop;\n  routesWithDirection?: RouteWithDirection[];\n  routes: EnhancedRoute[];\n  distanceFormatted?: string;\n}\n\nconst MapTooltip = ({\n  stop,\n  routesWithDirection,\n  routes,\n  distanceFormatted\n}: Props): ReactElement<HTMLElement> => (\n  <StopCard\n    routes={routes}\n    routesWithDirection={routesWithDirection}\n    stop={stop}\n    distanceFormatted={distanceFormatted}\n  />\n);\n\nexport default MapTooltip;\n","import { Icon } from \"leaflet\";\nimport { IconOpts } from \"../leaflet/components/__mapdata\";\n\nexport type IconType = (\n  icon: string | null,\n  opts: IconOpts | undefined\n) => Icon | undefined;\n\ninterface LeafletOpts {\n  iconSize: [number, number];\n  iconAnchor: [number, number];\n  popupAnchor: [number, number];\n}\n\nexport const defaultIconOpts: LeafletOpts = {\n  iconAnchor: [22, 55],\n  iconSize: [45, 75],\n  popupAnchor: [0, -37]\n};\n\nexport default (\n  icon: string | null,\n  opts?: IconOpts | null\n): Icon | undefined => {\n  const iconOpts =\n    opts !== null && opts\n      ? {\n          iconAnchor: opts.icon_anchor || defaultIconOpts.iconAnchor,\n          iconSize: opts.icon_size || defaultIconOpts.iconSize,\n          popupAnchor: opts.popup_anchor || defaultIconOpts.popupAnchor\n        }\n      : defaultIconOpts;\n  return icon === null\n    ? undefined\n    : new Icon({\n        ...iconOpts,\n        iconUrl: `/images/icon-${icon}.svg`,\n        iconRetinaUrl: `/images/icon-${icon}.svg`\n      });\n};\n","export type SelectedStopType = string | null;\nexport const clickMarkerAction = (stopId: SelectedStopType): MapAction => ({\n  type: \"CLICK_MARKER\",\n  payload: { stopId }\n});\n\nexport const clickCurrentLocationAction = (\n  stopId: SelectedStopType\n): MapAction => ({\n  type: \"CLICK_CURRENT_LOCATION_MARKER\",\n  payload: { stopId }\n});\n\nexport interface MapAction {\n  type: MapActionType;\n  payload: {\n    stopId: SelectedStopType;\n  };\n}\n\nexport type MapActionType = \"CLICK_MARKER\" | \"CLICK_CURRENT_LOCATION_MARKER\";\n","import { isValid, parseISO, add } from \"date-fns\";\nimport { concat, isArray, mergeWith, reduce, some } from \"lodash\";\nimport { StopId } from \"../schedule/components/__schedule\";\nimport { Activity, Alert, Facility, TimePeriodPairs } from \"../__v3api\";\n\nexport const isHighSeverityOrHighPriority = ({\n  priority,\n  severity\n}: Alert): boolean => priority === \"high\" || severity >= 7;\n\nexport const isDiversion = ({ effect }: Alert): boolean =>\n  effect === \"shuttle\" ||\n  effect === \"stop_closure\" ||\n  effect === \"station_closure\" ||\n  effect === \"detour\";\n\nexport const isHighPriorityAlert = ({ effect }: Alert): boolean =>\n  effect === \"detour\" || effect === \"suspension\" || effect === \"shuttle\";\n\nexport const alertsForEffects = (alerts: Alert[], effects: string[]): Alert[] =>\n  alerts.filter(a => effects.includes(a.effect));\n\nexport const alertsForEffect = (alerts: Alert[], effect: string): Alert[] =>\n  alertsForEffects(alerts, [effect]);\n\nexport const filterParkingAlerts = (alerts: Alert[]): Alert[] =>\n  alertsForEffects(alerts, [\"parking_closure\", \"parking_issue\"]);\n\nexport const isAmenityAlert = ({ effect }: Alert): boolean =>\n  [\n    \"elevator_closure\",\n    \"escalator_closure\",\n    \"parking_closure\",\n    \"parking_issue\",\n    \"bike_issue\"\n  ].includes(effect);\n\nexport const alertsForRoute = (alerts: Alert[], routeId: string): Alert[] => {\n  return alerts.filter(\n    ({ informed_entity: entities }: Alert): boolean =>\n      !!(entities.route && entities.route.some((id: string) => id === routeId))\n  );\n};\n\nexport const alertsByStop = (alerts: Alert[], stopId: StopId): Alert[] =>\n  alerts.filter(\n    ({ informed_entity: entities }: Alert): boolean =>\n      !!(entities.stop && entities.stop.some((id: StopId) => id === stopId))\n  );\n\nexport const alertsForStopAndRoute = (\n  alerts: Alert[],\n  stopId: StopId,\n  routeId: string\n): Alert[] => {\n  const stopAlerts = alertsByStop(alerts, stopId);\n  return alertsForRoute(stopAlerts, routeId);\n};\n\nexport const alertsByActivity = (\n  alerts: Alert[],\n  activity: Activity\n): Alert[] =>\n  alerts.filter(\n    ({ informed_entity: { activities } }: Alert): boolean =>\n      activities && activities.includes(activity)\n  );\n\nconst hasEffect = (alerts: Alert[], effect: string): boolean =>\n  some(alerts, alert => alert.effect === effect);\n\nexport const hasSuspension = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"suspension\");\n\nexport const hasShuttleService = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"shuttle\");\n\nexport const hasDetour = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"detour\");\n\nexport const hasStopClosure = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"stop_closure\");\n\nexport const hasStationClosure = (alerts: Alert[]): boolean =>\n  hasEffect(alerts, \"station_closure\");\n\nexport const hasClosure = (alerts: Alert[]): boolean =>\n  hasStopClosure(alerts) || hasStationClosure(alerts);\n\nexport const alertsWithStop = (alerts: Alert[]): Alert[] =>\n  alerts.filter(\n    ({ informed_entity: entites }: Alert): boolean => !!entites.stop\n  );\n\nexport const routeWideAlerts = (alerts: Alert[]): Alert[] =>\n  alerts.filter(({ informed_entity: { entities } }: Alert): boolean =>\n    entities.some(entity => !entity.stop && !entity.trip)\n  );\n\nexport const alertsByRoute = (alerts: Alert[]): { [key: string]: Alert[] } => {\n  return reduce(\n    alerts,\n    (acc, alert) => {\n      // create a map of every route id to the alert\n      const explodedAlerts = reduce(\n        alert.informed_entity.route,\n        (innerAcc, routeId) => {\n          return { ...innerAcc, [routeId]: [alert] };\n        },\n        {}\n      );\n\n      return mergeWith(acc, explodedAlerts, (objValue, srcValue) => {\n        if (isArray(objValue)) {\n          return objValue.concat(srcValue);\n        }\n        return srcValue;\n      });\n    },\n    {}\n  );\n};\n\n// This will only return alerts with direction id specified (aka affecting a single direction)\nexport const alertsByDirectionId = (\n  alerts: Alert[]\n): { [key: number]: Alert[] } => {\n  return reduce(\n    alerts,\n    (acc, alert) => {\n      const explodedAlerts = reduce(\n        alert.informed_entity.direction_id,\n        (innerAcc, directionId) => {\n          // only include specified directions\n          if (directionId !== null) {\n            return { ...innerAcc, [directionId]: [alert] };\n          }\n          return innerAcc;\n        },\n        {}\n      );\n\n      return mergeWith(acc, explodedAlerts, (objValue, srcValue) => {\n        if (isArray(objValue)) {\n          return objValue.concat(srcValue);\n        }\n        return srcValue;\n      });\n    },\n    {}\n  );\n};\n\nexport const alertsAffectingBothDirections = (alerts: Alert[]): Alert[] => {\n  return alerts.filter(alert => {\n    return (\n      alert.informed_entity.direction_id === null ||\n      alert.informed_entity.direction_id.length === 0 ||\n      alert.informed_entity.direction_id[0] === null\n    );\n  });\n};\n\nexport const allAlertsForDirection = (\n  alerts: Alert[],\n  direction_id: number\n): Alert[] => {\n  const alertsByDirectionObj = alertsByDirectionId(alerts);\n  const alertsAffectingBothDirectionsArray = alertsAffectingBothDirections(\n    alerts\n  );\n  const alertsDirectionArray = alertsByDirectionObj[direction_id]\n    ? alertsByDirectionObj[direction_id]\n    : [];\n\n  return concat(alertsAffectingBothDirectionsArray, alertsDirectionArray);\n};\n\nexport const uniqueByEffect = (\n  alert: Alert,\n  index: number,\n  alerts: Alert[]\n): boolean => alerts.findIndex(a => a.effect === alert.effect) === index;\n\nconst activePeriodToDates = (\n  activePeriod: TimePeriodPairs\n): (Date | null)[] => {\n  return activePeriod.map((d: string): Date | null => {\n    return parseISO(d);\n  });\n};\n\nexport const isCurrentLifecycle = ({ lifecycle }: Alert): boolean =>\n  lifecycle === \"new\" ||\n  lifecycle === \"ongoing\" ||\n  lifecycle === \"ongoing_upcoming\";\n\nexport const isUpcomingOrCurrentLifecycle = (alert: Alert): boolean =>\n  alert.lifecycle === \"upcoming\" || isCurrentLifecycle(alert);\n\nexport const isInNextXDays = (\n  alert: Alert,\n  days: number,\n  selectedDate: Date = new Date()\n): boolean => {\n  const xDays = add(selectedDate, { days });\n  xDays.setHours(23, 59, 59); // set to end of X day\n  if (!alert.active_period) return false;\n  const dateRanges = alert.active_period.map(ap => activePeriodToDates(ap));\n  const isInARange = dateRanges.some((range): boolean => {\n    const [start, end] = range;\n    if (!start || !isValid(start)) return false; // end might be null for ongoing alerts\n    if (!end || !isValid(end)) return true;\n\n    if (days === 0) {\n      return start <= selectedDate && end >= selectedDate;\n    }\n    return start <= xDays && end >= selectedDate;\n  });\n  return days === 0 ? isCurrentLifecycle(alert) && isInARange : isInARange;\n};\n\nexport const isActiveDiversion = (alert: Alert): boolean =>\n  isDiversion(alert) && isInNextXDays(alert, 0);\n\nexport const hasAnActiveDiversion = (\n  stopId: StopId,\n  alerts: Alert[]\n): boolean => alertsByStop(alerts, stopId).some(isActiveDiversion);\n\nexport const isGlobalBannerAlert = (alert: Alert): boolean => {\n  return alert.banner != null;\n};\n\nexport const hasCurrentFacilityAlert = (\n  facilityId: string,\n  alerts: Alert[]\n): boolean => {\n  return alerts.filter(isCurrentLifecycle).some(alert => {\n    if (alert.informed_entity?.facility) {\n      return alert.informed_entity.facility.includes(facilityId);\n    }\n    return false;\n  });\n};\n\nexport const alertsByFacility = (\n  facilities: Facility[],\n  alerts: Alert[]\n): Alert[] => {\n  const facilityIds = facilities.map(facility => facility.id);\n  return alerts.filter(({ informed_entity: { facility } }: Alert): boolean => {\n    if (facility) {\n      return facility.some(facilityId => facilityIds.includes(facilityId));\n    }\n    return false;\n  });\n};\n\n/**\n * Sometimes we want to use the alerts to affect the display of departures. This\n * is mainly when:\n * - A shuttle is in service\n * - A suspension is underway  accounting for the fact that, when a suspension\n *   applies to a range of stops, the first/last stops in that range might only\n *   experience the suspension in a single direction. We might not have\n *   sufficient data in the alert itself to conclusively determine that, but we\n *   can approximate this by observing whether arrival/departure data is\n *   present.\n */\nexport const isSuppressiveAlert = (\n  alert: Alert,\n  numPredictions: number\n): boolean => {\n  const { effect } = alert;\n  // if predictions are present, suspension or shuttle likely doesn't apply here\n  const isValidSuppressiveAlert =\n    ((effect === \"suspension\" || effect === \"shuttle\") &&\n      numPredictions === 0) ||\n    effect === \"station_closure\" ||\n    effect === \"stop_closure\";\n  return isCurrentLifecycle(alert) && isValidSuppressiveAlert;\n};\n","import { TripPrediction } from \"../schedule/components/__trips\";\nimport { HeadsignWithCrowding } from \"../__v3api\";\n\n// eslint-disable-next-line import/prefer-default-export\nexport const isSkippedOrCancelled = (\n  prediction: TripPrediction | null\n): boolean =>\n  prediction\n    ? prediction.schedule_relationship === \"skipped\" ||\n      prediction.schedule_relationship === \"cancelled\"\n    : false;\n\nexport const hasPredictionTime = ({\n  time_data_with_crowding_list: timeDataList\n}: HeadsignWithCrowding): boolean =>\n  !!(\n    timeDataList &&\n    timeDataList[0] &&\n    timeDataList[0].time_data &&\n    timeDataList[0].time_data.prediction &&\n    timeDataList[0].time_data.prediction.time\n  );\n","import { Mode, Route, RouteType } from \"../__v3api\";\n\nconst isRouteType = (obj: Route | RouteType): obj is RouteType =>\n  typeof obj === \"number\";\n\nexport const isFerryRoute = ({ type }: Route): boolean => type === 4;\n\nexport const isABusRoute = ({ type }: Route): boolean => type === 3;\n\nexport const isSubwayRoute = ({ type }: Route): boolean =>\n  type === 1 || type === 0;\n\nconst isCommuterRailRouteType = (type: RouteType): boolean => type === 2;\n\nexport const isACommuterRailRoute = (routeOrType: Route | RouteType): boolean =>\n  isRouteType(routeOrType)\n    ? isCommuterRailRouteType(routeOrType)\n    : isCommuterRailRouteType(routeOrType.type);\n\nexport const isAGreenLineRoute = ({ id }: Route): boolean =>\n  id.startsWith(\"Green\");\n\nexport const isASilverLineRoute = (routeOrRouteId: Route | string): boolean => {\n  const id =\n    typeof routeOrRouteId === \"string\" ? routeOrRouteId : routeOrRouteId.id;\n  return [\"741\", \"742\", \"743\", \"746\", \"749\", \"751\"].includes(id);\n};\n\nexport const RAPID_TRANSIT = \"rapid_transit\";\nexport const RAIL_REPLACEMENT_BUS = \"rail_replacement_bus\";\n\nexport const isRapidTransit = ({ description }: Route): boolean =>\n  description === RAPID_TRANSIT;\nexport const isGreenLine = ({ id }: Route): boolean => id === \"Green\";\nexport const isRailReplacementBus = ({ description }: Route): boolean =>\n  description === RAIL_REPLACEMENT_BUS;\n\nconst routeTypesToMode: {\n  [key in RouteType]: Mode;\n} = {\n  0: \"subway\",\n  1: \"subway\",\n  2: \"commuter_rail\",\n  3: \"bus\",\n  4: \"ferry\"\n};\n\nexport const modeForRoute = ({ type }: Route): Mode => routeTypesToMode[type];\n","import React, { ReactElement } from \"react\";\nimport { Stop } from \"../../__v3api\";\nimport { accessibleIcon } from \"../../helpers/icon\";\nimport { Dispatch, clickFeaturePillAction } from \"../state\";\n\nconst StopAccessibilityIcon = (\n  { accessibility }: Stop,\n  isBusStop: boolean,\n  dispatch?: Dispatch\n): ReactElement<HTMLElement> | false =>\n  // NOTE: Bus stops are always considered accessible, see\n  // https://app.asana.com/0/1201653980996886/1201894234147725/f\n  (isBusStop || accessibility.includes(\"accessible\")) && (\n    <a\n      className=\"m-stop-page__access-icon\"\n      href=\"#header-accessibility\"\n      onClick={() =>\n        dispatch && dispatch(clickFeaturePillAction(\"accessibility\"))\n      }\n    >\n      <span className=\"m-stop-page__icon\">\n        {accessibleIcon(\"c-svg__icon-accessible-default\")}\n      </span>\n    </a>\n  );\n\nexport default StopAccessibilityIcon;\n","import React, { ReactElement } from \"react\";\nimport { Stop, EnhancedRoute, DirectionId } from \"../../__v3api\";\nimport { RouteWithDirection } from \"./__stop\";\nimport { modeIcon, parkingIcon } from \"../../helpers/icon\";\nimport { isABusRoute } from \"../../models/route\";\nimport accessible from \"./StopAccessibilityIcon\";\nimport { routesWithDirectionsAreAllBusStops } from \"../../helpers/routes\";\n\nconst formatMilesToFeet = (miles: number): number => Math.floor(miles * 5280.0);\n\nconst routeNameBasedOnDirection = (\n  route: EnhancedRoute,\n  directionId: DirectionId | null\n): string => {\n  if (directionId === null || route.type !== 3) {\n    return route.long_name;\n  }\n\n  const destination = route.direction_destinations[directionId];\n  return destination === null ? route.long_name : destination;\n};\n\ninterface Props {\n  stop: Stop;\n  routesWithDirection?: RouteWithDirection[];\n  routes?: EnhancedRoute[];\n  distance?: number;\n  distanceFormatted?: string;\n}\n\nconst renderDistance = (\n  distance: number | undefined,\n  distanceFormatted: string | undefined\n): ReactElement<HTMLElement> | null => {\n  if (distance) {\n    return (\n      <span className=\"c-stop-card__distance\">\n        {formatMilesToFeet(distance)} ft\n      </span>\n    );\n  }\n  if (distanceFormatted) {\n    return <span className=\"c-stop-card__distance\">{distanceFormatted}</span>;\n  }\n  return null;\n};\n\nconst StopCard = ({\n  stop,\n  distance,\n  distanceFormatted,\n  routesWithDirection = [],\n  routes = []\n}: Props): ReactElement<HTMLElement> => {\n  const routesToRender =\n    routesWithDirection.length === 0 && routes.length > 0\n      ? routes.map(route => ({\n          route,\n          // eslint-disable-next-line camelcase\n          direction_id: null\n        }))\n      : routesWithDirection;\n\n  const allAreBusStops = routesWithDirectionsAreAllBusStops(routesToRender);\n\n  return (\n    <div className=\"c-stop-card\">\n      {renderDistance(distance, distanceFormatted)}\n      <a className=\"c-stop-card__stop-name\" href={`/stops/${stop.id}`}>\n        {stop.name}\n      </a>\n      <div className=\"c-stop-card__icon-container\">\n        {accessible(stop, allAreBusStops)}\n        {stop.parking_lots.length > 0 ? (\n          <span className=\"c-stop-page__icon\">\n            {parkingIcon(\"c-svg__icon-parking-default u-color-gray-light\")}\n          </span>\n        ) : null}\n      </div>\n      {routesToRender &&\n        routesToRender.map(({ route, direction_id: directionId }) => (\n          <div\n            className=\"c-stop-card__route\"\n            key={`suggestedTransferRoute${route.id}`}\n          >\n            {isABusRoute(route) && !route.name.startsWith(\"SL\") ? (\n              <div className=\"c-stop-card__bus-pill u-bg--bus u-small-class\">\n                {route.name}\n              </div>\n            ) : (\n              modeIcon(route.id)\n            )}\n            <a\n              href={`/schedules/${route.id}${\n                directionId !== null ? `?direction_id=${directionId}` : \"\"\n              }`}\n              className=\"c-stop-card__route-link\"\n            >\n              {routeNameBasedOnDirection(route, directionId)}\n            </a>\n          </div>\n        ))}\n    </div>\n  );\n};\n\nexport default StopCard;\n","import { Mode } from \"../__v3api\";\nimport { ClickExpandableBlockAction } from \"../components/ExpandableBlock\";\nimport { TypedRoutes } from \"./components/__stop\";\n\nexport type SelectedStopType = string | null;\nexport type SelectedTabType = string;\nexport type Dispatch = (action: Action) => void;\nexport type ExpandableBlockName = \"parking\" | \"accessibility\";\nexport interface ExpandableBlockState {\n  parking: boolean;\n  accessibility: boolean;\n}\n\nexport interface State {\n  expandedBlocks: ExpandableBlockState;\n  focusedBlock?: ExpandableBlockName;\n  routes: TypedRoutes[];\n  selectedStopId: SelectedStopType;\n  selectedModes: Mode[];\n  shouldFilterStopCards: boolean;\n  selectedTab: string;\n}\n\ntype StopActionType = \"CLICK_MARKER\";\ntype ModeActionType = \"CLICK_MODE_FILTER\";\ntype RoutePillActionType = \"CLICK_ROUTE_PILL\";\ntype TabActionType = \"SWITCH_TAB\";\ntype FeaturePillActionType = \"CLICK_FEATURE_PILL\";\ntype UpdateRoutesType = \"UPDATE_ROUTES\";\n\nexport interface StopAction {\n  type: StopActionType;\n  payload: {\n    stopId: SelectedStopType;\n  };\n}\n\nexport interface ModeAction {\n  type: ModeActionType;\n  payload: {\n    mode: Mode;\n  };\n}\n\nexport interface RoutePillAction {\n  type: RoutePillActionType;\n  payload: {\n    mode: Mode;\n  };\n}\n\nexport interface TabAction {\n  type: TabActionType;\n  payload: {\n    tab: SelectedTabType;\n  };\n}\n\nexport interface FeaturePillAction {\n  type: FeaturePillActionType;\n  payload: {\n    name: ExpandableBlockName;\n  };\n}\nexport interface UpdateRoutesAction {\n  type: UpdateRoutesType;\n  payload: {\n    routes: TypedRoutes[];\n  };\n}\n\ntype Action =\n  | StopAction\n  | ModeAction\n  | RoutePillAction\n  | FeaturePillAction\n  | ClickExpandableBlockAction\n  | UpdateRoutesAction\n  | TabAction;\n\nexport const clickMarkerAction = (stopId: SelectedStopType): StopAction => ({\n  type: \"CLICK_MARKER\",\n  payload: { stopId }\n});\n\nexport const clickModeAction = (mode: Mode): ModeAction => ({\n  type: \"CLICK_MODE_FILTER\",\n  payload: { mode }\n});\n\nexport const clickRoutePillAction = (mode: Mode): RoutePillAction => ({\n  type: \"CLICK_ROUTE_PILL\",\n  payload: { mode }\n});\n\nexport const clickTabAction = (tab: string): TabAction => ({\n  type: \"SWITCH_TAB\",\n  payload: { tab }\n});\n\nexport const clickFeaturePillAction = (\n  name: ExpandableBlockName\n): FeaturePillAction => ({\n  type: \"CLICK_FEATURE_PILL\",\n  payload: { name }\n});\n\nexport const updateRoutesAction = (\n  routes: TypedRoutes[]\n): UpdateRoutesAction => ({\n  type: \"UPDATE_ROUTES\",\n  payload: { routes }\n});\n\nconst stopReducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"CLICK_MARKER\": {\n      const target =\n        state.selectedStopId === action.payload.stopId\n          ? null\n          : action.payload.stopId;\n\n      return {\n        ...state,\n        focusedBlock: undefined,\n        selectedStopId: target,\n        shouldFilterStopCards: !!target\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nconst updateModes = (selectedModes: Mode[], mode: Mode): Mode[] =>\n  selectedModes.includes(mode)\n    ? selectedModes.filter(existingMode => !(existingMode === mode))\n    : [...selectedModes, mode];\n\nconst modeReducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"CLICK_MODE_FILTER\":\n      return {\n        ...state,\n        focusedBlock: undefined,\n        selectedTab: \"info\",\n        selectedModes: updateModes(state.selectedModes, action.payload.mode),\n        shouldFilterStopCards: true\n      };\n\n    case \"CLICK_ROUTE_PILL\":\n      return {\n        ...state,\n        focusedBlock: undefined,\n        selectedTab: \"info\",\n        selectedModes: [action.payload.mode],\n        shouldFilterStopCards: true\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst tabReducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"SWITCH_TAB\":\n      return {\n        ...state,\n        focusedBlock: undefined,\n        selectedTab: action.payload.tab\n      };\n\n    default:\n      return state;\n  }\n};\nconst sidebarReducer = (state: State, action: Action): State => {\n  const { expandedBlocks } = state;\n\n  switch (action.type) {\n    case \"CLICK_FEATURE_PILL\":\n      expandedBlocks[action.payload.name] = true;\n      return {\n        ...state,\n        expandedBlocks,\n        focusedBlock: action.payload.name,\n        selectedTab: \"info\"\n      };\n\n    case \"CLICK_EXPANDABLE_BLOCK\":\n      if (\n        action.payload.id === \"parking\" ||\n        action.payload.id === \"accessibility\"\n      ) {\n        expandedBlocks[action.payload.id] = !action.payload.expanded;\n        return {\n          ...state,\n          expandedBlocks,\n          selectedTab: \"info\"\n        };\n      }\n\n      return state;\n\n    default:\n      return state;\n  }\n};\n\nconst routesReducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"UPDATE_ROUTES\":\n      return {\n        ...state,\n        routes: action.payload.routes\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const reducer = (state: State, action: Action): State =>\n  [tabReducer, stopReducer, modeReducer, routesReducer, sidebarReducer].reduce(\n    (acc, fn) => fn(acc, action),\n    state\n  );\n\nexport const initialState = (tab: string, routes: TypedRoutes[]): State => ({\n  expandedBlocks: {\n    accessibility: true,\n    parking: false\n  },\n  routes,\n  selectedStopId: null,\n  selectedModes: [],\n  shouldFilterStopCards: false,\n  selectedTab: tab\n});\n","import React, { ReactElement } from \"react\";\nimport { Mode } from \"../../__v3api\";\nimport { Dispatch, clickModeAction } from \"../state\";\nimport { ModeFilter } from \"../../components/ModeFilter\";\n\ninterface Props {\n  selectedModes: Mode[];\n  dispatch: Dispatch;\n}\n\nconst ModeFilterContainer = ({\n  selectedModes,\n  dispatch\n}: Props): ReactElement<HTMLElement> => {\n  const isModeSelected = (mode: Mode): boolean => selectedModes.includes(mode);\n\n  const handleModeClick = (mode: Mode): void => {\n    const updatedModes = isModeSelected(mode)\n      ? selectedModes.filter(existingMode => !(existingMode === mode))\n      : [...selectedModes, mode];\n\n    dispatch(clickModeAction(updatedModes));\n  };\n\n  return (\n    <ModeFilter\n      isModeSelected={isModeSelected}\n      onModeClickAction={handleModeClick}\n    />\n  );\n};\n\nexport default ModeFilterContainer;\n","import React, { ReactElement } from \"react\";\nimport GreenLineIconSmall from \"../../../static/images/icon-green-line-small.svg\";\nimport RedLineIconSmall from \"../../../static/images/icon-red-line-small.svg\";\nimport OrangeLineIconSmall from \"../../../static/images/icon-orange-line-small.svg\";\nimport BlueLineIconSmall from \"../../../static/images/icon-blue-line-small.svg\";\nimport MattapanSmall from \"../../../static/images/icon-mattapan-line-small.svg\";\nimport CommuterRailIconSmall from \"../../../static/images/icon-mode-commuter-rail-small.svg\";\nimport BusIconSmall from \"../../../static/images/icon-mode-bus-small.svg\";\nimport FerryIconSmall from \"../../../static/images/icon-mode-ferry-small.svg\";\nimport StationSmall from \"../../../static/images/icon-circle-t-small.svg\";\nimport SubwaySmall from \"../../../static/images/icon-mode-subway-small.svg\";\n\ninterface Props {\n  type: string;\n}\n\nconst icons = {\n  \"green_line-small\": GreenLineIconSmall,\n  \"red_line-small\": RedLineIconSmall,\n  \"orange_line-small\": OrangeLineIconSmall,\n  \"blue_line-small\": BlueLineIconSmall,\n  \"mattapan_line-small\": MattapanSmall,\n  \"commuter_rail-small\": CommuterRailIconSmall,\n  \"bus-small\": BusIconSmall,\n  \"ferry-small\": FerryIconSmall,\n  \"subway-small\": SubwaySmall\n};\n\nconst ModeIcon = ({ type }: Props): ReactElement<HTMLElement> => {\n  // @ts-ignore\n  const icon = icons[`${type}-small`] || StationSmall;\n\n  return (\n    <span\n      className=\"m-tnm-sidebar__mode-icon\"\n      // eslint-disable-next-line react/no-danger\n      dangerouslySetInnerHTML={{ __html: icon }}\n    />\n  );\n};\n\nexport default ModeIcon;\n","/* eslint-disable react/prefer-stateless-function */\nimport React, { ReactElement } from \"react\";\nimport useSWR from \"swr\";\nimport StopCard from \"../../components/StopCard\";\nimport {\n  Direction,\n  StopWithDirections,\n  RouteWithStopsWithDirections,\n  Alert\n} from \"../../__v3api\";\nimport { Dispatch } from \"../state\";\nimport { directionIsEmpty } from \"../../components/Direction\";\nimport { modeByV3ModeType } from \"../../components/ModeFilter\";\nimport RouteCardHeader from \"../../components/RouteCardHeader\";\nimport { isABusRoute } from \"../../models/route\";\nimport { isHighSeverityOrHighPriority } from \"../../models/alert\";\nimport { fetchJsonOrThrow, isFetchFailed } from \"../../helpers/fetch-json\";\n\ninterface Props {\n  route: RouteWithStopsWithDirections;\n  dispatch: Dispatch;\n}\n\nconst everyDirectionIsEmpty = (directions: Direction[]): boolean =>\n  directions.every(directionIsEmpty);\n\nexport const fetchAlerts = async (routeId: string): Promise<Alert[]> => {\n  const results = await fetchJsonOrThrow<Alert[]>(\n    `/api/alerts?route_ids=${routeId}`\n  );\n  if (isFetchFailed(results)) {\n    throw new Error(\n      `Failed to fetch Alert information: ${results.status} ${results.statusText}`\n    );\n  }\n\n  return results.filter(isHighSeverityOrHighPriority);\n};\n\nconst routeIsEmpty = (route: RouteWithStopsWithDirections): boolean =>\n  route.stops_with_directions.every(stop =>\n    everyDirectionIsEmpty(stop.directions)\n  );\n\nconst filterStops = (\n  route: RouteWithStopsWithDirections\n): StopWithDirections[] => {\n  // show the closest two stops for bus, in order to display both inbound and outbound stops\n\n  const count = isABusRoute(route.route) ? 2 : 1;\n  return route.stops_with_directions.slice(0, count);\n};\n\nconst RouteCard = ({\n  route,\n  dispatch\n}: Props): ReactElement<HTMLElement> | null => {\n  const mode = modeByV3ModeType[route.route.type];\n\n  const { data: alerts } = useSWR<Alert[]>(`${route.route.id}`, fetchAlerts);\n\n  if (routeIsEmpty(route)) {\n    return null;\n  }\n\n  return (\n    <div className=\"m-tnm-sidebar__route\" data-mode={mode}>\n      <RouteCardHeader route={route.route} alerts={alerts || []} />\n      {filterStops(route).map(\n        stopWithDirections =>\n          !everyDirectionIsEmpty(stopWithDirections.directions) && (\n            <StopCard\n              key={stopWithDirections.stop.id}\n              stop={stopWithDirections.stop}\n              distance={stopWithDirections.distance}\n              directions={stopWithDirections.directions}\n              route={route.route}\n              dispatch={dispatch}\n            />\n          )\n      )}\n    </div>\n  );\n};\n\nexport default RouteCard;\n","import React, { ReactElement } from \"react\";\nimport { Stop } from \"../../__v3api\";\nimport { clickStopPillAction, Dispatch } from \"../state\";\nimport { handleReactEnterKeyPress } from \"../../helpers/keyboard-events-react\";\n\ninterface Props {\n  selectedStop: Stop | undefined;\n  dispatch: Dispatch;\n  showPill: boolean;\n}\n\nconst RouteSidebarPills = (props: Props): ReactElement<HTMLElement> | null => {\n  const { dispatch, selectedStop, showPill } = props;\n  const onClickPill = (): void => dispatch(clickStopPillAction());\n  return showPill && selectedStop ? (\n    <>\n      <div className=\"m-tnm-sidebar__separator\" />\n      <span\n        role=\"button\"\n        tabIndex={0}\n        className=\"m-tnm-sidebar__pill\"\n        onClick={onClickPill}\n        onKeyPress={e => handleReactEnterKeyPress(e, onClickPill)}\n        aria-label={`Remove filtering by ${selectedStop.name}`}\n      >\n        <span className=\"m-tnm-sidebar__pill-name\">{selectedStop.name}</span>\n        <span className=\"m-tnm-sidebar__pill-close fa fa-times-circle\" />\n      </span>\n    </>\n  ) : null;\n};\n\nexport default RouteSidebarPills;\n","import React, { ReactElement } from \"react\";\nimport { modeByV3ModeType } from \"../../components/ModeFilter\";\nimport { Dispatch } from \"../state\";\nimport { Mode, RouteWithStopsWithDirections, Stop } from \"../../__v3api\";\nimport RouteCard from \"./RouteCard\";\nimport RouteSidebarPills from \"./RouteSidebarPills\";\nimport ModeFilterContainer from \"./ModeFilterContainer\";\nimport SidebarTitle from \"./SidebarTitle\";\n\ninterface Props {\n  data: RouteWithStopsWithDirections[];\n  dispatch: Dispatch;\n  selectedStopId: string | null;\n  shouldFilterStopCards: boolean;\n  selectedStop: Stop | undefined;\n  selectedModes: Mode[];\n  emptyMessage: ReactElement<HTMLElement>;\n}\n\ninterface FilterOptions {\n  stopId: string | null;\n  modes: Mode[];\n}\n\nconst filterDataByModes = (\n  data: RouteWithStopsWithDirections[],\n  { modes }: FilterOptions\n): RouteWithStopsWithDirections[] => {\n  // if there are no selections or all selections, do not filter\n  if (modes.length === 0 || modes.length === 3) {\n    return data;\n  }\n  return data.filter(route =>\n    modes.reduce((accumulator: boolean, mode: Mode) => {\n      if (accumulator === true) {\n        return accumulator;\n      }\n      return modeByV3ModeType[route.route.type] === mode;\n    }, false)\n  );\n};\n\nconst filterDataByStopId = (\n  data: RouteWithStopsWithDirections[],\n  { stopId }: FilterOptions\n): RouteWithStopsWithDirections[] => {\n  if (stopId === null) {\n    return data;\n  }\n  return data.reduce(\n    (\n      accumulator: RouteWithStopsWithDirections[],\n      route: RouteWithStopsWithDirections\n    ): RouteWithStopsWithDirections[] => {\n      // eslint-disable-next-line camelcase\n      const stops = route.stops_with_directions.filter(\n        // eslint-disable-next-line camelcase\n        stop_with_directions => stop_with_directions.stop.id === stopId\n      );\n      if (stops.length === 0) {\n        return accumulator;\n      }\n      // eslint-disable-next-line camelcase\n      return accumulator.concat({ ...route, stops_with_directions: stops });\n    },\n    []\n  );\n};\n\nexport const filterData = (\n  data: RouteWithStopsWithDirections[],\n  selectedStopId: string | null,\n  selectedModes: Mode[],\n  shouldFilter: boolean\n): RouteWithStopsWithDirections[] => {\n  if (shouldFilter === false) {\n    return data;\n  }\n\n  const options: FilterOptions = {\n    stopId: selectedStopId,\n    modes: selectedModes\n  };\n\n  return [filterDataByStopId, filterDataByModes].reduce(\n    (accumulator, fn) => fn(accumulator, options),\n    data\n  );\n};\n\nconst RoutesSidebar = ({\n  data,\n  dispatch,\n  selectedModes,\n  selectedStopId,\n  selectedStop,\n  shouldFilterStopCards,\n  emptyMessage\n}: Props): ReactElement<HTMLElement> => {\n  const filteredData = filterData(\n    data,\n    selectedStopId,\n    selectedModes,\n    shouldFilterStopCards\n  );\n  return (\n    <div className=\"m-tnm-sidebar\">\n      <div className=\"m-tnm-sidebar__fixed-header\">\n        <div className=\"m-tnm-sidebar__fixed-header-inner\">\n          <ModeFilterContainer\n            selectedModes={selectedModes}\n            dispatch={dispatch}\n          />\n          <RouteSidebarPills\n            selectedStop={selectedStop}\n            showPill={shouldFilterStopCards}\n            dispatch={dispatch}\n          />\n        </div>\n      </div>\n      <div className=\"m-tnm-sidebar__inner\">\n        <SidebarTitle dispatch={dispatch} viewType=\"Routes\" />\n        <div className=\"m-tnm-sidebar__cards\">\n          {filteredData.length > 0\n            ? filteredData.map(route => (\n                <RouteCard\n                  key={route.route.id}\n                  route={route}\n                  dispatch={dispatch}\n                />\n              ))\n            : emptyMessage}\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default RoutesSidebar;\n","import React, { ReactElement } from \"react\";\nimport { handleReactEnterKeyPress } from \"../../helpers/keyboard-events-react\";\nimport { clickViewChangeAction, Dispatch } from \"../state\";\n\ninterface Props {\n  dispatch: Dispatch;\n  viewType: string;\n}\n\nconst onClickViewChange = (dispatch: Dispatch): void =>\n  dispatch(clickViewChangeAction());\n\nconst SidebarTitle = ({\n  viewType,\n  dispatch\n}: Props): ReactElement<HTMLElement> => {\n  const onClick = (): void => onClickViewChange(dispatch);\n  return (\n    <div className=\"m-tnm-sidebar__header\">\n      <div className=\"m-tnm-sidebar__header-title\">\n        <h2>{`Nearby ${viewType}`}</h2>\n        <div\n          className=\"m-tnm-sidebar__view-change\"\n          role=\"button\"\n          tabIndex={0}\n          onClick={onClick}\n          onKeyPress={e => handleReactEnterKeyPress(e, onClick)}\n        >\n          Change view\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SidebarTitle;\n","import React, { ReactElement } from \"react\";\nimport { Mode, EnhancedRoute, Stop } from \"../../__v3api\";\nimport { RouteGroup } from \"./__tnm\";\nimport { Dispatch } from \"../state\";\nimport ModeIcon from \"./ModeIcon\";\nimport { useSMDown } from \"../../helpers/media-breakpoints-react\";\nimport { buttonProps } from \"../../components/StopCard\";\n\nexport const renderRoutesLabel = (\n  routes: EnhancedRoute[],\n  type: Mode\n): ReactElement<HTMLElement> =>\n  type === \"commuter_rail\" ? (\n    <a href={routes[0].href}>Commuter Rail</a>\n  ) : (\n    <span>\n      {type === \"bus\" ? \"Bus: \" : null}\n      {routes.map((route, i: number) => (\n        <React.Fragment key={route.id}>\n          <a href={route.href}>{route.name}</a>\n          {i !== routes.length - 1 ? \", \" : \"\"}\n        </React.Fragment>\n      ))}\n    </span>\n  );\n\nexport const renderRoutes = (\n  routes: EnhancedRoute[],\n  type: Mode\n): ReactElement<HTMLElement> => (\n  <div key={type} className=\"m-tnm-sidebar__stop-card-description\">\n    <span className=\"m-tnm-sidebar__stop-route-name\">\n      <ModeIcon type={type} />\n      {renderRoutesLabel(routes, type)}\n    </span>\n  </div>\n);\n\ninterface Props {\n  stop: Stop;\n  routes: RouteGroup[];\n  dispatch: Dispatch;\n  distance: string;\n}\n\nconst StopWithRoutesCard = ({\n  stop,\n  routes,\n  distance,\n  dispatch\n}: Props): ReactElement<HTMLElement> => {\n  const isSmallBreakpoint = useSMDown();\n  const containerProps = !isSmallBreakpoint\n    ? buttonProps(dispatch, stop.id)\n    : {};\n\n  return (\n    <div className=\"m-tnm-sidebar__stop-card\" {...containerProps}>\n      <div className=\"m-tnm-sidebar__stop-card-header\">\n        <a className=\"m-tnm-sidebar__stop-card-name\" href={stop.href}>\n          {stop.name}\n        </a>\n        <div className=\"m-tnm-sidebar__stop-distance\">{distance}</div>\n      </div>\n      {routes.map(\n        ({ group_name: groupName, routes: routesForStop }: RouteGroup) =>\n          renderRoutes(routesForStop, groupName)\n      )}\n    </div>\n  );\n};\n\nexport default StopWithRoutesCard;\n","import React, { ReactElement } from \"react\";\nimport { Mode } from \"../../__v3api\";\nimport { StopWithRoutes } from \"./__tnm\";\nimport { Dispatch } from \"../state\";\nimport SidebarTitle from \"./SidebarTitle\";\nimport StopWithRoutesCard from \"./StopWithRoutesCard\";\nimport ModeFilterContainer from \"./ModeFilterContainer\";\nimport stopIncludesModes from \"../helpers/stop-includes-modes\";\n\ninterface Props {\n  data: StopWithRoutes[];\n  dispatch: Dispatch;\n  selectedStopId: string | null;\n  shouldFilterStopCards: boolean;\n  selectedModes: Mode[];\n  emptyMessage: ReactElement<HTMLElement>;\n}\n\ninterface FilterOptions {\n  stopId: string | null;\n  modes: Mode[];\n}\n\nconst filterDataByStopId = (\n  data: StopWithRoutes[],\n  { stopId }: FilterOptions\n): StopWithRoutes[] => {\n  if (stopId === null) {\n    return data;\n  }\n  const stopWithRoutes = data.find(d => d.stop.id === stopId);\n  return stopWithRoutes ? [stopWithRoutes] : data;\n};\n\nconst filterDataByModes = (\n  data: StopWithRoutes[],\n  { modes }: FilterOptions\n): StopWithRoutes[] => data.filter(stop => stopIncludesModes(stop, modes));\n\nexport const filterData = (\n  data: StopWithRoutes[],\n  selectedStopId: string | null,\n  selectedModes: Mode[],\n  shouldFilter: boolean\n): StopWithRoutes[] => {\n  if (shouldFilter === false) {\n    return data;\n  }\n\n  const options: FilterOptions = {\n    stopId: selectedStopId,\n    modes: selectedModes\n  };\n\n  return [filterDataByStopId, filterDataByModes].reduce(\n    (accumulator, fn) => fn(accumulator, options),\n    data\n  );\n};\n\nconst StopsSidebar = ({\n  dispatch,\n  data,\n  selectedStopId,\n  selectedModes,\n  shouldFilterStopCards,\n  emptyMessage\n}: Props): ReactElement<HTMLElement> => {\n  const filteredData = filterData(\n    data,\n    selectedStopId,\n    selectedModes,\n    shouldFilterStopCards\n  );\n  return (\n    <div className=\"m-tnm-sidebar\" id=\"tnm-sidebar-by-stops\">\n      <div className=\"m-tnm-sidebar__fixed-header\">\n        <div className=\"m-tnm-sidebar__fixed-header-inner\">\n          <ModeFilterContainer\n            selectedModes={selectedModes}\n            dispatch={dispatch}\n          />\n        </div>\n      </div>\n      <div className=\"m-tnm-sidebar__inner\">\n        <SidebarTitle dispatch={dispatch} viewType=\"Stops\" />\n        <div className=\"m-tnm-sidebar__cards\">\n          {filteredData.length > 0\n            ? filteredData.map(({ stop, routes, distance }) => (\n                <StopWithRoutesCard\n                  key={stop.id}\n                  stop={stop}\n                  routes={routes}\n                  dispatch={dispatch}\n                  distance={distance}\n                />\n              ))\n            : emptyMessage}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default StopsSidebar;\n","import React, { useReducer, ReactElement, useRef, useEffect } from \"react\";\nimport useInterval from \"use-interval\";\nimport TransitNearMeMap from \"./leaflet/TransitNearMeMap\";\nimport RoutesSidebar from \"./RoutesSidebar\";\nimport StopsSidebar from \"./StopsSidebar\";\nimport { Stop, Mode, RouteWithStopsWithDirections } from \"../../__v3api\";\nimport {\n  StopWithRoutes,\n  StopsWithDistances,\n  RealtimeScheduleData\n} from \"./__tnm\";\nimport { MapData } from \"../../leaflet/components/__mapdata\";\nimport {\n  reducer,\n  initialState,\n  SelectedStopType,\n  State,\n  Dispatch,\n  realtimeScheduleDataAction,\n  firstDataLoadedAction\n} from \"../state\";\nimport { QueryParams } from \"../../helpers/query\";\n\ninterface Props {\n  mapData: MapData;\n  mapId: string;\n  query: QueryParams;\n  stopsWithDistances: StopsWithDistances;\n  routesWithRealtimeSchedules: RouteWithStopsWithDirections[];\n  stopsWithRoutes: StopWithRoutes[];\n  selectedStopId?: string | null;\n}\n\nexport const getSelectedStop = (\n  stopsWithRoutes: StopWithRoutes[],\n  selectedStopId: SelectedStopType\n): Stop | undefined => {\n  const stopWithRoute = stopsWithRoutes.find(\n    stopWithRoutes => stopWithRoutes.stop.id === selectedStopId\n  );\n  return stopWithRoute ? stopWithRoute.stop : undefined;\n};\n\nconst validateModeFilter = (acc: Mode[], mode: string): Mode[] =>\n  mode === \"subway\" || mode === \"bus\" || mode === \"commuter_rail\"\n    ? acc.concat([mode])\n    : acc;\n\nexport const modesFromQuery = (query: QueryParams): Mode[] =>\n  query.filter ? query.filter.split(\",\").reduce(validateModeFilter, []) : [];\n\nexport const fetchRealtimeSchedules = async (\n  stopIds: string[],\n  dispatch: Dispatch\n): Promise<void> => {\n  const responses = await Promise.all(\n    stopIds.map(async stopId =>\n      window.fetch(`/api/realtime/stops/?stops=${stopId}`)\n    )\n  );\n\n  const json = await Promise.all(\n    responses\n      .filter(response => response && response.ok)\n      .map(async response => {\n        const { payload } = await response.json();\n        return payload;\n      })\n  );\n\n  json.forEach(jsonData => {\n    const data = jsonData.filter(\n      ({\n        predicted_schedules_by_route_pattern: predictedSchedulesByRoutePattern\n      }: RealtimeScheduleData) =>\n        Object.keys(predictedSchedulesByRoutePattern).length > 0\n    );\n    dispatch(realtimeScheduleDataAction(data));\n  });\n\n  dispatch(firstDataLoadedAction());\n};\n\nconst emptyMessage = (pendingFirstData: boolean): ReactElement<HTMLElement> => (\n  <div className=\"m-tnm-sidebar__empty\">\n    {pendingFirstData === true ? (\n      <div className=\"c-spinner__container\">\n        <div className=\"c-spinner\">Loading...</div>\n      </div>\n    ) : (\n      \"Were sorry, there are no nearby routes or stops matching your filters and location.\"\n    )}\n  </div>\n);\n\nconst TransitNearMe = ({\n  mapData,\n  mapId,\n  query,\n  stopsWithDistances,\n  routesWithRealtimeSchedules,\n  stopsWithRoutes,\n  selectedStopId = null\n}: Props): ReactElement<HTMLElement> => {\n  const selectedModes = modesFromQuery(query);\n  const initialStateWithModes: State = {\n    ...initialState,\n    selectedModes,\n    stopsWithDistances,\n    shouldFilterStopCards: selectedModes.length > 0,\n    routesWithRealtimeSchedules,\n    stopsWithRoutes,\n    selectedStopId\n  };\n  const [state, dispatch] = useReducer(reducer, initialStateWithModes);\n  const mapRef = useRef(null);\n  useEffect(() => {\n    if (mapRef && mapRef.current && mapData.markers.length > 0) {\n      /* istanbul ignore next */\n      // @ts-ignore\n      mapRef.current!.scrollIntoView();\n    }\n  }, [mapData.markers.length, state.stopsWithRoutes.length]);\n  const selectedStop = getSelectedStop(\n    state.stopsWithRoutes,\n    state.selectedStopId\n  );\n\n  /* istanbul ignore next */\n  useInterval(\n    () =>\n      fetchRealtimeSchedules(\n        stopsWithDistances.stops.map(stop => stop.id),\n        dispatch\n      ),\n    30000,\n    true\n  );\n\n  return (\n    <div className=\"m-tnm\">\n      {state.routesView ? (\n        <RoutesSidebar\n          selectedStop={selectedStop}\n          selectedModes={state.selectedModes}\n          selectedStopId={state.selectedStopId}\n          dispatch={dispatch}\n          data={state.routesWithRealtimeSchedules}\n          shouldFilterStopCards={state.shouldFilterStopCards}\n          emptyMessage={emptyMessage(state.pendingFirstData)}\n        />\n      ) : (\n        <StopsSidebar\n          selectedModes={state.selectedModes}\n          selectedStopId={state.selectedStopId}\n          dispatch={dispatch}\n          data={state.stopsWithRoutes}\n          shouldFilterStopCards={state.shouldFilterStopCards}\n          emptyMessage={emptyMessage(state.pendingFirstData)}\n        />\n      )}\n      <h3 className=\"sr-only\">Map</h3>\n      <div\n        ref={mapRef}\n        id={mapId}\n        className=\"m-tnm__map\"\n        role=\"application\"\n        aria-label=\"Map with stops\"\n      >\n        <TransitNearMeMap\n          selectedStopId={state.selectedStopId}\n          dispatch={dispatch}\n          initialData={mapData}\n          selectedModes={state.selectedModes}\n          stopData={state.stopsWithRoutes}\n          shouldFilterMarkers={state.shouldFilterStopCards}\n          shouldCenterMapOnSelectedStop={state.shouldCenterMapOnSelectedStop}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default TransitNearMe;\n","import React, { useState, ReactElement } from \"react\";\nimport { LatLngBounds } from \"leaflet\";\nimport Leaflet, { Viewport } from \"react-leaflet\";\nimport { MapMarker } from \"../../../leaflet/components/__mapdata\";\nimport { StopsForMarkers } from \"./TransitNearMeMap\";\nimport MarkerWrapper from \"./MarkerWrapper\";\nimport {\n  Dispatch,\n  SelectedStopType,\n  resetCenterMapOnSelectedStop\n} from \"../../state\";\nimport { defaultZoomOpts } from \"../../../leaflet/components/Map\";\n\ntype State = Viewport;\n\nexport interface Props {\n  bounds: LatLngBounds | undefined;\n  dispatch: Dispatch;\n  markers: MapMarker[];\n  onClick: Function;\n  selectedStopId: SelectedStopType;\n  shouldCenterMapOnSelectedStop: boolean;\n  tileServerUrl: string;\n  tooltipData: StopsForMarkers;\n  visibleMarkers: MapMarker[];\n  zoom: number | undefined | null;\n}\n\nexport const centerMapByMarker = (\n  markers: MapMarker[],\n  selectedStopId: SelectedStopType\n): [number, number] => {\n  const marker = markers.find((m: MapMarker) => m.id === selectedStopId);\n  return [marker!.latitude, marker!.longitude];\n};\n\nexport const centerMap = (\n  shouldCenterMapOnSelectedStop: boolean,\n  selectedStopId: string | null,\n  markers: MapMarker[],\n  viewport: Viewport,\n  dispatch: Dispatch\n): Viewport => {\n  if (shouldCenterMapOnSelectedStop && selectedStopId) {\n    dispatch(resetCenterMapOnSelectedStop(selectedStopId));\n    return {\n      center: centerMapByMarker(markers, selectedStopId),\n      zoom: viewport.zoom\n    };\n  }\n  return viewport;\n};\n\nconst LeafletMap = ({\n  bounds,\n  dispatch,\n  markers,\n  onClick,\n  selectedStopId,\n  shouldCenterMapOnSelectedStop,\n  tileServerUrl,\n  tooltipData,\n  visibleMarkers,\n  zoom\n}: Props): ReactElement<HTMLElement> => {\n  /* eslint-disable */\n  const leaflet: typeof Leaflet = require(\"react-leaflet\");\n  const { Map, TileLayer } = leaflet;\n  /* eslint-enable */\n\n  // position map by selected stop or current viewport (when no longer selecting)\n  const [viewport, setViewport] = useState<State>({\n    center: undefined,\n    zoom\n  });\n  const onViewport = (view: Viewport): void => {\n    setViewport(view);\n  };\n\n  // determine position for map, either new center by selected stop or current center\n  const position = centerMap(\n    shouldCenterMapOnSelectedStop,\n    selectedStopId,\n    markers,\n    viewport,\n    dispatch\n  );\n\n  return (\n    <Map\n      viewport={position}\n      bounds={bounds}\n      onClick={onClick}\n      onViewportChange={onViewport}\n      {...defaultZoomOpts}\n    >\n      <TileLayer\n        attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url={`${tileServerUrl}/osm_tiles/{z}/{x}/{y}.png`}\n      />\n      {visibleMarkers.map(marker => (\n        <MarkerWrapper\n          key={`markerwrapper-${marker.id || Math.floor(Math.random() * 1000)}`}\n          marker={{\n            ...marker\n          }}\n          tooltipData={marker.id ? tooltipData[marker.id] : null}\n          tileServerUrl={tileServerUrl}\n          isSelected={selectedStopId === marker.id}\n          dispatch={dispatch}\n        />\n      ))}\n    </Map>\n  );\n};\n\nexport default LeafletMap;\n","import React, { ReactElement, useState } from \"react\";\nimport deepEqual from \"fast-deep-equal/react\";\nimport { Icon as IconType } from \"leaflet\";\nimport Leaflet from \"react-leaflet\";\nimport { MapMarker } from \"../../../leaflet/components/__mapdata\";\nimport { clickCurrentLocationAction } from \"../../../leaflet/state\";\nimport { clickMarkerAction, Dispatch } from \"../../state\";\nimport MapTooltip, {\n  Props as MapTooltipProps\n} from \"../../../leaflet/components/MapTooltip\";\n\nexport interface Props {\n  marker: MapMarker;\n  tileServerUrl: string;\n  dispatch: Dispatch;\n  isSelected: boolean;\n  tooltipData: MapTooltipProps | null;\n}\n\nexport const onClickMarker = (\n  id: string | null,\n  dispatch: Dispatch\n): Function => {\n  const clickAction =\n    id === \"current-location\" ? clickCurrentLocationAction : clickMarkerAction;\n  return () => dispatch(clickAction(id));\n};\n\nexport const buildIcon = (\n  markerIcon: string | null,\n  size: number[] | undefined,\n  hovered: boolean,\n  isSelected: boolean\n): IconType | undefined => {\n  if (typeof window !== \"undefined\") {\n    // eslint-disable-next-line global-require\n    const Icon = require(\"../../../leaflet/icon\").default;\n    if (!markerIcon) {\n      return undefined;\n    }\n    if (markerIcon === \"current-location-marker\") {\n      // Custom size for current-location marker and no hover icon\n      return Icon(`${markerIcon}`, {\n        icon_size: size, // eslint-disable-line camelcase\n        icon_anchor: [size![0] / 2, size![1] / 2] // eslint-disable-line camelcase\n      });\n    }\n    if (hovered || isSelected) {\n      return Icon(`${markerIcon}-hover`);\n    }\n    return Icon(markerIcon);\n  }\n  return undefined;\n};\n\nconst MarkerWrapper = ({\n  marker: {\n    id,\n    latitude,\n    longitude,\n    icon: markerIcon,\n    tooltip: initialTooltip,\n    size\n  },\n  tooltipData,\n  tileServerUrl,\n  dispatch,\n  isSelected\n}: Props): ReactElement<HTMLElement> | null => {\n  const [hovered, setHovered] = useState(false);\n  if (typeof window !== \"undefined\" && tileServerUrl !== \"\") {\n    // eslint-disable-next-line\n    const leaflet: typeof Leaflet = require(\"react-leaflet\");\n    const { Popup, Marker } = leaflet;\n    const toggleHovered = (): void => setHovered(!hovered);\n    const tooltipComponent = tooltipData ? (\n      <MapTooltip {...tooltipData} />\n    ) : (\n      initialTooltip\n    );\n    const icon: IconType | undefined = buildIcon(\n      markerIcon,\n      size,\n      hovered,\n      isSelected\n    );\n\n    // @ts-ignore react-leaftlet base classes make this difficult to type\n    const initMarker = (ref): void => {\n      // eslint-disable-line\n      if (ref) {\n        if (isSelected) {\n          ref.leafletElement.openPopup();\n        } else {\n          ref.leafletElement.closePopup();\n        }\n      }\n    };\n\n    return (\n      <Marker\n        ref={initMarker}\n        key={id || `marker-${Math.floor(Math.random() * 1000)}`}\n        position={[latitude, longitude]}\n        icon={icon}\n        onClick={onClickMarker(id, dispatch)}\n        onMouseOver={toggleHovered}\n        onFocus={toggleHovered}\n        onMouseOut={toggleHovered}\n        onBlur={toggleHovered}\n        keyboard={false}\n      >\n        {tooltipComponent ? (\n          <Popup\n            minWidth={320}\n            maxHeight={175}\n            onClose={() => isSelected && dispatch(clickMarkerAction(null))}\n          >\n            {tooltipComponent && (\n              <div className=\"m-tnm__address-marker\">{tooltipComponent}</div>\n            )}\n          </Popup>\n        ) : null}\n      </Marker>\n    );\n  }\n  return null;\n};\n\nexport default React.memo(MarkerWrapper, deepEqual);\n","import React, { ReactElement } from \"react\";\nimport deepEqual from \"fast-deep-equal/react\";\nimport { LatLngBounds } from \"leaflet\";\nimport { LatLng } from \"react-leaflet\";\nimport { MapData, MapMarker } from \"../../../leaflet/components/__mapdata\";\nimport stopIncludesModes from \"../../helpers/stop-includes-modes\";\nimport { clickMarkerAction, SelectedStopType, Dispatch } from \"../../state\";\nimport { StopWithRoutes } from \"../__tnm\";\nimport { Stop, EnhancedRoute, Mode } from \"../../../__v3api\";\nimport MapWrapper from \"./MapWrapper\";\n\ninterface Props {\n  initialData: MapData;\n  dispatch: Dispatch;\n  selectedStopId: SelectedStopType;\n  selectedModes: Mode[];\n  shouldCenterMapOnSelectedStop: boolean;\n  shouldFilterMarkers: boolean;\n  stopData: StopWithRoutes[];\n}\n\nconst halfMile = 0.008333;\nexport const withinHalfMile = (position: [number, number]): LatLngBounds => {\n  // eslint-disable-next-line\n  const { latLng, latLngBounds } = require(\"leaflet\");\n  const east: LatLng = latLng([position[0] + halfMile, position[1]]);\n  const west: LatLng = latLng([position[0] - halfMile, position[1]]);\n  return latLngBounds(east, west);\n};\n\nexport const boundsForMap = (\n  markers: MapMarker[],\n  defaultCenter: { latitude: number; longitude: number }\n): LatLngBounds | undefined => {\n  const currentLocation = markers.find(\n    (marker: MapMarker) => marker.id === \"current-location\"\n  );\n\n  if (currentLocation) {\n    return withinHalfMile([\n      currentLocation!.latitude,\n      currentLocation!.longitude\n    ]);\n  }\n  return withinHalfMile([defaultCenter!.latitude, defaultCenter!.longitude]);\n};\n\nexport const isMarkerVisible = (\n  stopData: StopWithRoutes | undefined,\n  shouldFilterMarkers: boolean,\n  selectedModes: Mode[]\n): boolean =>\n  shouldFilterMarkers && stopData\n    ? stopIncludesModes(stopData, selectedModes)\n    : true;\n\nexport interface StopsForMarkers {\n  [id: string]: {\n    stop: Stop;\n    routes: EnhancedRoute[];\n    distanceFormatted: string;\n  };\n}\n\nexport const buildStopsForMarkers = (\n  stopData: StopWithRoutes[]\n): StopsForMarkers => {\n  const emptyObject: StopsForMarkers = {};\n  return stopData.reduce((acc, { stop, routes, distance }) => {\n    acc[stop.id] = {\n      stop,\n      routes: routes\n        .map(r => r.routes)\n        .reduce((accFlat, routeList) => accFlat.concat(routeList), []),\n      distanceFormatted: distance\n    };\n    return acc;\n  }, emptyObject);\n};\n\nconst Component = ({\n  initialData: {\n    markers: initialMarkers,\n    tile_server_url: tileServerUrl,\n    zoom,\n    default_center: defaultCenter\n  },\n  shouldCenterMapOnSelectedStop,\n  selectedStopId,\n  stopData,\n  dispatch,\n  shouldFilterMarkers,\n  selectedModes\n}: Props): ReactElement<HTMLElement> | null => {\n  if (typeof window !== \"undefined\" && tileServerUrl !== \"\") {\n    // determine markers to filter from display, filter current location if no stops nearby\n    const visibleMarkers = stopData.length\n      ? initialMarkers.filter(m =>\n          isMarkerVisible(\n            stopData.find(stop => stop.stop.id === m.id),\n            shouldFilterMarkers,\n            selectedModes\n          )\n        )\n      : [];\n\n    // build data for stop tooltips\n    const stopsForMarker: StopsForMarkers = buildStopsForMarkers(stopData);\n    const bounds = boundsForMap(visibleMarkers, defaultCenter);\n    return (\n      <MapWrapper\n        zoom={zoom}\n        bounds={bounds}\n        onClick={() => dispatch(clickMarkerAction(null))}\n        tileServerUrl={tileServerUrl}\n        visibleMarkers={visibleMarkers}\n        markers={initialMarkers}\n        dispatch={dispatch}\n        selectedStopId={selectedStopId}\n        tooltipData={stopsForMarker}\n        shouldCenterMapOnSelectedStop={shouldCenterMapOnSelectedStop}\n      />\n    );\n  }\n  return null;\n};\n\nexport default React.memo(Component, deepEqual);\n","import dotProp from \"dot-prop-immutable\";\nimport {\n  RouteWithStopsWithDirections,\n  Stop,\n  EnhancedRoute,\n  PredictedOrScheduledTime,\n  Prediction,\n  Headsign\n} from \"../../__v3api\";\nimport {\n  RealtimeScheduleData,\n  PredictedSchedule,\n  PredictedScheduleByHeadsign,\n  StopWithRoutes,\n  DistanceByStopId\n} from \"../components/__tnm\";\n\nconst findRoute = (\n  data: RouteWithStopsWithDirections[],\n  routeId: string\n): [string, number] => {\n  const index = data.findIndex(({ route }) => route.id === routeId);\n  return index === -1 ? [\"add\", data.length] : [\"update\", index];\n};\n\nconst findStop = (\n  data: RouteWithStopsWithDirections[],\n  routeIndex: number,\n  stopId: string\n): [string, number] => {\n  const index = data[routeIndex].stops_with_directions.findIndex(\n    ({ stop }) => stop.id === stopId\n  );\n  return index === -1\n    ? [\"add\", data[routeIndex].stops_with_directions.length]\n    : [\"update\", index];\n};\n\nconst findHeadsign = (\n  data: RouteWithStopsWithDirections[],\n  routeIndex: number,\n  stopIndex: number,\n  directionIndex: number,\n  headsign: string\n): number => {\n  const index = data[routeIndex].stops_with_directions[stopIndex].directions[\n    directionIndex\n  ].headsigns.findIndex(({ name }) => name === headsign);\n  return index === -1\n    ? data[routeIndex].stops_with_directions[stopIndex].directions[\n        directionIndex\n      ].headsigns.length\n    : index;\n};\n\nconst setRoute = (\n  data: RouteWithStopsWithDirections[],\n  index: number,\n  route: EnhancedRoute\n): RouteWithStopsWithDirections[] =>\n  dotProp.set(\n    dotProp.set(data, `${index}.route`, route),\n    `${index}.stops_with_directions`,\n    []\n  );\n\nconst setStop = (\n  data: RouteWithStopsWithDirections[],\n  routeIndex: number,\n  index: number,\n  stop: Stop,\n  distance: string\n): RouteWithStopsWithDirections[] => {\n  let nextData = dotProp.set(\n    data,\n    `${routeIndex}.stops_with_directions.${index}.stop`,\n    stop\n  );\n  nextData = dotProp.set(\n    nextData,\n    `${routeIndex}.stops_with_directions.${index}.distance`,\n    distance\n  );\n  nextData = dotProp.set(\n    nextData,\n    `${routeIndex}.stops_with_directions.${index}.directions`,\n    // eslint-disable-next-line camelcase\n    [\n      { headsigns: [], direction_id: 0 },\n      { headsigns: [], direction_id: 1 }\n    ]\n  );\n\n  return nextData;\n};\n\nconst getFirstTrainNumber = (\n  predictedSchedules: PredictedSchedule[]\n): string | undefined => {\n  const predictedSchedule = predictedSchedules.find(\n    ({ schedule }) => schedule !== null && schedule.train_number !== undefined\n  );\n  return predictedSchedule\n    ? predictedSchedule.schedule.train_number\n    : undefined;\n};\n\nconst buildHeadsign = (\n  headsign: string,\n  predictedSchedulesByHeadsign: PredictedScheduleByHeadsign\n): Headsign => {\n  const headsignNameFromSchedule = predictedSchedulesByHeadsign[\n    headsign\n  ].predicted_schedules.map(\n    ({ prediction, schedule }) => prediction || schedule\n  );\n  const headsignDisplayName = headsignNameFromSchedule[0].headsign;\n  return {\n    name: headsign,\n    headsign: headsignDisplayName,\n    times: predictedSchedulesByHeadsign[headsign].predicted_schedules.map(\n      ({ prediction, schedule }): PredictedOrScheduledTime => {\n        const shortPrediction: Prediction | null = prediction\n          ? {\n              track: prediction.track,\n              time: prediction.time,\n              status: null,\n              // eslint-disable-next-line camelcase\n              schedule_relationship: prediction.schedule_relationship\n            }\n          : null;\n        const scheduledTime = schedule ? schedule.time : null;\n        const delay = 0;\n\n        return {\n          prediction: shortPrediction,\n          // eslint-disable-next-line camelcase\n          scheduled_time: scheduledTime || null,\n          delay\n        };\n      }\n    ),\n\n    // eslint-disable-next-line camelcase\n    train_number:\n      getFirstTrainNumber(\n        predictedSchedulesByHeadsign[headsign].predicted_schedules\n      ) || null\n  };\n};\n\nconst setHeadsigns = (\n  data: RouteWithStopsWithDirections[],\n  routeIndex: number,\n  stopIndex: number,\n  predictedScheduleByHeadsign: PredictedScheduleByHeadsign\n): RouteWithStopsWithDirections[] =>\n  Object.keys(predictedScheduleByHeadsign).reduce(\n    (accumulator: RouteWithStopsWithDirections[], headsign: string) => {\n      const { direction_id: directionId } = predictedScheduleByHeadsign[\n        headsign\n      ];\n      const nextData = accumulator;\n\n      const headsignIndex = findHeadsign(\n        nextData,\n        routeIndex,\n        stopIndex,\n        directionId,\n        headsign\n      );\n\n      return dotProp.set(\n        nextData,\n        `${routeIndex}.stops_with_directions.${stopIndex}.directions.${directionId}.headsigns.${headsignIndex}`,\n        buildHeadsign(headsign, predictedScheduleByHeadsign)\n      );\n    },\n    data\n  );\n\nconst transformRoutes = (\n  distances: DistanceByStopId,\n  data: RouteWithStopsWithDirections[],\n  realtimeScheduleData: RealtimeScheduleData[]\n): RouteWithStopsWithDirections[] =>\n  realtimeScheduleData.reduce(\n    (\n      accumulator: RouteWithStopsWithDirections[],\n      {\n        route,\n        stop,\n        predicted_schedules_by_route_pattern: predictedScheduleByHeadsign\n      }: RealtimeScheduleData\n    ) => {\n      let nextData = accumulator;\n      const [routeState, routeIndex] = findRoute(accumulator, route.id);\n      if (routeState === \"add\") {\n        nextData = setRoute(nextData, routeIndex, route);\n      }\n      const [stopState, stopIndex] = findStop(nextData, routeIndex, stop.id);\n      if (stopState === \"add\") {\n        nextData = setStop(\n          nextData,\n          routeIndex,\n          stopIndex,\n          stop,\n          distances[stop.id]\n        );\n      }\n      nextData = setHeadsigns(\n        nextData,\n        routeIndex,\n        stopIndex,\n        predictedScheduleByHeadsign\n      );\n\n      return nextData;\n    },\n    data\n  );\n\nconst findStopInStops = (\n  data: StopWithRoutes[],\n  stopId: string\n): [string, number] => {\n  const index = data.findIndex(({ stop }) => stop.id === stopId);\n  return index === -1 ? [\"add\", data.length] : [\"update\", index];\n};\n\nconst makeGroupName = (route: EnhancedRoute): string => {\n  switch (route.type) {\n    case 2:\n      return \"commuter_rail\";\n\n    case 3:\n      return \"bus\";\n\n    case 4:\n      return \"ferry\";\n\n    default:\n      return route.name.toLowerCase().replace(\" \", \"_\");\n  }\n};\n\nconst findRouteInStops = (\n  data: StopWithRoutes[],\n  stopIndex: number,\n  route: EnhancedRoute\n): [string, number, number] => {\n  const groupName = makeGroupName(route);\n  const routeGroupIndex = data[stopIndex].routes.findIndex(\n    routeGroup => routeGroup.group_name === groupName\n  );\n  if (routeGroupIndex === -1) {\n    return [\"add-group\", data[stopIndex].routes.length, 0];\n  }\n  const index = data[stopIndex].routes[routeGroupIndex].routes.findIndex(\n    existingRoute => existingRoute.id === route.id\n  );\n  return index === -1\n    ? [\n        \"add-route\",\n        routeGroupIndex,\n        data[stopIndex].routes[routeGroupIndex].routes.length\n      ]\n    : [\"update-route\", routeGroupIndex, index];\n};\n\nconst setStopInStops = (\n  data: StopWithRoutes[],\n  index: number,\n  stop: Stop,\n  distance: string\n): StopWithRoutes[] => dotProp.set(data, index, { stop, routes: [], distance });\n\nconst setRouteGroupInStops = (\n  data: StopWithRoutes[],\n  stopIndex: number,\n  index: number,\n  route: EnhancedRoute\n): StopWithRoutes[] =>\n  dotProp.set(data, `${stopIndex}.routes.${index}`, {\n    // eslint-disable-next-line camelcase\n    group_name: makeGroupName(route),\n    routes: []\n  });\n\nconst setRouteInStops = (\n  data: StopWithRoutes[],\n  stopIndex: number,\n  routeGroupIndex: number,\n  index: number,\n  route: EnhancedRoute\n): StopWithRoutes[] =>\n  dotProp.set(\n    data,\n    `${stopIndex}.routes.${routeGroupIndex}.routes.${index}`,\n    route\n  );\n\nconst transformStops = (\n  distances: DistanceByStopId,\n  data: StopWithRoutes[],\n  realtimeScheduleData: RealtimeScheduleData[]\n): StopWithRoutes[] =>\n  realtimeScheduleData.reduce(\n    (accumulator: StopWithRoutes[], { route, stop }: RealtimeScheduleData) => {\n      let nextData = accumulator;\n\n      // get stop index\n      const [stopState, stopIndex] = findStopInStops(nextData, stop.id);\n\n      // add stop\n      if (stopState === \"add\") {\n        nextData = setStopInStops(\n          nextData,\n          stopIndex,\n          stop,\n          distances[stop.id]\n        );\n      }\n\n      // get route index\n      const [routeState, routeGroupIndex, routeIndex] = findRouteInStops(\n        nextData,\n        stopIndex,\n        route\n      );\n\n      // add route group\n      if (routeState === \"add-group\") {\n        nextData = setRouteGroupInStops(\n          nextData,\n          stopIndex,\n          routeGroupIndex,\n          route\n        );\n      }\n      if (routeState === \"add-group\" || routeState === \"add-route\") {\n        nextData = setRouteInStops(\n          nextData,\n          stopIndex,\n          routeGroupIndex,\n          routeIndex,\n          route\n        );\n      }\n\n      return nextData;\n    },\n    data\n  );\n\nexport {\n  findRoute,\n  findStop,\n  findHeadsign,\n  findStopInStops,\n  makeGroupName,\n  findRouteInStops,\n  transformRoutes,\n  transformStops\n};\n","import { modeByV3ModeType } from \"../../components/ModeFilter\";\nimport { Mode } from \"../../__v3api\";\nimport { StopWithRoutes } from \"../components/__tnm\";\n\nconst reducer = (\n  stop: StopWithRoutes,\n  accumulator: boolean,\n  mode: Mode\n): boolean =>\n  accumulator ||\n  stop.routes.some(routeGroup =>\n    routeGroup.routes.some(route => modeByV3ModeType[route.type] === mode)\n  );\n\nconst stopIncludesModes = (stop: StopWithRoutes, modes: Mode[]): boolean =>\n  // if there are no selections or all selections, do not filter\n  modes.length === 0 ||\n  modes.length === 3 ||\n  modes.reduce((acc: boolean, mode: Mode) => reducer(stop, acc, mode), false);\n\nexport default stopIncludesModes;\n","import Algolia from \"../../js/algolia-search\";\nimport AlgoliaAutocompleteWithGeo from \"../../js/algolia-autocomplete-with-geo\";\nimport { TripPlannerLocControls } from \"../../js/trip-planner-location-controls\";\n\ntype HitArgs = [{ latitude: number; longitude: number; name: string }, string];\ninterface AlgoliaEvent {\n  originalEvent: {\n    _args: HitArgs;\n  };\n}\n\nexport default class TransitNearMeSearch {\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  public controller: any;\n\n  public autocomplete: any;\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n\n  public input: HTMLInputElement;\n\n  public latInput: HTMLInputElement;\n\n  public lngInput: HTMLInputElement;\n\n  private originalOnHitSelected: (ev: AlgoliaEvent) => void;\n\n  public constructor() {\n    this.bind();\n    this.controller = new Algolia({}, {});\n    this.input = document.getElementById(\n      TransitNearMeSearch.SELECTORS.input\n    ) as HTMLInputElement;\n    this.latInput = document.getElementById(\n      TransitNearMeSearch.SELECTORS.latitude\n    ) as HTMLInputElement;\n    this.lngInput = document.getElementById(\n      TransitNearMeSearch.SELECTORS.longitude\n    ) as HTMLInputElement;\n    this.autocomplete = new AlgoliaAutocompleteWithGeo({\n      id: \"search-transit-near-me\",\n      selectors: TransitNearMeSearch.SELECTORS,\n      indices: [],\n      locationParams: TransitNearMeSearch.LOCATION_PARAMS,\n      popular: TripPlannerLocControls.POPULAR,\n      parent: this\n    });\n    this.autocomplete.showLocation = this.showLocation;\n    this.originalOnHitSelected = this.autocomplete.onHitSelected;\n    this.autocomplete.onHitSelected = this.onHitSelected;\n    this.controller.addWidget(this.autocomplete);\n  }\n\n  private bind(): void {\n    this.showLocation = this.showLocation.bind(this);\n    this.onHitSelected = this.onHitSelected.bind(this);\n  }\n\n  public showLocation(lat: string, lng: string): void {\n    this.latInput.value = lat;\n    this.lngInput.value = lng;\n\n    this.submit();\n  }\n\n  public onHitSelected(ev: AlgoliaEvent): void {\n    const hit = ev.originalEvent;\n    // eslint-disable-next-line no-underscore-dangle\n    const [{ latitude, longitude, name }, index] = hit._args;\n\n    if (index === \"popular\") {\n      this.input.value = name;\n      this.showLocation(`${latitude}`, `${longitude}`);\n    } else {\n      this.originalOnHitSelected(ev);\n    }\n  }\n\n  public submit(): void {\n    // this method gets stubbed in tests\n    this.input.form!.submit();\n  }\n\n  public static readonly SELECTORS = {\n    input: \"search-transit-near-me__input\",\n    container: \"search-transit-near-me__container\",\n    goBtn: \"search-transit-near-me__input-go-btn\",\n    locationLoadingIndicator: \"search-transit-near-me__loading-indicator\",\n    resetButton: \"search-transit-near-me__reset\",\n    announcer: \"search-transit-near-me__announcer\",\n    latitude: \"search-transit-near-me__latitude\",\n    longitude: \"search-transit-near-me__longitude\"\n  };\n\n  public static readonly LOCATION_PARAMS = {\n    hitsPerPage: 5\n  };\n}\n","import * as googleMaps from \"../leaflet/state\";\nimport { Mode, RouteWithStopsWithDirections } from \"../__v3api\";\nimport {\n  StopsWithDistances,\n  RealtimeScheduleData,\n  StopWithRoutes\n} from \"./components/__tnm\";\nimport {\n  transformRoutes,\n  transformStops\n} from \"./helpers/process-realtime-data\";\n\nexport type SelectedStopType = string | null;\n\nexport const { clickMarkerAction } = googleMaps;\n\nexport const { clickCurrentLocationAction } = googleMaps;\n\nexport interface State {\n  pendingFirstData: boolean;\n  selectedStopId: SelectedStopType;\n  selectedModes: Mode[];\n  shouldFilterStopCards: boolean;\n  shouldCenterMapOnSelectedStop: boolean;\n  routesView: boolean;\n  stopsWithDistances: StopsWithDistances;\n  routesWithRealtimeSchedules: RouteWithStopsWithDirections[];\n  stopsWithRoutes: StopWithRoutes[];\n}\n\nexport type Dispatch = (action: Action) => void;\n\ntype StopActionType =\n  | googleMaps.MapActionType\n  | \"CLICK_STOP_CARD\"\n  | \"CLICK_STOP_PILL\"\n  | \"CLICK_VIEW_CHANGE\";\n\ntype ModeActionType = \"CLICK_MODE_FILTER\";\n\ntype RealtimeScheduleDataActionType = \"UPDATE_REALTIME_SCHEDULE_DATA\";\n\ntype FirstDataLoadedType = \"FIRST_DATA_LOADED\";\n\nexport interface RealtimeScheduleDataAction {\n  type: RealtimeScheduleDataActionType;\n  payload: {\n    data: RealtimeScheduleData[];\n  };\n}\n\nexport const realtimeScheduleDataAction = (\n  realtimeScheduleData: RealtimeScheduleData[]\n): RealtimeScheduleDataAction => ({\n  type: \"UPDATE_REALTIME_SCHEDULE_DATA\",\n  payload: {\n    data: realtimeScheduleData\n  }\n});\n\nexport interface FirstDataLoadedAction {\n  type: FirstDataLoadedType;\n  payload: object;\n}\n\nexport const firstDataLoadedAction = (): FirstDataLoadedAction => ({\n  type: \"FIRST_DATA_LOADED\",\n  payload: {}\n});\n\nexport interface ModeAction {\n  type: ModeActionType;\n  payload: {\n    modes: Mode[];\n  };\n}\n\nexport interface StopAction {\n  type: StopActionType;\n  payload: {\n    stopId: SelectedStopType;\n  };\n}\n\ntype ResetActionType = \"RESET_SHOULD_CENTER_MAP\";\n\nexport interface ResetAction {\n  type: ResetActionType;\n  payload: {\n    data: SelectedStopType;\n  };\n}\n\ntype Action =\n  | StopAction\n  | ModeAction\n  | ResetAction\n  | RealtimeScheduleDataAction\n  | FirstDataLoadedAction;\n\nexport const clickStopCardAction = (stopId: SelectedStopType): StopAction => ({\n  type: \"CLICK_STOP_CARD\",\n  payload: { stopId }\n});\n\nexport const clickStopPillAction = (): StopAction => ({\n  type: \"CLICK_STOP_PILL\",\n  payload: { stopId: null }\n});\n\nexport const clickViewChangeAction = (): StopAction => ({\n  type: \"CLICK_VIEW_CHANGE\",\n  payload: { stopId: null }\n});\n\nexport const clickModeAction = (modes: Mode[]): ModeAction => ({\n  type: \"CLICK_MODE_FILTER\",\n  payload: { modes }\n});\n\nexport const resetCenterMapOnSelectedStop = (\n  stopId: SelectedStopType\n): ResetAction => ({\n  type: \"RESET_SHOULD_CENTER_MAP\",\n  payload: { data: stopId }\n});\n\nconst stopReducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"CLICK_CURRENT_LOCATION_MARKER\":\n    case \"CLICK_MARKER\": {\n      const target =\n        state.selectedStopId === action.payload.stopId\n          ? null\n          : action.payload.stopId;\n\n      // selecting a stop pin can turn on filtering,\n      // but unselecting a stop pin should not turn off mode filtering\n      const shouldFilterStopCards = target\n        ? action.type === \"CLICK_MARKER\"\n        : state.shouldFilterStopCards;\n\n      return {\n        ...state,\n        shouldFilterStopCards,\n        selectedStopId: target,\n        shouldCenterMapOnSelectedStop: false\n      };\n    }\n    case \"CLICK_STOP_CARD\":\n      return {\n        ...state,\n        selectedStopId: action.payload.stopId,\n        shouldFilterStopCards: state.shouldFilterStopCards,\n        shouldCenterMapOnSelectedStop: true\n      };\n    case \"RESET_SHOULD_CENTER_MAP\":\n      return {\n        ...state,\n        shouldCenterMapOnSelectedStop: false\n      };\n    case \"CLICK_STOP_PILL\":\n      return {\n        ...state,\n        selectedStopId: null,\n        shouldFilterStopCards: false,\n        shouldCenterMapOnSelectedStop: false\n      };\n    case \"CLICK_VIEW_CHANGE\":\n      return {\n        ...state,\n        selectedStopId: null,\n        shouldFilterStopCards: false,\n        shouldCenterMapOnSelectedStop: false,\n        selectedModes: [],\n        routesView: !state.routesView\n      };\n    default:\n      return state;\n  }\n};\n\nconst modeReducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"CLICK_MODE_FILTER\":\n      return {\n        ...state,\n        selectedModes: action.payload.modes,\n        shouldFilterStopCards: true\n      };\n    default:\n      return state;\n  }\n};\n\nconst realtimeDataReducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"UPDATE_REALTIME_SCHEDULE_DATA\":\n      return {\n        ...state,\n        routesWithRealtimeSchedules: transformRoutes(\n          state.stopsWithDistances.distances,\n          state.routesWithRealtimeSchedules,\n          action.payload.data\n        ),\n        stopsWithRoutes: transformStops(\n          state.stopsWithDistances.distances,\n          state.stopsWithRoutes,\n          action.payload.data\n        )\n      };\n\n    case \"FIRST_DATA_LOADED\":\n      return {\n        ...state,\n        pendingFirstData: false\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const reducer = (state: State, action: Action): State =>\n  [stopReducer, modeReducer, realtimeDataReducer].reduce(\n    (accumulator, fn) => fn(accumulator, action),\n    state\n  );\n\nexport const initialState: State = {\n  pendingFirstData: true,\n  selectedStopId: null,\n  shouldFilterStopCards: false,\n  shouldCenterMapOnSelectedStop: false,\n  routesView: true,\n  selectedModes: [],\n  stopsWithDistances: { stops: [], distances: {} },\n  routesWithRealtimeSchedules: [],\n  stopsWithRoutes: []\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { MapData } from \"../leaflet/components/__mapdata\";\nimport { doWhenGoogleMapsIsReady } from \"../../js/google-maps-loaded\";\nimport TransitNearMeSearch from \"./search\";\nimport TransitNearMe from \"./components/TransitNearMe\";\nimport { parseQuery } from \"../helpers/query\";\n\nlet search = null; // eslint-disable-line\n\nconst render = (): void => {\n  const dataEl = document.getElementById(\"js-tnm-map-dynamic-data\");\n  const stopsWithDistancesEl = document.getElementById(\n    \"js-tnm-stop-sidebar-data\"\n  );\n  if (!dataEl || !stopsWithDistancesEl) return;\n  const mapId = dataEl.getAttribute(\"data-for\") as string;\n  const mapData = JSON.parse(dataEl.innerHTML) as MapData;\n  const stopsWithDistances = JSON.parse(stopsWithDistancesEl.innerHTML);\n  const query = parseQuery(window.location.search, window.decodeURIComponent);\n  ReactDOM.render(\n    <TransitNearMe\n      mapData={mapData}\n      mapId={mapId}\n      query={query}\n      stopsWithDistances={stopsWithDistances}\n      routesWithRealtimeSchedules={[]}\n      stopsWithRoutes={[]}\n    />,\n    document.getElementById(\"react-root\")\n  );\n};\n\nconst renderMap = (): void => {\n  doWhenGoogleMapsIsReady(() => {\n    render();\n  });\n};\n\nconst setupSearch = (): void => {\n  const el = document.getElementById(TransitNearMeSearch.SELECTORS.container);\n  if (el) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    search = new TransitNearMeSearch();\n  }\n};\n\nexport interface GeolocationData extends CustomEvent {\n  data: {\n    url: string;\n  };\n}\n\nexport const onLoad = (): void => {\n  renderMap();\n  setupSearch();\n};\n\nexport default onLoad;\n","import transitNearMe from \"./tnm/transit-near-me-loader\";\nimport googleMapsLoaded from \"../js/google-maps-loaded\";\n\ngoogleMapsLoaded();\ntransitNearMe();\n","import AlgoliaAutocomplete from \"./algolia-autocomplete\";\nimport { TEMPLATES } from \"./algolia-result\";\nimport * as GoogleMapsHelpers from \"./google-maps-helpers\";\n// eslint-disable-next-line\nimport * as QueryHelpers from \"../ts/helpers/query\";\nimport geolocationPromise from \"./geolocation-promise\";\nimport debounce from \"../ts/helpers/debounce.ts\";\n\n/* eslint-disable no-underscore-dangle */\n\nexport const addFilterParam = (params, path) => {\n  switch (path) {\n    case \"/schedules/commuter-rail\":\n    case \"/schedules/commuter-rail/\":\n      return Object.assign(params, { filter: \"commuter_rail\" });\n\n    case \"/schedules/subway\":\n    case \"/schedules/subway/\":\n      return Object.assign(params, { filter: \"subway\" });\n\n    case \"/schedules/bus\":\n    case \"/schedules/bus/\":\n      return Object.assign(params, { filter: \"bus\" });\n\n    default:\n      return params;\n  }\n};\n\nclass AlgoliaAutocompleteWithGeo extends AlgoliaAutocomplete {\n  constructor({\n    id,\n    selectors,\n    indices,\n    locationParams,\n    popular,\n    parent,\n    containerEl = null,\n    templates = TEMPLATES\n  }) {\n    super({ id, selectors, indices, parent, containerEl, templates });\n    this.debounceInterval = 250;\n    if (!this._parent.getParams) {\n      this._parent.getParams = () => ({});\n    }\n    this._popular = popular;\n    this._loadingIndicator = this.getById(selectors.locationLoadingIndicator);\n    this.addUseMyLocationErrorEl();\n    this._locationParams = Object.assign(\n      AlgoliaAutocompleteWithGeo.DEFAULT_LOCATION_PARAMS,\n      locationParams\n    );\n    this._indices.splice(this._locationParams.position, 0, \"locations\");\n    this._indices.push(\"usemylocation\");\n    this._indices.push(\"popular\");\n  }\n\n  addUseMyLocationErrorEl() {\n    const container = this.getById(this._selectors.container);\n    this.useMyLocationErrorEl = document.createElement(\"div\");\n    this.useMyLocationErrorEl.classList.add(\"u-error\");\n    this.useMyLocationErrorEl.style.display = \"none\";\n    this.useMyLocationErrorEl.innerHTML = `${window.location.host} needs permission to use your location.\n      Please update your browser's settings or refresh the page and try again.`;\n    container.parentNode.appendChild(this.useMyLocationErrorEl);\n  }\n\n  _datasetSource(index) {\n    switch (index) {\n      case \"locations\":\n        return debounce(\n          this._locationSource(\"locations\"),\n          this.debounceInterval\n        );\n      case \"usemylocation\":\n        return this._useMyLocationSource();\n      case \"popular\":\n        return this._popularSource();\n      default:\n        return debounce(super._datasetSource(index), this.debounceInterval);\n    }\n  }\n\n  _locationSource(index) {\n    return (input, callback) =>\n      GoogleMapsHelpers.autocomplete({\n        input,\n        hitLimit: this._locationParams.hitLimit\n      }).then(results => this._onResults(callback, index, results));\n  }\n\n  _popularSource() {\n    return (query, callback) => {\n      const results = { popular: { hits: this._popular } };\n      return this._onResults(callback, \"popular\", results);\n    };\n  }\n\n  _useMyLocationSource() {\n    return (query, callback) => {\n      const results = { usemylocation: { hits: [{}] } };\n      return this._onResults(callback, \"usemylocation\", results);\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  minLength(index) {\n    switch (index) {\n      case \"usemylocation\":\n      case \"popular\":\n        return 0;\n      default:\n        return 1;\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  maxLength(index) {\n    switch (index) {\n      case \"usemylocation\":\n      case \"popular\":\n        return 0;\n      default:\n        return null;\n    }\n  }\n\n  onHitSelected(ev) {\n    // placesService can be injected in tests\n    const hit = ev.originalEvent;\n    const index = hit._args[1];\n    switch (index) {\n      case \"locations\":\n        this._input.value = hit._args[0].address;\n        this._doLocationSearch(hit._args[0].address);\n        break;\n      case \"usemylocation\":\n        this.useMyLocationSearch();\n        break;\n      default:\n        super.onHitSelected(ev);\n    }\n  }\n\n  useMyLocationSearch() {\n    this.useMyLocationErrorEl.style.display = \"none\";\n    this._input.disabled = true;\n    this.setValue(\"Getting your location...\");\n    this._loadingIndicator.style.visibility = \"visible\";\n    return geolocationPromise()\n      .then(pos => this.onUseMyLocationResults(pos))\n      .catch(err => this.onGeolocationError(err));\n  }\n\n  onGeolocationError(err) {\n    this._input.disabled = false;\n    this.setValue(\"\");\n    this._loadingIndicator.style.visibility = \"hidden\";\n    if (err.code && err.code === 1) {\n      this.useMyLocationErrorEl.style.display = \"block\";\n    }\n  }\n\n  _doLocationSearch(address) {\n    return GoogleMapsHelpers.lookupPlace(address).then(result =>\n      this._onLocationSearchResult(result)\n    );\n  }\n\n  _onLocationSearchResult(result) {\n    return this.showLocation(result.latitude, result.longitude);\n  }\n\n  onUseMyLocationResults({ coords: { latitude, longitude } }) {\n    return GoogleMapsHelpers.reverseGeocode(\n      parseFloat(latitude),\n      parseFloat(longitude)\n    ).then(result => this.onReverseGeocodeResults(result, latitude, longitude));\n  }\n\n  onReverseGeocodeResults(result, latitude, longitude) {\n    this._input.disabled = false;\n    this.setValue(result);\n    this._loadingIndicator.style.visibility = \"hidden\";\n    this._input.value = result;\n    this.showLocation(latitude, longitude);\n  }\n\n  showLocation(latitude, longitude) {\n    const params = this._parent.getParams();\n    params.latitude = latitude;\n    params.longitude = longitude;\n    params.address = this._input.value;\n    const qs = QueryHelpers.paramsToString(\n      addFilterParam(params, window.location.pathname),\n      window.encodeURIComponent\n    );\n    window.Turbolinks.visit(`/transit-near-me${qs}`);\n  }\n}\n\nAlgoliaAutocompleteWithGeo.DEFAULT_LOCATION_PARAMS = {\n  position: 0,\n  hitLimit: 5\n};\n\nexport default AlgoliaAutocompleteWithGeo;\n","import * as AlgoliaResult from \"./algolia-result\";\n// eslint-disable-next-line import/no-unresolved, import/extensions\nimport * as QueryHelpers from \"../ts/helpers/query\";\n\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable class-methods-use-this */\n\nexport default class AlgoliaAutocomplete {\n  #templates;\n\n  constructor({\n    id,\n    selectors,\n    indices,\n    parent,\n    containerEl = null,\n    templates = AlgoliaResult.TEMPLATES\n  }) {\n    if (typeof id !== \"string\") {\n      throw new window.Error(\"autocomplete must have an id\");\n    }\n    this.id = id;\n    this.containerElement = containerEl;\n    this._parent = parent;\n    this.error = null;\n    this._selectors = Object.assign(selectors, {\n      resultsContainer: `${selectors.input}-autocomplete-results`\n    });\n    this._input = this.getById(this._selectors.input);\n    this._resultsContainer = this.getById(this._selectors.resultsContainer);\n    this._searchContainer = this.getById(this._selectors.container);\n    this._resetButton = this.getById(this._selectors.resetButton);\n    this.announcer = this.getById(this._selectors.announcer);\n    this._indices = indices;\n    this._datasets = [];\n    this._results = {};\n    this._highlightedHit = null;\n    this._autocomplete = null;\n\n    this.#templates = templates;\n\n    this.bind();\n  }\n\n  getById(id) {\n    return this.containerElement\n      ? this.containerElement.querySelector(`#${id}`)\n      : document.getElementById(id);\n  }\n\n  bind() {\n    this.onClickSuggestion = this.onClickSuggestion.bind(this);\n    this.onHitSelected = this.onHitSelected.bind(this);\n    this.onCursorChanged = this.onCursorChanged.bind(this);\n    this.onCursorRemoved = this.onCursorRemoved.bind(this);\n    this.onOpen = this.onOpen.bind(this);\n    this.onKeyup = this.onKeyup.bind(this);\n    this.clear = this.clear.bind(this);\n    this._toggleResetButton = this._toggleResetButton.bind(this);\n    this.getById = this.getById.bind(this);\n  }\n\n  clear() {\n    this._autocomplete.autocomplete.close();\n    this.setValue(\"\");\n    this._toggleResetButton(false);\n    this._client.reset();\n    this._input.focus();\n\n    //\n    //  To access the autocomplete object sent with this event, use:\n    //\n    //   $(document).on(\"autocomplete:reset\", (ev, { autocomplete }) => {})\n    //\n    // The extra data argument is not passed to\n    // listeners set by document.addEventListener.\n    //\n    window.$(document).trigger(\"autocomplete:reset\", { autocomplete: this });\n  }\n\n  init(client) {\n    this._client = client;\n\n    if (!this._input) return;\n\n    if (!this._resetButton) return;\n\n    this._addResultsContainer();\n\n    this._resultsContainer.innerHTML = \"\";\n\n    this._datasets = this._indices.reduce(\n      (acc, index) => this._buildDataset(index, acc),\n      []\n    );\n\n    this._autocomplete = window.autocomplete(\n      this._input,\n      {\n        appendTo: this._resultsContainer,\n        debug: true,\n        autoselectOnBlur: false,\n        openOnFocus: true,\n        detachedMediaQuery: false,\n        hint: false,\n        minLength: 0,\n        cssClasses: {\n          root: \"c-search-bar__autocomplete\",\n          prefix: \"c-search-bar__\"\n        }\n      },\n      this._datasets\n    );\n\n    this._addErrorMsg();\n    this._toggleResetButton(false);\n    this._addListeners();\n  }\n\n  resetResetButton() {\n    this._toggleResetButton(this._autocomplete.autocomplete.getVal() !== \"\");\n  }\n\n  setError(error) {\n    this.error = error;\n  }\n\n  _addListeners() {\n    window\n      .jQuery(document)\n      .on(\n        \"autocomplete:cursorchanged\",\n        `#${this._selectors.input}`,\n        this.onCursorChanged\n      );\n    window\n      .jQuery(document)\n      .on(\n        \"autocomplete:cursorremoved\",\n        `#${this._selectors.input}`,\n        this.onCursorRemoved\n      );\n    window\n      .jQuery(document)\n      .on(\n        \"autocomplete:selected\",\n        `#${this._selectors.input}`,\n        this.onHitSelected\n      );\n    window\n      .jQuery(document)\n      .on(\"autocomplete:shown\", `#${this._selectors.input}`, this.onOpen);\n\n    window.jQuery(document).on(\"keyup\", `#${this._input.id}`, this.onKeyup);\n\n    window.addEventListener(\"resize\", this.onOpen);\n\n    this._resetButton.removeEventListener(\"click\", this.clear);\n    this._resetButton.addEventListener(\"click\", this.clear);\n\n    // normally we would only use `.js-` prefixed classes for javascript selectors, but\n    // we make an exception here because this element and its class is generated entirely\n    // by the autocomplete widget.\n    window\n      .jQuery(document)\n      .on(\"click\", \".c-search-bar__-suggestion\", this.onClickSuggestion);\n\n    document.addEventListener(\"turbolink:before-render\", () => {\n      window\n        .jQuery(document)\n        .off(\n          \"autocomplete:cursorchanged\",\n          `#${this._selectors.input}`,\n          this.onCursorChanged\n        );\n      window\n        .jQuery(document)\n        .off(\n          \"autocomplete:cursorremoved\",\n          `#${this._selectors.input}`,\n          this.onCursorRemoved\n        );\n      window\n        .jQuery(document)\n        .off(\n          \"autocomplete:selected\",\n          `#${this._selectors.input}`,\n          this.onHitSelected\n        );\n      window\n        .jQuery(document)\n        .off(\"autocomplete:shown\", `#${this._selectors.input}`, this.onOpen);\n      window.removeEventListener(\"resize\", this.onOpen);\n      window.jQuery(document).off(\"keyup\", `#${this._input.id}`, this.onKeyup);\n      window\n        .jQuery(document)\n        .off(\"click\", \".c-search-bar__-suggestion\", this.onClickSuggestion);\n    });\n  }\n\n  _toggleResetButton(show) {\n    this._resetButton.style.display = show ? \"block\" : \"none\";\n  }\n\n  _addErrorMsg() {\n    if (this.getById(\"algolia-error\")) {\n      return;\n    }\n\n    const dropdown = document\n      .getElementsByClassName(\"c-search-bar__-dropdown-menu\")\n      .item(0);\n    const errorMsg = document.createElement(\"div\");\n\n    errorMsg.id = \"algolia-error\";\n    errorMsg.classList.add(\"c-search__error\");\n    errorMsg.innerHTML =\n      \"There was a problem performing your search; please try again in a few minutes.\";\n    dropdown.appendChild(errorMsg);\n    this._client.errorContainer = errorMsg;\n  }\n\n  onKeyup() {\n    this._toggleResetButton(this._autocomplete.autocomplete.getVal() !== \"\");\n  }\n\n  onOpen() {\n    const acDialog = window\n      .jQuery(this._resultsContainer)\n      .find(\".c-search-bar__-dropdown-menu\")[0];\n    if (acDialog && this._input) {\n      this.positionDropdown(acDialog);\n      this.announceResults(acDialog);\n    }\n  }\n\n  positionDropdown(acDialog) {\n    const borderWidth = parseInt(\n      $(`#${this._selectors.container}`).css(\"border-left-width\"),\n      10\n    );\n    const { offsetLeft, offsetTop } = this._input;\n\n    /* eslint-disable no-param-reassign */\n    acDialog.style.width = `${this._searchContainer.offsetWidth}px`;\n    acDialog.style.marginLeft = `${-borderWidth + -offsetLeft}px`;\n    acDialog.style.marginTop = `${borderWidth + offsetTop}px`;\n    /* eslint-enable no-param-reassign */\n  }\n\n  announceResults(dialog) {\n    const count = Array.from(dialog.querySelectorAll(\"a\")).reduce(\n      acc => acc + 1,\n      0\n    );\n    const s = count === 1 ? \"\" : \"s\";\n    this.announcer.innerHTML = `${count} result${s}`;\n  }\n\n  _addResultsContainer() {\n    if (!this._resultsContainer) {\n      this._resultsContainer = document.createElement(\"div\");\n      this._resultsContainer.id = this._selectors.resultsContainer;\n      this._input.parentNode.appendChild(this._resultsContainer);\n    }\n  }\n\n  onCursorChanged({\n    originalEvent: {\n      _args: [hit, index]\n    }\n  }) {\n    this._highlightedHit = {\n      hit,\n      index\n    };\n  }\n\n  onCursorRemoved() {\n    this._highlightedHit = null;\n  }\n\n  clickHighlightedOrFirstResult() {\n    if (this._highlightedHit) {\n      return this.onHitSelected({\n        originalEvent: {\n          _args: [this._highlightedHit.hit, this._highlightedHit.index]\n        }\n      });\n    }\n    return this.clickFirstResult();\n  }\n\n  clickFirstResult() {\n    const firstIndex = this._indices.find(\n      index => this._results[index] && this._results[index].hits.length > 0\n    );\n    if (firstIndex) {\n      return this.onHitSelected({\n        originalEvent: {\n          _args: [this._results[firstIndex].hits[0], firstIndex]\n        }\n      });\n    }\n    return false;\n  }\n\n  onClickSuggestion(ev) {\n    ev.preventDefault();\n  }\n\n  onHitSelected({\n    originalEvent: {\n      _args: [hit, type]\n    }\n  }) {\n    const params = this._parent.getParams();\n    if (this._input) {\n      this._input.value = \"\";\n    }\n\n    window.jQuery.post(\n      \"/search/click\",\n      hit.analyticsData,\n      this.onHitSelectedCallback(hit, type, params)\n    );\n  }\n\n  onHitSelectedCallback(hit, type, params) {\n    window.Turbolinks.visit(\n      AlgoliaResult.getUrl(hit, type) +\n        QueryHelpers.paramsToString(params, window.encodeURIComponent)\n    );\n  }\n\n  _buildDataset(indexName, acc) {\n    acc.push({\n      source: this._datasetSource(indexName),\n      displayKey: AlgoliaAutocomplete.DISPLAY_KEYS[indexName],\n      name: indexName,\n      hitsPerPage: 5,\n      minLength: this.minLength(indexName),\n      maxLength: this.maxLength(indexName),\n      templates: {\n        suggestion: this.renderResult(indexName),\n        footer: this.renderFooterTemplate(indexName)\n      },\n      debounce: 500\n    });\n    return acc;\n  }\n\n  minLength() {\n    return 1;\n  }\n\n  maxLength() {\n    return null;\n  }\n\n  renderFooterTemplate() {\n    // Does not render a footer template by default.\n    // To render a footer template, override this method.\n    return null;\n  }\n\n  _datasetSource(index) {\n    return (query, callback) => {\n      this._client.reset();\n      return this._client\n        .search({ query })\n        .then(results => this._onResults(callback, index, results));\n    };\n  }\n\n  _emptySearchSource() {\n    return (query, callback) => callback([{ data: \"\" }]);\n  }\n\n  _onResults(callback, index, results) {\n    if (!results || results.error) {\n      return;\n    }\n    if (results[index] && results[index].hits) {\n      this._results[index] = results[index];\n      callback(results[index].hits);\n    }\n  }\n\n  renderResult(index) {\n    return hit => AlgoliaResult.renderResult(hit, index, this.#templates);\n  }\n\n  setValue(value) {\n    this._autocomplete.autocomplete.setVal(value);\n    window.jQuery(this._input).change();\n    this._autocomplete.autocomplete.close();\n  }\n\n  getValue() {\n    return this._autocomplete.autocomplete.getVal();\n  }\n}\n\nAlgoliaAutocomplete.DISPLAY_KEYS = {\n  locations: \"hit.place_id\"\n};\n","import hogan from \"hogan.js\";\nimport _ from \"lodash\";\nimport * as Icons from \"./icons\";\nimport { highlightText } from \"../ts/helpers/text.ts\";\n\n/* eslint-disable no-underscore-dangle */\n\nexport const SELECTORS = {\n  result: \"js-search-result\"\n};\n\nexport const autocompleteByGoogle = () =>\n  window && window.locationAutocompleteBacking === \"google\";\n\nexport const TEMPLATES = {\n  poweredByGoogleLogo: hogan.compile(\n    `<div class=\"c-search-result__hit c-search-result__google\">{{{logo}}}</div>`\n  ),\n  fontAwesomeIcon: hogan.compile(\n    `<span aria-hidden=\"true\" class=\"c-search-result__content-icon fa {{icon}}\"></span>`\n  ),\n  formattedDate: hogan.compile(\n    `<span class=\"c-search-result__event-date\">{{date}}</span>`\n  ),\n  locations: hogan.compile(`\n    <a id=\"hit-{{id}}\" class=\"c-search-result__link u-no-underline\" url={{hitUrl}}>\n      <span>{{{hitIcon}}}</span>\n      <span class=\"c-search-result__hit-name\">{{{hitTitle}}}</span>\n    </a>\n  `),\n  usemylocation: hogan.compile(`\n    <a id=\"search-bar__my-location\" class=\"c-search-bar__my-location\">\n      <i aria-hidden=\"true\" class=\"fa fa-location-arrow \"></i>\n      Use my location\n      <i aria-hidden=\"true\" id=\"search-result__loading-indicator\" class=\"fa fa-cog fa-spin c-search-result__loading-indicator\"></i>\n    </a>\n  `),\n  threePlusIcons: hogan.compile(`\n    {{#hasDate}}\n    <div class=\"c-search-result__hit--vertical\">\n    {{/hasDate}}\n    {{#id}}\n    <a id=\"hit-{{id}}\" class=\"${SELECTORS.result} c-search-result__link\" href=\"{{hitUrl}}\">\n    {{/id}}\n    {{^id}}\n    <a class=\"${SELECTORS.result} c-search-result__link u-no-underline\" href=\"{{hitUrl}}\" data-queryid=\"{{analyticsData.queryID}}\" data-hit-position=\"{{analyticsData.position}}\" data-objectid=\"{{analyticsData.objectID}}\">\n    {{/id}}\n      <span>{{{hitIcon}}}</span>\n      <span class=\"c-search-result__feature-icons\">\n      {{#hitFeatureIcons}}\n        {{{.}}}\n      {{/hitFeatureIcons}}\n      <br/>\n    </span>\n      <span class=\"c-search-result__hit-name\">{{{hitTitle}}}</span>\n    </a>\n    {{#hasDate}}\n    </div>\n    {{/hasDate}}\n  `),\n  default: hogan.compile(`\n    {{#hasDate}}\n    <div class=\"c-search-result__hit--vertical\">\n    {{/hasDate}}\n    {{#id}}\n    <a id=\"hit-{{id}}\" class=\"${SELECTORS.result} c-search-result__link\" href=\"{{hitUrl}}\">\n    {{/id}}\n    {{^id}}\n    <a class=\"${SELECTORS.result} c-search-result__link u-no-underline\" href=\"{{hitUrl}}\" data-queryid=\"{{analyticsData.queryID}}\" data-hit-position=\"{{analyticsData.position}}\" data-objectid=\"{{analyticsData.objectID}}\">\n    {{/id}}\n      <span>{{{hitIcon}}}</span>\n      <span class=\"c-search-result__feature-icons\">\n      {{#hitFeatureIcons}}\n        {{{.}}}\n      {{/hitFeatureIcons}}\n    </span>\n      <span class=\"c-search-result__hit-name\">{{{hitTitle}}}</span>\n    </a>\n    {{#hasDate}}\n    </div>\n    {{/hasDate}}\n  `)\n};\n\nexport const TEMPLATES_ALT_USE_MY_LOCATION = {\n  ...TEMPLATES,\n  usemylocation: hogan.compile(`\n    <a id=\"search-bar__my-location\" class=\"c-search-bar__my-location\">\n      <i aria-hidden=\"true\" class=\"fa fa-location-arrow \"></i>\n      Use my location to find transit near me\n      <i aria-hidden=\"true\" id=\"search-result__loading-indicator\" class=\"fa fa-cog fa-spin c-search-result__loading-indicator\"></i>\n    </a>\n  `)\n};\n\nfunction iconsFromGTFSAncestries(ancestries) {\n  return ancestries\n    .map(anc => anc.toLowerCase())\n    .filter(anc => anc !== \"subway\")\n    .map(anc => Icons.getFeatureIcon(anc));\n}\n\nfunction iconsFromGTFSAncestry(ancestry) {\n  if (Array.isArray(ancestry)) {\n    return iconsFromGTFSAncestries(ancestry);\n  }\n  return iconsFromGTFSAncestries([ancestry]);\n}\n\nfunction _subwayRouteIcon(routeId) {\n  if (routeId.includes(\"Green-\")) {\n    return routeId.toLowerCase().replace(\"-\", \"_line_\");\n  }\n\n  const mapper = {\n    Green: \"green_line\",\n    Red: \"red_line\",\n    Orange: \"orange_line\",\n    Blue: \"blue_line\",\n    Mattapan: \"mattapan_line\"\n  };\n\n  return mapper[routeId];\n}\n\nfunction iconFromGTFSId(id) {\n  const toSubway = _subwayRouteIcon(id);\n  if (toSubway) {\n    return Icons.getFeatureIcon(toSubway);\n  }\n  if (id in [\"commuter_rail\", \"bus\", \"ferry\", \"silver_line\"]) {\n    return Icons.getFeatureIcon(id);\n  }\n  if (id.includes(\"CR-\")) {\n    return Icons.getFeatureIcon(\"commuter_rail\");\n  }\n  return Icons.getFeatureIcon(id);\n}\n\nfunction iconsFromGTFSIds(id) {\n  if (Array.isArray(id)) {\n    return id.map(icon => iconFromGTFSId(icon));\n  }\n  return [iconFromGTFSId(id)];\n}\n\nexport function iconFromGTFS(id, ancestry) {\n  if (!id) {\n    return TEMPLATES.fontAwesomeIcon.render({ icon: \"fa-info\" });\n  }\n  let icons = iconsFromGTFSIds(id);\n  if (ancestry) {\n    icons = icons.concat(iconsFromGTFSAncestry(ancestry));\n  }\n  return icons;\n}\n\nfunction _fileIcon(hit) {\n  switch (hit._file_type) {\n    case \"application/pdf\":\n      return \"fa-file-pdf-o\";\n\n    case \"application/vnd.openxmlformats-officedocument.presentationml.presentation\":\n    case \"application/vnd.ms-powerpoint\":\n      return \"fa-file-powerpoint-o\";\n\n    case \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\n    case \"application/vnd.ms-excel\":\n      return \"fa-file-excel-o\";\n\n    case \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\n    case \"application/msword\":\n      return \"fa-file-word-o\";\n\n    default:\n      return \"fa-file-o\";\n  }\n}\n\nexport function contentIcon(hit) {\n  let icon;\n\n  if (hit.search_api_datasource === \"entity:file\") {\n    icon = _fileIcon(hit);\n  } else {\n    const iconMapper = {\n      search_result: \"fa-info\",\n      news_entry: \"fa-newspaper-o\",\n      event: \"fa-calendar\",\n      project: \"fa-wrench\",\n      project_update: \"fa-wrench\",\n      page: \"fa-info\",\n      landing_page: \"fa-info\",\n      person: \"fa-user\",\n      locations: \"fa-map-marker\"\n    };\n    icon = iconMapper[hit._content_type] || \"fa-info\";\n  }\n\n  return TEMPLATES.fontAwesomeIcon.render({ icon });\n}\n\nfunction _getStopOrStationIcon(hit) {\n  if (hit.stop[\"station?\"]) {\n    return Icons.getFeatureIcon(\"station\");\n  }\n  return Icons.getFeatureIcon(\"stop\");\n}\n\nfunction _iconFromRoute(route) {\n  switch (route.type) {\n    case 2:\n      return \"commuter_rail\";\n\n    case 3:\n      if (route.name.startsWith(\"SL\")) {\n        return \"silver_line\";\n      }\n      return \"bus\";\n\n    case 4:\n      return \"ferry\";\n\n    default:\n      return _subwayRouteIcon(route.id);\n  }\n}\n\nfunction getPopularIcon(icon) {\n  switch (icon) {\n    case \"airplane\":\n      return TEMPLATES.fontAwesomeIcon.render({ icon: \"fa-plane\" });\n    default:\n      return Icons.getFeatureIcon(icon);\n  }\n}\n\nexport function getIcon(hit, type) {\n  switch (type) {\n    case \"locations\":\n      return contentIcon({ ...hit, _content_type: \"locations\" });\n    case \"stops\":\n      return _getStopOrStationIcon(hit);\n\n    case \"routes\":\n      return Icons.getFeatureIcon(_iconFromRoute(hit.route));\n\n    case \"popular\":\n      return getPopularIcon(hit.icon);\n\n    case \"projects\":\n      // eslint-disable-next-line no-use-before-define\n      return getTransitIcons(hit);\n\n    case \"drupal\":\n    case \"pages\":\n    case \"documents\":\n    case \"events\":\n    case \"news\":\n      return contentIcon(hit);\n\n    case \"usemylocation\":\n      return \"\";\n\n    default:\n      return \"\";\n  }\n}\n\nfunction getTransitIcons(hit) {\n  if (\n    hit.related_transit_gtfs_id === null &&\n    hit.related_transit_gtfs_ancestry == null\n  ) {\n    return \"\";\n  }\n  const icons = iconFromGTFS(\n    hit.related_transit_gtfs_id,\n    hit.related_transit_gtfs_ancestry\n  );\n  if (Array.isArray(icons)) {\n    const uniqueIcons = _.uniq(icons);\n    return uniqueIcons.join(\" \");\n  }\n  return icons;\n}\n\nfunction _contentUrl(hit) {\n  if (hit.search_api_datasource === \"entity:file\") {\n    return `/sites/default/files/${hit._file_uri.replace(/public:\\/\\//, \"\")}`;\n  }\n  if (hit._content_type === \"search_result\") {\n    return hit._search_result_url.replace(/internal:/, \"\");\n  }\n  return hit._content_url;\n}\n\nexport function getUrl(hit, index) {\n  switch (index) {\n    case \"stops\":\n      return `/stops/${hit.stop.id}`;\n\n    case \"routes\":\n      return `/schedules/${hit.route.id}`;\n\n    case \"popular\":\n      return hit.url;\n\n    case \"drupal\":\n    case \"projects\":\n    case \"pages\":\n    case \"documents\":\n    case \"events\":\n    case \"news\":\n      return _contentUrl(hit);\n\n    case \"locations\":\n      return \"\";\n    case \"usemylocation\":\n      return \"#\";\n\n    default:\n      return \"#\";\n  }\n}\n\nfunction getRouteTitle(hit) {\n  const name = hit._highlightResult.route.name.value;\n  switch (hit.route.type) {\n    case 3:\n      return `${name} <span class=\"c-search-result__long-name\">${hit._highlightResult.route.long_name.value}</span>`;\n    default:\n      return name;\n  }\n}\n\nfunction _contentTitle(hit) {\n  if (hit._content_type === \"search_result\") {\n    return hit._highlightResult.search_result_title.value;\n  }\n  if (hit.search_api_datasource === \"entity:file\") {\n    return hit._highlightResult.file_name_raw.value;\n  }\n  return hit._highlightResult.content_title.value;\n}\n\nexport function getTitle(hit, type) {\n  switch (type) {\n    case \"locations\":\n      // eslint-disable-next-line no-case-declarations\n      const { address: text, highlighted_spans: spans } = hit;\n\n      return highlightText(text, spans);\n    case \"stops\":\n      return hit._highlightResult.stop.name.value;\n\n    case \"routes\":\n      return getRouteTitle(hit);\n\n    case \"popular\":\n      return hit.name;\n\n    case \"drupal\":\n    case \"projects\":\n    case \"pages\":\n    case \"documents\":\n    case \"events\":\n    case \"news\":\n      return _contentTitle(hit);\n\n    case \"usemylocation\":\n      return \"\";\n\n    default:\n      return \"\";\n  }\n}\n\nfunction _stopsWithAlerts() {\n  const stopsWithAlertsDiv = document.getElementById(\"stops-with-alerts\");\n  if (!stopsWithAlertsDiv) return \"\";\n  const {\n    dataset: { stopsWithAlerts }\n  } = stopsWithAlertsDiv;\n  return stopsWithAlerts;\n}\n\nfunction _routesWithAlerts() {\n  const routesWithAlertsDiv = document.getElementById(\"routes-with-alerts\");\n  if (!routesWithAlertsDiv) return \"\";\n  const {\n    dataset: { routesWithAlerts }\n  } = routesWithAlertsDiv;\n  return routesWithAlerts;\n}\n\nfunction _getAlertIcon(hit, type) {\n  let hasAlert = false;\n  switch (type) {\n    case \"stops\":\n      hasAlert = _stopsWithAlerts().includes(hit.stop.id);\n      break;\n\n    case \"routes\":\n      hasAlert = _routesWithAlerts().includes(hit.route.id);\n      break;\n\n    default:\n      hasAlert = false;\n  }\n\n  return hasAlert ? [\"alert\"] : [];\n}\n\nfunction _standardizeFeatureName(feature) {\n  switch (feature) {\n    case \"Red\":\n    case \"Blue\":\n    case \"Orange\":\n    case \"Green\":\n    case \"Green-B\":\n    case \"Green-C\":\n    case \"Green-D\":\n    case \"Green-E\":\n    case \"Mattapan\":\n      return _subwayRouteIcon(feature);\n\n    default:\n      return feature;\n  }\n}\n\nfunction _featuresToIcons(features) {\n  return features.map(feature =>\n    Icons.getFeatureIcon(_standardizeFeatureName(feature))\n  );\n}\n\nfunction _sortFeatures(features) {\n  const featuresWithoutBranches = features.filter(\n    feature => !feature.includes(\"Green-\")\n  );\n  const branches = features.filter(feature => feature.includes(\"Green-\"));\n  if (branches.length > 0) {\n    const greenLinePosition = featuresWithoutBranches.findIndex(\n      feature => feature === \"green_line\"\n    );\n\n    featuresWithoutBranches.splice(greenLinePosition + 1, 0, ...branches);\n    return featuresWithoutBranches;\n  }\n  return features;\n}\n\nfunction _getCommuterRailZone(hit) {\n  if (hit.zone) {\n    return [`<span class=\"c-icon__cr-zone\">Zone ${hit.zone}</span>`];\n  }\n  return [];\n}\n\nfunction _stopIcons(hit, type) {\n  const filteredFeatures = hit.features.filter(\n    feature => feature !== \"access\" && feature !== \"parking_lot\"\n  );\n\n  const alertFeature = _getAlertIcon(hit, type);\n  const allFeatures = alertFeature.concat(filteredFeatures);\n  const allFeaturesSorted = _sortFeatures(allFeatures);\n  const allIcons = _featuresToIcons(allFeaturesSorted);\n\n  const zoneIcon = _getCommuterRailZone(hit);\n\n  return allIcons.concat(zoneIcon);\n}\n\nfunction _formatDate(date) {\n  const formattedDate = date.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\"\n  });\n  return TEMPLATES.formattedDate.render({ date: formattedDate });\n}\n\nfunction pagesdocumentsDate(hit) {\n  if (hit._file_created !== undefined) {\n    const date = new Date(hit._file_created * 1000);\n    return [_formatDate(date)];\n  }\n  return [];\n}\n\nfunction projectsDate(hit) {\n  if (hit._content_posted_on) {\n    const date = new Date(hit._content_posted_on * 1000);\n    return [_formatDate(date)];\n  }\n  return [];\n}\n\nfunction _contentDate(hit) {\n  const dateString = hit._content_url.split(\"/\")[2];\n  try {\n    const dateStringWithTime = `${dateString}T01:00:00`;\n    const date = new Date(dateStringWithTime);\n    return [_formatDate(date)];\n  } catch (err) {\n    return [];\n  }\n}\n\nexport function getFeatureIcons(hit, type) {\n  const alertFeature = _getAlertIcon(hit, type);\n  switch (type) {\n    case \"popular\":\n    case \"stops\":\n      return _stopIcons(hit, type);\n\n    case \"routes\":\n      return _featuresToIcons(alertFeature);\n\n    case \"projects\":\n      return projectsDate(hit);\n\n    case \"pages\":\n    case \"documents\":\n      return pagesdocumentsDate(hit);\n    case \"events\":\n    case \"news\":\n      return _contentDate(hit);\n\n    default:\n      return [];\n  }\n}\n\nexport function parseResult(hit, index) {\n  return Object.assign(hit, {\n    hitIcon: getIcon(hit, index),\n    hitUrl: getUrl(hit, index),\n    hitTitle: getTitle(hit, index),\n    hasDate:\n      index === \"events\" ||\n      index === \"news\" ||\n      index === \"pages\" ||\n      index === \"documents\" ||\n      index === \"projects\" ||\n      null,\n    hitFeatureIcons: getFeatureIcons(hit, index),\n    id: hit.id || null\n  });\n}\n\nexport function renderResult(hit, index, templates = TEMPLATES) {\n  const parsedResult = parseResult(hit, index);\n  if (parsedResult.hitFeatureIcons.length > 2) {\n    return TEMPLATES.threePlusIcons.render(parsedResult);\n  }\n  if (templates[index]) {\n    return templates[index].render(parsedResult);\n  }\n  return templates.default.render(parsedResult);\n}\n","class Algolia {\n  constructor(queries, defaultParams) {\n    this._queries = queries;\n    this._activeQueryIds = Object.keys(queries);\n    this._defaultParams = defaultParams;\n    this._viewMoreInc = 20;\n    this._lastQuery = \"\";\n    this._doBlankSearch = true;\n    this._widgets = [];\n    this.errorContainer = document.getElementById(\"algolia-error\");\n    this.reset();\n  }\n\n  get widgets() {\n    return this._widgets;\n  }\n\n  reset() {\n    Object.keys(this._queries).forEach(this.resetDefaultParams());\n    this._lastQuery = \"\";\n    this.resetWidgets();\n  }\n\n  resetDefaultParams() {\n    return queryId => {\n      if (this._defaultParams[queryId]) {\n        this._queries[queryId].params = JSON.parse(\n          JSON.stringify(this._defaultParams[queryId])\n        );\n      } else {\n        console.error(\n          \"default params not set for queryId\",\n          queryId,\n          this._defaultParams\n        );\n      }\n    };\n  }\n\n  addPage(group) {\n    if (this._queries[group]) {\n      this._queries[group].params.hitsPerPage += this._viewMoreInc;\n    }\n  }\n\n  search(opts = {}) {\n    this.toggleError(false);\n\n    if (!(typeof opts.query == \"string\")) {\n      opts.query = this._lastQuery;\n    }\n\n    if (opts.query.length > 0) {\n      const allQueries = this._buildAllQueries(opts);\n      this._lastQuery = opts.query;\n      return this._doSearch(allQueries);\n    } else {\n      this.updateWidgets({});\n\n      // This code handles the case where the user backspaces to an empty search string\n      if (this._lastQuery.length > 0) {\n        this.reset();\n      }\n      return Promise.resolve({});\n    }\n  }\n\n  _doSearch(allQueries) {\n    return this._sendQueries(allQueries)\n      .then(this._processAlgoliaResults())\n      .then(results => {\n        this.updateWidgets(results);\n        return results;\n      })\n      .catch(err => console.log(err));\n  }\n\n  _addAnalyticsData(result) {\n    result.hits.forEach((hit, i) => {\n      hit.analyticsData = {\n        queryID: result.queryID,\n        position: result.hitsPerPage * result.page + i + 1,\n        objectID: hit.objectID\n      };\n    });\n  }\n\n  _sendQueries(queries) {\n    const body = { requests: queries };\n    return new Promise((resolve, reject) => {\n      window.jQuery\n        .ajax({\n          type: \"POST\",\n          url: \"/search/query\",\n          data: JSON.stringify(body),\n          dataType: \"json\",\n          contentType: \"application/json\"\n        })\n        .done(resolve)\n        .fail(reject);\n    });\n  }\n\n  _buildAllQueries(opts) {\n    const requestedQueryIds =\n      this._activeQueryIds.length > 0\n        ? this._activeQueryIds\n        : Object.keys(this._queries);\n    const queries = [];\n    requestedQueryIds.forEach(queryId => {\n      queries.push(this._buildQuery(queryId, opts));\n    });\n\n    return queries;\n  }\n\n  _buildQuery(queryId, { query }) {\n    const currentQuery = this._queries[queryId];\n    currentQuery.query = query;\n    currentQuery.params = currentQuery.params || {};\n    currentQuery.params.clickAnalytics = true;\n    return currentQuery;\n  }\n\n  updateAllParams(key, value) {\n    Object.keys(this._queries).forEach(\n      key => (this._queries[key].params[key] = value)\n    );\n  }\n\n  updateActiveQueries(queryIds) {\n    this._activeQueryIds = queryIds;\n  }\n\n  removeActiveQuery(queryId) {\n    const i = this._activeQueryIds.indexOf(queryId);\n    if (i != -1) {\n      this._activeQueryIds.splice(i, 1);\n    }\n  }\n\n  addActiveQuery(queryId) {\n    if (this._activeQueryIds.indexOf(queryId) == -1) {\n      this._activeQueryIds.push(queryId);\n    }\n  }\n\n  updateFacetFilters(queryId, filters) {\n    this._queries[queryId].params[\"facetFilters\"][0] = filters;\n  }\n\n  addFacetFilter(queryId, filter) {\n    if (\n      this._queries[queryId].params[\"facetFilters\"][0].indexOf(filter) == -1\n    ) {\n      this._queries[queryId].params[\"facetFilters\"][0].push(filter);\n    }\n  }\n\n  removeFacetFilter(queryId, filter) {\n    const i = this._queries[queryId].params[\"facetFilters\"][0].indexOf(filter);\n    if (i != -1) {\n      this._queries[queryId].params[\"facetFilters\"][0].splice(i, 1);\n    }\n  }\n\n  updateParams(queryId, params) {\n    this._queries[queryId].params = params;\n  }\n\n  updateParamsByKey(queryId, key, value) {\n    this._queries[queryId].params[key] = value;\n  }\n\n  getParams(queryId) {\n    return this._queries[queryId].params;\n  }\n\n  addWidget(widget) {\n    widget.init(this);\n    this._widgets.push(widget);\n  }\n\n  updateWidgets(results) {\n    if (results[\"error\"]) {\n      this.toggleError(true);\n    } else {\n      this._widgets.forEach(function(widget) {\n        if (typeof widget.render === \"function\") {\n          widget.render(results);\n        }\n      });\n    }\n  }\n\n  resetWidgets() {\n    this._widgets.forEach(function(widget) {\n      if (typeof widget.reset === \"function\") {\n        widget.reset();\n      }\n    });\n  }\n\n  _processAlgoliaResults() {\n    return response => {\n      if (response[\"error\"]) {\n        return Promise.resolve(response);\n      } else {\n        let searchedQueries = this._activeQueryIds.slice(0);\n        if (this._activeQueryIds.length == 0) {\n          searchedQueries = Object.keys(this._queries);\n        }\n        const facetLength = Object.keys(this._queries).length;\n        const searchResults = response.results.slice(0, searchedQueries.length);\n        const facetResults = response.results.slice(\n          searchedQueries.length,\n          searchedQueries.length + facetLength\n        );\n        const results = {};\n        searchResults.forEach((result, i) => {\n          this._addAnalyticsData(result);\n          results[searchedQueries[i]] = result;\n        });\n        facetResults.forEach((result, i) => {\n          results[`facets-${Object.keys(this._queries)[i]}`] = result;\n        });\n        return Promise.resolve(results);\n      }\n    };\n  }\n\n  toggleError(hasError) {\n    if (hasError === true) {\n      this.errorContainer.style.display = \"block\";\n    } else {\n      this.errorContainer.style.display = \"none\";\n    }\n  }\n}\n\nexport default Algolia;\n","export default function() {\n  return new Promise(function(resolve, reject) {\n    if (window.navigator && window.navigator.geolocation) {\n      window.navigator.geolocation.getCurrentPosition(resolve, reject);\n    } else {\n      reject(\"window.navigator.geolocation not enabled\");\n    }\n  });\n}\n","const sessionTokenValue = tokenObj => (tokenObj ? tokenObj.Pf : null);\n\nexport function autocomplete({ input, hitLimit, sessionToken }) {\n  if (input.length === 0) {\n    return Promise.resolve({});\n  }\n\n  return new Promise((resolve, reject) => {\n    window.jQuery\n      .getJSON(\n        `/places/autocomplete/${encodeURIComponent(\n          input\n        )}/${hitLimit}/${sessionTokenValue(sessionToken)}`\n      )\n      .done(processAutocompleteResults(resolve))\n      .fail(reject);\n  });\n}\n\nexport const lookupPlace = address =>\n  new Promise((resolve, reject) => {\n    window.jQuery\n      .getJSON(`/places/details/${encodeURIComponent(address)}`)\n      .done(processPlacesCallback(resolve))\n      .fail(reject);\n  });\n\nexport const reverseGeocode = (latitude, longitude) =>\n  new Promise((resolve, reject) => {\n    window.jQuery\n      .getJSON(`/places/reverse-geocode/${latitude}/${longitude}`)\n      .done(processGeocodeCallback(resolve, reject))\n      .fail(reject);\n  });\n\nconst processAutocompleteResults = resolve => ({ predictions }) =>\n  resolve(predictionResults(JSON.parse(predictions)));\n\nconst predictionResults = predictions => ({\n  locations: {\n    hits: predictions.map((p, i) => ({ ...p, id: `location-${i}` })),\n    nbHits: predictions.length\n  }\n});\n\nconst processPlacesCallback = resolve => ({ result }) =>\n  resolve(JSON.parse(result));\n\nconst processGeocodeCallback = (resolve, reject) => ({ results }) => {\n  const parsedResults = JSON.parse(results);\n  if (parsedResults[0]) {\n    resolve(parsedResults[0].formatted);\n  } else {\n    reject(\"No results\");\n  }\n};\n","let callbacks = [];\n\nexport default function() {\n  callbacks = [];\n  window.mapsCallback = function() {\n    window.isMapReady = true;\n    callbacks.forEach(callback => callback());\n    callbacks = [];\n  };\n}\n\nexport function doWhenGoogleMapsIsReady(callback) {\n  // If the map is not ready, add it to an array of callback that will get called soon.\n  // If the map is ready, call the callback, but with a timeout.\n  // The reason for the timeout is so that this function works similar in both cases -- always with a delay, never\n  // immediately.\n  window.isMapReady ? window.setTimeout(callback, 0) : callbacks.push(callback);\n}\n","export function getFeatureIcon(feature) {\n  const icon = document.getElementById(`icon-feature-${feature}`);\n  if (icon) {\n    return icon.innerHTML;\n  }\n  return \"\";\n}\n\nexport function getSvgIcon(feature) {\n  const icon = document.getElementById(`icon-feature-${feature}`);\n  if (icon) {\n    const svg = icon.getElementsByTagName(\"svg\").item(0);\n    if (svg) {\n      return svg.outerHTML;\n    }\n  }\n  return \"\";\n}\n","/* eslint-disable */\nimport { doWhenGoogleMapsIsReady } from \"./google-maps-loaded\";\nimport * as GoogleMapsHelpers from \"./google-maps-helpers\";\nimport Algolia from \"./algolia-search\";\nimport * as AlgoliaResult from \"./algolia-result\";\nimport AlgoliaAutocompleteWithGeo from \"./algolia-autocomplete-with-geo\";\n\nexport function init() {\n  document.addEventListener(\"turbolinks:load\", () => {\n    doWhenGoogleMapsIsReady(() => {\n      new TripPlannerLocControls();\n    });\n  });\n}\n\nexport class TripPlannerLocControls {\n  constructor({ containerEl } = {}) {\n    this.containerElement = containerEl;\n    this.toInput = this.getById(TripPlannerLocControls.SELECTORS.to.input);\n    this.fromInput = this.getById(TripPlannerLocControls.SELECTORS.from.input);\n    this.toLat = this.getById(TripPlannerLocControls.SELECTORS.to.lat);\n    this.toLng = this.getById(TripPlannerLocControls.SELECTORS.to.lng);\n    this.fromLat = this.getById(TripPlannerLocControls.SELECTORS.from.lat);\n    this.fromLng = this.getById(TripPlannerLocControls.SELECTORS.from.lng);\n    this.controller = null;\n    this.toInputDirty = false;\n    this.fromInputDirty = false;\n\n    this.markers = {\n      from: null,\n      to: null\n    };\n\n    this.bind();\n    if (this.toInput && this.fromInput) {\n      this.init();\n    }\n  }\n\n  getById(id) {\n    return this.containerElement\n      ? this.containerElement.querySelector(`#${id}`)\n      : document.getElementById(id);\n  }\n\n  init() {\n    this.toController = new Algolia(\n      TripPlannerLocControls.INDICES.to,\n      TripPlannerLocControls.PARAMS\n    );\n    this.fromController = new Algolia(\n      TripPlannerLocControls.INDICES.from,\n      TripPlannerLocControls.PARAMS\n    );\n    this.toAutocomplete = new AlgoliaAutocompleteWithGeo({\n      id: \"trip-planner__autocomplete--to\",\n      selectors: TripPlannerLocControls.SELECTORS.to,\n      indices: Object.keys(TripPlannerLocControls.INDICES.to),\n      locationParams: { position: 1, hitLimit: 3 },\n      popular: TripPlannerLocControls.POPULAR,\n      parent: this,\n      containerEl: this.containerElement\n    });\n\n    this.fromAutocomplete = new AlgoliaAutocompleteWithGeo({\n      id: \"trip-planner__autocomplete--from\",\n      selectors: TripPlannerLocControls.SELECTORS.from,\n      indices: Object.keys(TripPlannerLocControls.INDICES.from),\n      locationParams: { position: 1, hitLimit: 3 },\n      popular: TripPlannerLocControls.POPULAR,\n      parent: this,\n      containerEl: this.containerElement\n    });\n    this.autocompletes = [this.toAutocomplete, this.fromAutocomplete];\n\n    this.autocompletes.forEach(ac => {\n      ac.renderFooterTemplate = this.renderFooterTemplate;\n      ac.setError(null);\n      ac.onHitSelected = this.onHitSelected(\n        ac,\n        this.getById(ac._selectors.lat),\n        this.getById(ac._selectors.lng)\n      );\n      ac._resetButton.addEventListener(\"click\", () => {\n        this.removeMarker(ac);\n      });\n      ac.showLocation = this.useMyLocation(ac);\n    });\n\n    this.toController.addWidget(this.toAutocomplete);\n    this.fromController.addWidget(this.fromAutocomplete);\n    this.getById(\"trip-plan-reverse-control\").addEventListener(\n      \"click\",\n      this.reverseTrip\n    );\n    this.setupFormValidation();\n  }\n\n  bind() {\n    this.removeMarker = this.removeMarker.bind(this);\n    this.reverseTrip = this.reverseTrip.bind(this);\n    this.swapMarkers = this.swapMarkers.bind(this);\n    this.resetResetButtons = this.resetResetButtons.bind(this);\n    this.useMyLocation = this.useMyLocation.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onInvalidAddress = this.onInvalidAddress.bind(this);\n    this.onAutocompleteShown = this.onAutocompleteShown.bind(this);\n    this.onInputReset = this.onInputReset.bind(this);\n  }\n\n  setupFormValidation() {\n    this.getById(\"plan\").addEventListener(\"submit\", this.onSubmit);\n\n    this.autocompletes.forEach(ac => {\n      this.getById(ac._selectors.input).addEventListener(\n        \"change\",\n        this.onInputChange(ac)\n      );\n      this.getById(ac._selectors.input).addEventListener(\n        \"input\",\n        this.onInputChange(ac)\n      );\n      this.getById(ac._selectors.input).addEventListener(\n        \"blur\",\n        this.onInputChange(ac)\n      );\n    });\n\n    document.addEventListener(\"autocomplete:empty\", this.onInvalidAddress);\n    document.addEventListener(\"autocomplete:shown\", this.onAutocompleteShown);\n    window.$(document).on(\"autocomplete:reset\", this.onInputReset);\n  }\n\n  onSubmit(ev) {\n    const missingFrom = this.getById(\"from\").value === \"\";\n    const missingTo = this.getById(\"to\").value === \"\";\n    this.toInputDirty = true;\n    this.fromInputDirty = true;\n\n    if (\n      this.fromAutocomplete.error ||\n      this.toAutocomplete.error ||\n      missingFrom ||\n      missingTo\n    ) {\n      ev.preventDefault();\n\n      if (missingFrom) this.toggleError(this.fromAutocomplete, \"missing\");\n      if (missingTo) this.toggleError(this.toAutocomplete, \"missing\");\n\n      return false;\n    }\n    return true;\n  }\n\n  onAutocompleteShown({ srcElement }) {\n    if (srcElement && (srcElement.id === \"from\" || srcElement.id === \"to\")) {\n      const ac = this[`${srcElement.id}Autocomplete`];\n      this.toggleError(ac, null);\n    }\n  }\n\n  onInputReset(ev, { autocomplete }) {\n    if (\n      autocomplete.id === this.fromAutocomplete.id ||\n      autocomplete.id === this.toAutocomplete.id\n    ) {\n      this.toInputDirty = false;\n      this.fromInputDirty = false;\n      this.toggleError(autocomplete, null);\n    }\n  }\n\n  onInputChange(ac) {\n    if (this.getById(\"to_id\")) {\n      this.getById(\"to_id\").value = null;\n    }\n    if (this.getById(\"from_id\")) {\n      this.getById(\"from_id\").value = null;\n    }\n    return () => {\n      if (ac && ac._input.id === \"to\") {\n        this.toInputDirty = true;\n      } else if (ac && ac._input.id === \"from\") {\n        this.fromInputDirty = true;\n      }\n      if (ac.error === \"invalid\") {\n        return;\n      }\n      if (ac && ac._input.value.length === 0) {\n        this.toggleError(ac, \"missing\");\n        return;\n      }\n\n      this.toggleError(ac, null);\n    };\n  }\n\n  onInvalidAddress({ srcElement }) {\n    if (srcElement && (srcElement.id === \"from\" || srcElement.id === \"to\")) {\n      const ac = this[`${srcElement.id}Autocomplete`];\n      this.toggleError(ac, \"invalid\");\n    }\n  }\n\n  toggleError(ac, errorType) {\n    const required = this.getById(ac._selectors.required);\n    const container = this.getById(ac._selectors.container);\n    const input = this.getById(ac._selectors.input);\n    const inputDirty =\n      (input.id === \"from\" && this.fromInputDirty) ||\n      (input.id === \"to\" && this.toInputDirty);\n    if (required && container && input && inputDirty) {\n      if (errorType === \"missing\" || errorType === \"invalid\") {\n        container.classList.add(\"c-form__input-container--error\");\n        required.classList.remove(\"m-trip-plan__hidden\");\n        input.setAttribute(\"aria-invalid\", \"true\");\n      } else if (errorType === null) {\n        container.classList.remove(\"c-form__input-container--error\");\n        required.classList.add(\"m-trip-plan__hidden\");\n        input.setAttribute(\"aria-invalid\", \"false\");\n      } else {\n        throw new Error(`unrecognized error type: ${errorType}`);\n      }\n      ac.setError(errorType);\n      TripPlannerLocControls.updateErrorContent(ac);\n    }\n  }\n\n  static updateErrorContent(ac) {\n    const errorContainer = document.getElementById(ac._selectors.locationError);\n\n    if (errorContainer) {\n      errorContainer.innerHTML = \"\";\n\n      if (ac.error === \"invalid\") {\n        errorContainer.innerHTML =\n          \"We're sorry, but we couldn't find that address.\";\n      }\n    }\n  }\n\n  updateMarker(ac, lat, lng, title) {\n    const label = ac._input.getAttribute(\"data-label\");\n    const detail = {\n      latitude: lat,\n      longitude: lng,\n      label,\n      title\n    };\n    const event = new Event(\"trip-plan:update-marker\");\n    event.detail = detail;\n    document.dispatchEvent(event);\n  }\n\n  removeMarker(ac) {\n    const label = ac._input.getAttribute(\"data-label\");\n    const detail = { label };\n    const event = new Event(\"trip-plan:remove-marker\");\n    event.detail = detail;\n    document.dispatchEvent(event);\n  }\n\n  resetResetButtons() {\n    const from = this.fromAutocomplete;\n    const to = this.toAutocomplete;\n    from.resetResetButton();\n    to.resetResetButton();\n  }\n\n  swapMarkers() {\n    const from = this.fromAutocomplete;\n    const to = this.toAutocomplete;\n\n    const fromVal = from.getValue();\n    const toVal = to.getValue();\n\n    if (fromVal) {\n      this.updateMarker(\n        from,\n        this.getById(\"from_latitude\").value,\n        this.getById(\"from_longitude\").value,\n        fromVal\n      );\n    } else {\n      this.removeMarker(from);\n    }\n\n    if (toVal) {\n      this.updateMarker(\n        to,\n        this.getById(\"to_latitude\").value,\n        this.getById(\"to_longitude\").value,\n        to\n      );\n    } else {\n      this.removeMarker(to);\n    }\n  }\n\n  useMyLocation(ac) {\n    return (lat, lng) => {\n      this.getById(ac._selectors.lat).value = lat;\n      this.getById(ac._selectors.lng).value = lng;\n      const address = ac._input.value;\n      this.updateMarker(ac, lat, lng, address);\n    };\n  }\n\n  onHitSelected(ac, lat, lng) {\n    return ({\n      originalEvent: {\n        _args: [hit, type]\n      }\n    }) => {\n      switch (type) {\n        case \"stops\":\n          this.setAutocompleteValue(\n            ac,\n            hit.stop.name,\n            lat,\n            lng,\n            hit._geoloc.lat,\n            hit._geoloc.lng\n          );\n          break;\n        case \"locations\":\n          GoogleMapsHelpers.lookupPlace(hit.address).then(res => {\n            const { latitude, longitude } = res;\n            this.setAutocompleteValue(\n              ac,\n              hit.address,\n              lat,\n              lng,\n              latitude,\n              longitude\n            );\n            ac._input.blur();\n          });\n          break;\n        case \"usemylocation\":\n          ac.useMyLocationSearch();\n          break;\n        case \"popular\":\n          this.setAutocompleteValue(\n            ac,\n            hit.name,\n            lat,\n            lng,\n            hit.latitude,\n            hit.longitude\n          );\n          break;\n        default:\n          console.error(`onHitSelected not implemented for ${type}.`);\n      }\n    };\n  }\n\n  setAutocompleteValue(ac, name, latEl, lngEl, lat, lng) {\n    ac.setValue(name);\n    latEl.value = lat;\n    lngEl.value = lng;\n    this.updateMarker(ac, lat, lng, name);\n    this.resetResetButtons();\n  }\n\n  renderFooterTemplate(indexName) {\n    if (indexName === \"locations\" && AlgoliaResult.autocompleteByGoogle()) {\n      return AlgoliaResult.TEMPLATES.poweredByGoogleLogo.render({\n        logo: document.getElementById(\"powered-by-google-logo\").innerHTML\n      });\n    }\n    return null;\n  }\n\n  reverseTrip(e) {\n    // Prevent default click behavior bc the target area overlaps with the dropdown\n    e.preventDefault();\n    const fromAc = this.fromAutocomplete;\n    const toAc = this.toAutocomplete;\n    const fromError = fromAc.error;\n    const toError = toAc.error;\n    const from = fromAc.getValue();\n    const to = toAc.getValue();\n    const fromLat = this.getById(\"from_latitude\").value;\n    const fromLng = this.getById(\"from_longitude\").value;\n    const fromId = this.getById(\"from_id\");\n    const toLat = this.getById(\"to_latitude\").value;\n    const toLng = this.getById(\"to_longitude\").value;\n    const toId = this.getById(\"to_id\");\n    this.getById(\"from_latitude\").value = toLat;\n    this.getById(\"from_longitude\").value = toLng;\n    fromId ? (this.getById(\"from_id\").value = toId) : null;\n    this.getById(\"to_latitude\").value = fromLat;\n    this.getById(\"to_longitude\").value = fromLng;\n    toId ? (this.getById(\"to_id\").value = fromId) : null;\n    fromAc.setValue(to);\n    toAc.setValue(from);\n    this.swapMarkers();\n    this.resetResetButtons();\n    this.toggleError(toAc, fromError);\n    this.toggleError(fromAc, toError);\n  }\n}\n\nTripPlannerLocControls.INDICES = {\n  to: {\n    stops: {\n      indexName: \"stops\",\n      query: \"\"\n    }\n  },\n  from: {\n    stops: {\n      indexName: \"stops\",\n      query: \"\"\n    }\n  }\n};\n\nTripPlannerLocControls.SELECTORS = {\n  to: {\n    input: \"to\",\n    lat: \"to_latitude\",\n    lng: \"to_longitude\",\n    resetButton: \"trip-plan__reset--to\",\n    container: \"trip-plan__container--to\",\n    locationLoadingIndicator: \"trip-plan__loading-indicator--to\",\n    required: \"trip-plan__required--to\",\n    locationError: \"trip-plan__location-error--to\",\n    announcer: \"trip-plan__announcer--to\"\n  },\n  from: {\n    input: \"from\",\n    lat: \"from_latitude\",\n    lng: \"from_longitude\",\n    resetButton: \"trip-plan__reset--from\",\n    container: \"trip-plan__container--from\",\n    locationLoadingIndicator: \"trip-plan__loading-indicator--from\",\n    required: \"trip-plan__required--from\",\n    locationError: \"trip-plan__location-error--from\",\n    announcer: \"trip-plan__announcer--from\"\n  },\n  map: \"trip-plan-map--initial\"\n};\n\nTripPlannerLocControls.PARAMS = {\n  stops: {\n    hitsPerPage: 3,\n    facets: [\"*\"],\n    facetFilters: [[]]\n  }\n};\n\nTripPlannerLocControls.POPULAR = [\n  {\n    icon: \"airplane\",\n    name: \"Boston Logan Airport\",\n    features: [],\n    latitude: 42.365396,\n    longitude: -71.017547,\n    url: \"#\"\n  },\n  {\n    icon: \"station\",\n    name: \"South Station\",\n    features: [\"red_line\", \"bus\", \"commuter_rail\", \"access\"],\n    latitude: 42.352271,\n    longitude: -71.055242,\n    url: \"#\"\n  },\n  {\n    icon: \"station\",\n    name: \"North Station\",\n    features: [\n      \"orange_line\",\n      \"green-line-c\",\n      \"green-line-e\",\n      \"bus\",\n      \"commuter_rail\",\n      \"access\"\n    ],\n    latitude: 42.365577,\n    longitude: -71.06129,\n    url: \"#\"\n  }\n];\n","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><rect width=\\\"16\\\" height=\\\"16\\\" fill=\\\"#165c96\\\" rx=\\\"3.74837\\\"></rect><g fill=\\\"#fff\\\"><path d=\\\"m6.90573 13a3.27922 3.27922 0 0 1 -1.36713-6.26353l.07439.97088a2.38543 2.38543 0 1 0 3.6515 2.29152l.58176 1.19057a3.33147 3.33147 0 0 1 -2.94052 1.81056z\\\"></path><path d=\\\"m10.61986 11.93766-1.34186-3.14392-3.27138-.00087-.31762-4.4696a.926.926 0 0 1 -.11143-.4318.89147.89147 0 1 1 .97853.888l.0939 1.6679h2.293l.00674.7194h-2.21937l.05246.80944 3.04171-.02043 1.29828 2.99729.98591-.35587.27281.64958z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m47.55089 42.53651-20.5403-40.60229a3.60991 3.60991 0 0 0 -1.27059-1.3994 3.08289 3.08289 0 0 0 -3.4708 0 3.57213 3.57213 0 0 0 -1.2518 1.3994l-20.5404 40.60229a3.715 3.715 0 0 0 0 3.6423 3.47281 3.47281 0 0 0 1.2518 1.3228 3.21739 3.21739 0 0 0 1.70689.49839h41.1186a3.16147 3.16147 0 0 0 1.688-.49841 3.47248 3.47248 0 0 0 1.2517-1.3228 3.71467 3.71467 0 0 0 .0569-3.64228z\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m27.04259 39.22282a.71323.71323 0 0 1 -.21909.544.73324.73324 0 0 1 -.54.2332h-4.5683a.73294.73294 0 0 1 -.5394-.2332.77238.77238 0 0 1 -.2192-.544v-4.4456a.77247.77247 0 0 1 .2192-.544.73331.73331 0 0 1 .53939-.23322h4.56881a.73351.73351 0 0 1 .54.2332.71375.71375 0 0 1 .2192.544z\\\"></path><path d=\\\"m26.73759 30.35892a.62508.62508 0 0 1 -.2345.4568.7061.7061 0 0 1 -.516.1828h-4.12809a.73374.73374 0 0 1 -.516-.1828.53482.53482 0 0 1 -.219-.4568l-1.1215-14.4817a.71.71 0 0 1 .2189-.5848.76.76 0 0 1 .516-.2924h6.512a.81448.81448 0 0 1 .53161.2924.70371.70371 0 0 1 .2189.53z\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M19.3446 16.986C17.7003 16.986 16.306 15.8279 15.9013 14.2593C19.6117 14.2669 19.941 14.4625 19.9953 13.8002C19.9894 13.6008 19.9197 13.4711 18.3026 9.776C18.6318 9.6735 18.9785 9.61729 19.3446 9.61729C21.3102 9.61729 22.9059 11.2691 22.9059 13.3025C22.9059 15.3321 21.3102 16.986 19.3446 16.986ZM17.3905 10.2175L18.7364 13.2968L15.7755 13.287C15.7831 12.0071 16.4185 10.8762 17.3905 10.2175ZM14.6852 13.2851L13.8176 13.2832L16.0659 7.18884L16.9374 9.18346C15.5953 10.0219 14.6929 11.546 14.6852 13.2851ZM12.8222 13.1553L7.18669 6.81104L15.1112 6.79556L12.8222 13.1553ZM8.22089 13.3782C8.22089 15.4096 6.6213 17.0633 4.65365 17.0633C2.68809 17.0633 1.09041 15.4096 1.09041 13.3782C1.09041 11.3484 2.68809 9.69856 4.65365 9.69856C4.83759 9.69856 5.00604 9.71022 5.17658 9.73737C4.04162 13.4381 4.18118 13.0161 4.17144 13.3278C4.16378 13.5891 4.37087 13.8002 4.62859 13.8157C5.09531 13.7694 4.99073 13.8467 6.15075 10.0337C7.37063 10.6184 8.22089 11.8985 8.22089 13.3782ZM19.3446 8.49208C18.8236 8.49208 18.3202 8.58118 17.8475 8.7458C17.4932 7.91503 17.0672 6.94486 16.5695 5.80033L16.8869 4.90169L17.9735 4.8822V3.93919H13.8738C13.5135 4.44472 14.0248 4.44472 15.8355 4.86306L15.5179 5.78084H7.41918C7.96908 3.81146 7.65933 3.95467 10.1128 3.96251V3C6.73737 3.03289 7.32225 2.63978 5.51157 8.65287C5.23087 8.59875 4.95001 8.57143 4.65365 8.57143C2.08963 8.57143 0 10.7289 0 13.3782C0 16.0313 2.08963 18.1906 4.65365 18.1906C7.22932 18.1906 9.31495 16.0313 9.31495 13.3782C9.31495 11.397 8.14328 9.68708 6.47982 8.95497C6.58057 8.62573 6.6909 8.27334 6.80906 7.89571C13.6162 15.3205 11.0656 14.1159 14.7279 14.2669H14.7762C15.2118 16.461 17.0963 18.1091 19.3446 18.1091C21.9067 18.1091 24 15.9556 24 13.3025C24 10.6475 21.9067 8.49208 19.3446 8.49208Z\\\" fill=\\\"#165C96\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#003da5\\\" d=\\\"m24 0a24 24 0 1 0 24 24 24 24 0 0 0 -24-24\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m16.21338 13.647a12.87772 12.87772 0 0 1 2.69726.26123 5.83 5.83 0 0 1 2.0879.85547 3.98326 3.98326 0 0 1 1.34863 1.58057 5.56185 5.56185 0 0 1 .47851 2.43555 4.5366 4.5366 0 0 1 -.71093 2.61035 5.16141 5.16141 0 0 1 -2.10254 1.71093 4.97692 4.97692 0 0 1 2.85644 1.92823 5.74358 5.74358 0 0 1 .94239 3.3208 5.70688 5.70688 0 0 1 -.6084 2.71142 5.28726 5.28726 0 0 1 -1.63864 1.87058 7.25022 7.25022 0 0 1 -2.3496 1.07275 10.589 10.589 0 0 1 -2.71094.34815h-10.03422v-20.70603zm-.58008 8.38086a3.27472 3.27472 0 0 0 2.001-.57959 2.19 2.19 0 0 0 .7832-1.88525 2.41024 2.41024 0 0 0 -.26074-1.189 1.94175 1.94175 0 0 0 -.69629-.72509 2.94457 2.94457 0 0 0 -1.001-.36231 6.66287 6.66287 0 0 0 -1.17383-.10156h-4.26364v4.84277zm.26074 8.78711a6.08961 6.08961 0 0 0 1.27637-.13037 3.12816 3.12816 0 0 0 1.07324-.43506 2.20243 2.20243 0 0 0 .73926-.82666 2.84574 2.84574 0 0 0 .27539-1.334 2.67712 2.67712 0 0 0 -.89941-2.27637 3.83584 3.83584 0 0 0 -2.37793-.68164h-4.95896v5.68408z\\\"></path><path d=\\\"m31.438 13.647v16.8779h10.09276v3.8281h-14.64551v-20.706z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#003da5\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m5.44956 4.25a4.66423 4.66423 0 0 1 .977.09462 2.11161 2.11161 0 0 1 .75626.30986 1.44274 1.44274 0 0 1 .4885.5725 2.01466 2.01466 0 0 1 .17332.88219 1.64315 1.64315 0 0 1 -.25751.9455 1.86958 1.86958 0 0 1 -.76157.61973 1.80263 1.80263 0 0 1 1.03464.69842 2.08038 2.08038 0 0 1 .34135 1.20284 2.06714 2.06714 0 0 1 -.22037.98211 1.91511 1.91511 0 0 1 -.59355.67756 2.626 2.626 0 0 1 -.85106.38857 3.83549 3.83549 0 0 1 -.98194.1261h-3.63452v-7.5zm-.21011 3.03566a1.1862 1.1862 0 0 0 .72478-.20994.79326.79326 0 0 0 .28368-.68286.873.873 0 0 0 -.09444-.43066.70337.70337 0 0 0 -.25221-.26264 1.06655 1.06655 0 0 0 -.36256-.13123 2.413 2.413 0 0 0 -.42518-.03679h-1.54436v1.75412zm.09444 3.1828a2.20573 2.20573 0 0 0 .46232-.04722 1.133 1.133 0 0 0 .38874-.15759.7977.7977 0 0 0 .26777-.29942 1.03078 1.03078 0 0 0 .09975-.48323.96968.96968 0 0 0 -.32578-.82453 1.3894 1.3894 0 0 0 -.86132-.2469h-1.79621v2.05885zm5.63022-6.21846v6.1134h3.65573v1.3866h-5.30479v-7.5z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m14.29 0h19.43a1.05 1.05 0 0 1 .71.29l13.28 13.28a1.05 1.05 0 0 1 .29.71v18.92a1 1 0 0 1 -.28.69l-13.29 13.8a1 1 0 0 1 -.72.31h-19.43a1.05 1.05 0 0 1 -.71-.29l-13.28-13.28a1.05 1.05 0 0 1 -.29-.71v-18.92a1 1 0 0 1 .28-.69l13.29-13.8a1 1 0 0 1 .72-.31z\\\"></path><path fill=\\\"#fff\\\" d=\\\"m12.28 15.76 3.43-3.47a1 1 0 0 1 1.39 0l6.9 6.84 6.89-6.84a1 1 0 0 1 1.4 0l3.43 3.47a1 1 0 0 1 0 1.39l-6.91 6.85 6.9 7a1 1 0 0 1 0 1.4l-3.4 3.33a1 1 0 0 1 -1.39 0l-6.91-7-6.91 7a1 1 0 0 1 -1.39 0l-3.4-3.33a1 1 0 0 1 0-1.4l6.9-7-6.9-6.85a1 1 0 0 1 -.03-1.39z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\" role=\\\"img\\\" style=\\\"enable-background:new 0 0 16 16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" xml:space=\\\"preserve\\\"><path d=\\\"M8,15.3C4,15.3,0.7,12,0.7,8C0.7,4,4,0.7,8,0.7c4,0,7.3,3.3,7.3,7.3C15.3,12,12,15.3,8,15.3 C8,15.3,8,15.3,8,15.3\\\" style=\\\"fill:#FFFFFF\\\"></path><g><path d=\\\"M8,0C3.6,0,0,3.6,0,8s3.6,8,8,8s8-3.6,8-8S12.4,0,8,0 M8,15.3C4,15.3,0.7,12,0.7,8C0.7,4,4,0.7,8,0.7 c4,0,7.3,3.3,7.3,7.3C15.3,12,12,15.3,8,15.3C8,15.3,8,15.3,8,15.3\\\" style=\\\"fill:#1C1E23\\\"></path><path d=\\\"M6.7,13.2h2.5V7h3.8V4.4H2.9V7h3.8L6.7,13.2z\\\" style=\\\"fill:#1C1E23\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path class=\\\"person person-left\\\" d=\\\"m6.86 16.05a6.86 6.86 0 0 0 -6.86 6.86v17.77a3.43 3.43 0 0 0 3.43 3.42h6.86a3.42 3.42 0 0 0 3.42-3.42v-17.77a6.86 6.86 0 0 0 -6.85-6.86z\\\"></path><path class=\\\"person person-left\\\" d=\\\"m6.9 13.23a4.93 4.93 0 1 0 -4.9-4.93 4.93 4.93 0 0 0 4.9 4.93z\\\"></path><path class=\\\"person person-middle\\\" d=\\\"m24 16.05a6.86 6.86 0 0 0 -6.86 6.86v17.77a3.43 3.43 0 0 0 3.43 3.42h6.86a3.43 3.43 0 0 0 3.43-3.42v-17.77a6.86 6.86 0 0 0 -6.86-6.86z\\\"></path><path class=\\\"person person-middle\\\" d=\\\"m24.05 13.23a4.93 4.93 0 1 0 -4.93-4.93 4.93 4.93 0 0 0 4.93 4.93z\\\"></path><path class=\\\"person person-right\\\" d=\\\"m41.14 16.05a6.86 6.86 0 0 0 -6.85 6.86v17.77a3.42 3.42 0 0 0 3.42 3.42h6.86a3.43 3.43 0 0 0 3.43-3.42v-17.77a6.86 6.86 0 0 0 -6.86-6.86z\\\"></path><path class=\\\"person person-right\\\" d=\\\"m41.19 13.23a4.93 4.93 0 1 0 -4.93-4.93 4.93 4.93 0 0 0 4.93 4.93z\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M8.42021 13.4913C8.42075 13.1156 8.72467 12.8117 9.09953 12.812C9.47438 12.8117 9.7783 13.1156 9.77884 13.4913C9.7783 13.8653 9.47438 14.1692 9.09953 14.1706C8.72467 14.1692 8.42075 13.8653 8.42021 13.4913ZM7.54005 17.4609V14.8795C7.54118 14.5816 7.77865 14.379 8.03625 14.3774C8.03571 14.379 10.1451 14.3774 10.1451 14.3774C10.4256 14.379 10.6405 14.6042 10.6413 14.8795V17.4609C10.6405 17.6746 10.4686 17.8233 10.2809 17.8212C10.2809 17.8212 10.1952 17.8213 10.0565 17.8214V21.2237C10.0594 21.8417 9.15505 21.8417 9.15269 21.2237V17.822C9.1074 17.822 9.06207 17.8221 9.01683 17.8221V21.2237C9.01757 21.837 8.11324 21.837 8.11304 21.2237V17.822C7.98215 17.8219 7.90137 17.8216 7.90039 17.8212C7.71608 17.8233 7.54118 17.6721 7.54005 17.4609ZM11.6691 13.4913C11.6697 13.1156 11.9736 12.8117 12.3484 12.812C12.7233 12.8117 13.0272 13.1156 13.0277 13.4913C13.0272 13.8653 12.7233 14.1692 12.3484 14.1706C11.9736 14.1692 11.6697 13.8653 11.6691 13.4913ZM10.789 17.4609V14.8795C10.79 14.5816 11.0276 14.379 11.2852 14.3774C11.2846 14.379 13.394 14.3774 13.394 14.3774C13.6744 14.379 13.8894 14.6042 13.8902 14.8795V17.4609C13.8894 17.6746 13.7175 17.8233 13.5299 17.8212C13.5299 17.8212 13.4441 17.8213 13.3054 17.8214V21.2237C13.3083 21.8417 12.404 21.8417 12.4016 21.2237V17.822C12.3563 17.822 12.311 17.8221 12.2657 17.8221V21.2237C12.2665 21.837 11.3621 21.837 11.3619 21.2237V17.822C11.2311 17.8219 11.1503 17.8216 11.1493 17.8212C10.965 17.8233 10.79 17.6721 10.789 17.4609ZM14.918 13.4913C14.9186 13.1156 15.2225 12.8117 15.5973 12.812C15.9722 12.8117 16.2761 13.1156 16.2767 13.4913C16.2761 13.8653 15.9722 14.1692 15.5973 14.1706C15.2225 14.1692 14.9186 13.8653 14.918 13.4913ZM14.0379 17.4609V14.8795C14.0389 14.5816 14.2765 14.379 14.5341 14.3774C14.5335 14.379 16.6429 14.3774 16.6429 14.3774C16.9233 14.379 17.1383 14.6042 17.1391 14.8795V17.4609C17.1383 17.6746 16.9664 17.8233 16.7788 17.8212C16.7788 17.8212 16.693 17.8213 16.5543 17.8214V21.2237C16.5572 21.8417 15.6529 21.8417 15.6505 21.2237V17.822C15.6052 17.822 15.5599 17.8221 15.5146 17.8221V21.2237C15.5154 21.837 14.611 21.837 14.6108 21.2237V17.822C14.48 17.8219 14.3992 17.8216 14.3981 17.8212C14.2139 17.8233 14.0389 17.6721 14.0379 17.4609ZM5.30717 3.4906L7.94174 0.324392C8.35868 -0.0933871 8.90262 -0.0958485 9.31809 0.324392L11.9704 3.47878C12.7884 4.41137 11.4624 5.56507 10.7063 4.737L9.61344 3.40199L9.64889 7.66101C9.63535 9.07827 7.60478 9.06242 7.61684 7.66101L7.64638 3.40199L6.56538 4.74881C5.82601 5.58973 4.48771 4.42367 5.30717 3.4906ZM12.6792 5.22728C11.8593 4.29445 13.1976 3.12844 13.9374 3.96907L15.0184 5.31589L14.9889 1.05687C14.9764 -0.344291 17.0069 -0.360142 17.0209 1.05687L16.9855 5.31589L18.0783 3.98089C18.8339 3.15306 20.1599 4.30676 19.3424 5.24501L16.6901 8.39349C16.2742 8.81402 15.7302 8.81151 15.3138 8.39349L12.6792 5.22728ZM7.02609 21.968H17.6411V11.4179H7.02609V21.968ZM17.7121 9.36225H6.96116C5.82601 9.36486 5.0029 10.2539 5 11.3234V22.0566C5.00064 23.151 5.88754 24.0026 6.96116 24H17.7239C18.797 24.0024 19.6708 23.2002 19.6673 22.0566V11.3234C19.6683 10.2416 18.8093 9.36486 17.7121 9.36225Z\\\" fill=\\\"#165C96\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M11.7977 4.61893C11.7975 5.5091 11.0735 6.23247 10.1828 6.23213C9.28712 6.23247 8.56306 5.5091 8.56205 4.61893C8.56306 3.7247 9.28712 3.00143 10.1828 3C11.0735 3.00143 11.7975 3.7247 11.7977 4.61893ZM19.0164 9.23668H21.0155C22.0078 9.23943 22.3942 8.23691 22.3951 7.70116C22.3942 7.16261 21.8496 6.2619 21.038 6.26092H17.71C17.0329 6.2619 16.6379 6.31164 16.2403 6.70925L6.52088 16.3819C6.15885 16.7401 5.74439 16.9191 5.11309 16.9198H2.95073C2.24838 16.9191 1.56795 17.4208 1.56546 18.3153C1.56795 19.2113 2.28151 19.8929 3.09151 19.8956H6.24496C6.87278 19.8929 7.36335 19.7404 7.74847 19.3576L17.3102 9.84192C17.7954 9.35763 18.1708 9.23943 19.0164 9.23668ZM17.4904 4.69739H21.1844C22.3942 4.69926 24.0014 5.90885 24 7.72358C24.0014 9.55611 22.4059 10.8277 21.2801 10.8282C20.244 10.8277 18.9376 10.8282 18.9376 10.8282C18.5877 10.8277 18.4752 10.8836 18.2731 11.0636L8.78461 20.4728C8.02257 21.1902 7.09564 21.4811 6.32942 21.4816C5.56635 21.4811 3.09151 21.4816 3.09151 21.4816C1.09869 21.4811 0.00126701 19.727 0 18.3377C0.00126701 16.9517 1.09869 15.315 2.9282 15.3171C2.9282 15.3171 4.74711 15.3154 4.74707 15.3171C5.29859 15.315 5.3328 15.3028 5.61427 15.0257L8.58752 12.0611H8.58189V7.99258C8.58198 5.89367 11.7305 5.87032 11.7297 7.99258V8.9901L15.1534 5.58843C15.7397 5.00636 16.7231 4.69524 17.4904 4.69739Z\\\" fill=\\\"#165C96\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M23.965 17.43L23.85 16.93L23.82 16.785L23.37 14.785L23.305 14.49L21.92 8.23003C21.7168 7.45528 20.9257 6.99043 20.15 7.19003L19.055 7.43003L16.555 2.22503C16.1809 1.51695 15.3049 1.24431 14.595 1.61503L0.879996 8.24503C0.148264 8.57086 -0.182503 9.42683 0.139996 10.16L2.92 15.91L3.05 16.18L3.95 18.04L4.245 18.64L4.33 18.82C4.63627 19.2867 5.18108 19.5387 5.735 19.47L6.015 20.74L6.16 21.395L6.205 21.585C6.46594 22.2924 7.21975 22.6877 7.95 22.5L22.84 19.19C23.629 19.0038 24.1272 18.2243 23.965 17.43ZM5.295 17.39L4.5 17.775L3.6 15.915L18.905 8.50003L19.805 10.36L5.295 17.39ZM6.33 19.275L6.625 20.595L23.23 16.885L22.78 14.885L9.125 17.925L6.33 19.275Z\\\" fill=\\\"#165C96\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m8.59043 4a5.39839 5.39839 0 0 1 1.08557.10121 2.392 2.392 0 0 1 .83953.33044 1.55783 1.55783 0 0 1 .54221.61054 2.06794 2.06794 0 0 1 .19251.941 1.70139 1.70139 0 0 1 -.28591 1.00827 2.06017 2.06017 0 0 1 -.84522.66143 2.00387 2.00387 0 0 1 1.14822.74512 2.15155 2.15155 0 0 1 .37933 1.28291 2.13665 2.13665 0 0 1 -.24491 1.04767 2.05831 2.05831 0 0 1 -.65955.72215 2.95712 2.95712 0 0 1 -.94432.41469 4.42311 4.42311 0 0 1 -1.09014.13457h-4.03587v-8zm-.23352 3.23819a1.35217 1.35217 0 0 0 .80535-.22431.83167.83167 0 0 0 .3144-.72817.89181.89181 0 0 0 -.1048-.459.75208.75208 0 0 0 -.27909-.28011 1.2235 1.2235 0 0 0 -.40324-.14 2.75738 2.75738 0 0 0 -.47159-.03939h-1.71551v1.871zm.10593 3.39465a2.50985 2.50985 0 0 0 .51261-.05033 1.28994 1.28994 0 0 0 .43172-.168.85959.85959 0 0 0 .29731-.31949 1.05918 1.05918 0 0 0 .11052-.51532 1.01659 1.01659 0 0 0 -.3611-.87916 1.59077 1.59077 0 0 0 -.9569-.26369h-1.99457v2.196z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m9.91236 6.22237a1.685 1.685 0 0 0 -.37441-.423 1.75365 1.75365 0 0 0 -1.10334-.3859 1.96325 1.96325 0 0 0 -.9632.21962 1.8196 1.8196 0 0 0 -.64318.58932 2.59 2.59 0 0 0 -.35871.84031 4.22351 4.22351 0 0 0 -.1119.97471 3.92818 3.92818 0 0 0 .1119.937 2.536 2.536 0 0 0 .35871.8194 1.83829 1.83829 0 0 0 .64318.58357 1.95744 1.95744 0 0 0 .9632.21962 1.55383 1.55383 0 0 0 1.20479-.47114 2.17357 2.17357 0 0 0 .53023-1.24243h1.62837a3.87815 3.87815 0 0 1 -.33257 1.29577 3.08815 3.08815 0 0 1 -.707.98516 2.99838 2.99838 0 0 1 -1.02805.62122 3.76351 3.76351 0 0 1 -1.29577.2144 3.92217 3.92217 0 0 1 -1.57918-.30538 3.393 3.393 0 0 1 -1.18387-.84084 3.71981 3.71981 0 0 1 -.73835-1.25812 4.61521 4.61521 0 0 1 -.25727-1.55827 4.77251 4.77251 0 0 1 .25727-1.59017 3.83132 3.83132 0 0 1 .73835-1.28008 3.3914 3.3914 0 0 1 1.18387-.85653 3.86194 3.86194 0 0 1 1.57918-.31061 3.853 3.853 0 0 1 1.19433.182 3.25411 3.25411 0 0 1 1.00712.53023 2.86159 2.86159 0 0 1 .73312.86228 3.08969 3.08969 0 0 1 .36395 1.1776h-1.6273a1.37793 1.37793 0 0 0 -.19347-.52974z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m7.90973 4a4.12016 4.12016 0 0 1 1.43992.24673 3.12441 3.12441 0 0 1 1.15435.73966 3.404 3.404 0 0 1 .76154 1.232 4.96822 4.96822 0 0 1 .27464 1.737 5.52384 5.52384 0 0 1 -.22431 1.61335 3.55236 3.55236 0 0 1 -.67729 1.27744 3.1858 3.1858 0 0 1 -1.13137.84579 3.8368 3.8368 0 0 1 -1.59748.30803h-3.44991v-8zm-.12255 6.52123a2.252 2.252 0 0 0 .73966-.12364 1.62238 1.62238 0 0 0 .6379-.40867 2.04332 2.04332 0 0 0 .44861-.74513 3.28738 3.28738 0 0 0 .1685-1.12042 4.64682 4.64682 0 0 0 -.11817-1.09253 2.18483 2.18483 0 0 0 -.38624-.83484 1.7182 1.7182 0 0 0 -.71121-.53176 2.83742 2.83742 0 0 0 -1.09307-.18492h-1.255v5.04192z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m11.18354 4v1.47931h-4.22454v1.714h3.8766v1.36718h-3.8766v1.96074h4.3143v1.47877h-6.07266v-8z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#00843d\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m6.083 11.53381a2.63844 2.63844 0 0 1 -1.03434.21619 3.67706 3.67706 0 0 1 -1.48049-.28629 3.18108 3.18108 0 0 1 -1.10987-.78829 3.48761 3.48761 0 0 1 -.69221-1.17949 4.327 4.327 0 0 1 -.24119-1.46088 4.47445 4.47445 0 0 1 .24119-1.49078 3.59212 3.59212 0 0 1 .69221-1.20008 3.17958 3.17958 0 0 1 1.10987-.803 3.62061 3.62061 0 0 1 1.48049-.29119 3.48952 3.48952 0 0 1 1.06968.1657 3.037 3.037 0 0 1 .93339.48679 2.63108 2.63108 0 0 1 1.01968 1.87758h-1.506a1.5098 1.5098 0 0 0 -.54219-.90349 1.57786 1.57786 0 0 0 -.97458-.30149 1.84057 1.84057 0 0 0 -.903.20589 1.70591 1.70591 0 0 0 -.603.55249 2.42823 2.42823 0 0 0 -.3363.7878 3.95986 3.95986 0 0 0 -.1049.91378 3.68309 3.68309 0 0 0 .1049.87849 2.37769 2.37769 0 0 0 .3363.76819 1.72339 1.72339 0 0 0 .603.54709 1.83509 1.83509 0 0 0 .903.2059 1.711 1.711 0 0 0 1.20989-.3966 1.72506 1.72506 0 0 0 .49709-1.14958h-1.58636v-1.17454h3.012v3.87526h-1.004l-.16079-.81329a2.3565 2.3565 0 0 1 -.93347.75784z\\\"></path><path d=\\\"m11.03239 4.4206v5.84352h3.49434v1.32509h-5.06994v-7.16861z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#da291c\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><path fill=\\\"#fff\\\" d=\\\"m6.16836 4 1.871 5.50147h.02188l1.7704-5.50147h2.47609v8h-1.64673v-5.66942h-.023l-1.96071 5.66942h-1.35567l-1.96075-5.61308h-.02187v5.61308h-1.64673v-8z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#ffc72c\\\" d=\\\"m8.03494 0a8.04088 8.04088 0 0 0 -8 8 8 8 0 1 0 8-8\\\"></path><path fill=\\\"#1c1e23\\\" d=\\\"m12.55163 6.95515-.43927-3.29782c-.11487-.59469-.50684-.83119-1.088-1.07447a9.94811 9.94811 0 0 0 -2.99371-.52036 9.94139 9.94139 0 0 0 -2.98694.52036c-.57444.24328-.97312.47978-1.09476 1.07447l-.43251 3.29782v4.55476h.80756v.77716a.56688.56688 0 0 0 .29735.48655c.04054.02029.08109.04054.11487.05407a.689.689 0 0 0 .09462.027.57561.57561 0 0 0 .15546.02029h.2297a.63557.63557 0 0 0 .669-.58793v-.77716h4.363v.77716a.56686.56686 0 0 0 .29735.48655c.04054.02029.08109.04054.11487.05407a.689.689 0 0 0 .09462.027.57561.57561 0 0 0 .15546.02029h.22974a.63556.63556 0 0 0 .669-.58793v-.77716h.74252zm-6.64292-3.93953h4.25065c.20273 0 .37167.23083.37167.50782s-.16894.50781-.37167.50781h-4.25065c-.20272 0-.37167-.23083-.37167-.50781s.16896-.50782.37167-.50782zm-1.03959 4.55438.3006-2.33388a.31412.31412 0 0 1 .32228-.26712h5.12466a.31832.31832 0 0 1 .32226.26712l.34393 2.33388v.10421a.32557.32557 0 0 1 -.3223.32579h-5.7811a.3317.3317 0 0 1 -.31033-.3388.23335.23335 0 0 1 0-.0912zm.6465 2.75347a.82854.82854 0 1 1 -.03709-1.65432.83107.83107 0 1 1 .03709 1.65432zm5.01541 0a.82854.82854 0 1 1 -.03709-1.65432.83107.83107 0 1 1 .03709 1.65432z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#80276c\\\" d=\\\"m6.19 11.91998h3.63v1h-3.63z\\\" transform=\\\"matrix(.99919448 .0401297 -.0401297 .99919448 .50486 -.31123)\\\"></path><path fill=\\\"#80276c\\\" d=\\\"m8 0a8.02127 8.02127 0 0 0 -7.65785 10.376 7.78359 7.78359 0 0 0 5.28185 5.28185 8.008 8.008 0 1 0 2.376-15.65785\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m10.33 11.75 1.15-.85a1.46975 1.46975 0 0 0 .52-.84v-4.82a.88891.88891 0 0 0 -.3-.66.79321.79321 0 0 1 -.31-.6l-.01-1.19a.81979.81979 0 0 0 -.65-.79 20.91806 20.91806 0 0 0 -2.5-.52 1.06538 1.06538 0 0 0 -.47 0c-.7.15-1.55.3-2.24.48-.42.12-.85.35-.85.85v1.18a.80288.80288 0 0 1 -.33.61.851.851 0 0 0 -.31.66v4.8a1.40971 1.40971 0 0 0 .48.84l1.1.81-1.74 2.84h1.13l.24-.39h5.53l.13.22.02.03.08.14h1.05zm.95-2.3a.73.73 0 1 1 -.73-.73.72767.72767 0 0 1 .73.73zm-1.44 3.15h-3.65l.41-.68h2.84l.03.06.35.58zm-1.14-9.65a.24471.24471 0 0 1 .3-.24l1.21.25a.25351.25351 0 0 1 .2.24v.73a.24955.24955 0 0 1 -.3.24l-1.21-.24a.23758.23758 0 0 1 -.2-.24zm-.72 2.26a.82.82 0 1 1 -.82.82.82371.82371 0 0 1 .82-.82zm-2.32-2.01a.25358.25358 0 0 1 .2-.24l1.21-.25a.24868.24868 0 0 1 .3.24v.74a.24683.24683 0 0 1 -.2.24l-1.22.24a.24554.24554 0 0 1 -.29-.24zm-.2 6.98a.73.73 0 1 1 .73-.73.72767.72767 0 0 1 -.73.73zm0 3.61.5-.82h4.1l.49.82z\\\"></path><path d=\\\"m11 14.55h-.01l-.07-.14z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#008eaa\\\" d=\\\"m14.14 13.11v-2.78h-1.54v4.21a.00976.00976 0 0 1 -.00995.01 7.96744 7.96744 0 0 1 -9.18005-.01c-.07995-.06-.16-.11-.24-.18l-1.53-1.52a7.91568 7.91568 0 0 1 -1.64-4.84 8 8 0 0 1 16 0 7.8954 7.8954 0 0 1 -1.86 5.11z\\\"></path><path fill=\\\"#008eaa\\\" d=\\\"m14.14 10.33v2.78a2.33839 2.33839 0 0 1 -.29.35 7.5757 7.5757 0 0 1 -1.25 1.08v-4.21z\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m12.6 13.07v1.1a.81712.81712 0 0 1 -.19-.09 1.08477 1.08477 0 0 0 -1.15-.03 1.327 1.327 0 0 1 -1.36.03 1.1128 1.1128 0 0 0 -1.19-.04 1.457 1.457 0 0 1 -1.43 0 1.09284 1.09284 0 0 0 -1.19.04 1.30468 1.30468 0 0 1 -1.36-.04 1.12472 1.12472 0 0 0 -1.16.04.25063.25063 0 0 0 -.07.04v-1.09a.07583.07583 0 0 0 .04-.02 1.22855 1.22855 0 0 1 1.4.08 1.37912 1.37912 0 0 0 1.19-.07 1.18568 1.18568 0 0 1 1.29.04 1.31353 1.31353 0 0 0 1.16 0 1.186 1.186 0 0 1 1.29-.04 1.38316 1.38316 0 0 0 1.19.07 1.24661 1.24661 0 0 1 1.4-.08.351.351 0 0 0 .14.06z\\\"></path><path d=\\\"m11.06 10.98a.87762.87762 0 0 1 -.15.05 3.51709 3.51709 0 0 1 -.16-1.49 10.81375 10.81375 0 0 1 1.85-2.66l-.6-.24v-3.64h-1v-1h-1.99v.01h-.01v-.01h.01v-.99h-2v.99h-2.01v1h-1v3.64l-.59.24a10.46678 10.46678 0 0 1 1.83 2.64 3.75072 3.75072 0 0 1 -.15 1.5.41845.41845 0 0 1 -.15-.04 1.2264 1.2264 0 0 0 -1.4-.07c-.00995.01-.03.01-.04.02v1.08c.02-.01.05-.03.07-.04a1.10228 1.10228 0 0 1 1.16-.03 1.32675 1.32675 0 0 0 1.36.03 1.09231 1.09231 0 0 1 1.19-.03 1.457 1.457 0 0 0 1.43 0 1.09273 1.09273 0 0 1 1.19.04 1.32768 1.32768 0 0 0 1.36-.04 1.12876 1.12876 0 0 1 1.15.03 1.73655 1.73655 0 0 0 .19.1v-1.1a.4229.4229 0 0 1 -.14-.06 1.26247 1.26247 0 0 0 -1.4.07zm-3.06-8.98h.01v.01h-.01zm2.01 3.84v-.84h-1.01v-1h-2v1h-1v.84l-1 .4v-2.24h1v-1h4v1h1v2.24z\\\"></path><path d=\\\"m8 2h.01001v.01001h-.01001z\\\"></path><path d=\\\"m9 2h.01001v.01001h-.01001z\\\"></path><path d=\\\"m8 2h.01001v.01001h-.01001z\\\"></path><path d=\\\"m9 2h.01001v.01001h-.01001z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#494f5b\\\" d=\\\"m24 0a24 24 0 1 0 24 24 24 24 0 0 0 -24-24\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m25.8889 5.8222a1.4111 1.4111 0 1 0 -1.4111-1.4111 1.411 1.411 0 0 0 1.4111 1.4111z\\\"></path><path d=\\\"m31.4555 34.2111a4.9779 4.9779 0 0 0 3.889-4.8222v-18.1445a5.0112 5.0112 0 0 0 -5.0778-4.9111h-12.5333a5.0112 5.0112 0 0 0 -5.1 4.9v18.1556a4.9779 4.9779 0 0 0 3.8889 4.8222l-5.8556 8.7889h3.4l4.1889-6.1445h11.5555l4.1889 6.1445h3.3333zm-10.7555-25.9889a.8445.8445 0 0 1 .8445-.8111h4.9555a.8444.8444 0 0 1 .8333.8111v1.4445l-.0006.0339a.8334.8334 0 0 1 -.866.7994l-4.9222-.0111a.8333.8333 0 0 1 -.8445-.8222zm-3.1111 23.3334a2.2223 2.2223 0 1 1 2.2222-2.2223 2.2223 2.2223 0 0 1 -2.2222 2.2223zm.2889-11.8112c-.0758.0036-.1518.0036-.2276 0a2.4221 2.4221 0 0 1 -2.3057-2.5333v-3.2667a2.4109 2.4109 0 0 1 2.5333-2.5444h12.2222a2.4113 2.4113 0 0 1 2.5333 2.5444v3.2667q.0054.1137 0 .2276a2.4221 2.4221 0 0 1 -2.5333 2.3057zm12.4333 11.8112a2.2334 2.2334 0 1 1 .0223 0z\\\"></path><path d=\\\"m22.1445 5.8222h-.0334.0337a1.4113 1.4113 0 1 0 -1.4115-1.4115 1.4111 1.4111 0 0 0 1.4115 1.4119z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#494f5b\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m6.67 1.41a.56974.56974 0 0 1 .57-.57.58.58 0 1 1 0 1.16h-.02a.57707.57707 0 0 1 -.55-.59z\\\"></path><path d=\\\"m12.01 9.84v-5.91a1.43829 1.43829 0 0 0 -1.44-1.43h-5.13a1.42971 1.42971 0 0 0 -1.43 1.43v5.9a1.88 1.88 0 0 0 1.53 1.85l-1.54 2.32h1.02l1.26-1.84h3.46l1.26 1.84h1l-1.54-2.32a1.8774 1.8774 0 0 0 1.55-1.84zm-5.01-6.93h2v.84h-2zm-.58 8.3a.77.77 0 1 1 .77-.77.77027.77027 0 0 1 -.77.77zm3.15 0a.77.77 0 1 1 0-1.54.77.77 0 1 1 0 1.54zm1.44-4.71a.52279.52279 0 0 1 -.52.52h-4.96a.51641.51641 0 0 1 -.52-.52v-1.96a.51646.51646 0 0 1 .52-.52h4.96a.52284.52284 0 0 1 .52.52z\\\"></path><path d=\\\"m8.19 1.41a.57841.57841 0 0 1 .58-.57.56974.56974 0 0 1 .57.57.57438.57438 0 0 1 -.57.59.58266.58266 0 0 1 -.58-.59z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#ed8b00\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m1.81834 6.54427a3.5921 3.5921 0 0 1 .6922-1.20008 3.17962 3.17962 0 0 1 1.10988-.803 3.62054 3.62054 0 0 1 1.48049-.29119 3.61289 3.61289 0 0 1 1.48637.2912 3.17488 3.17488 0 0 1 1.104.803 3.59428 3.59428 0 0 1 .69319 1.20008 4.47445 4.47445 0 0 1 .24119 1.49078 4.327 4.327 0 0 1 -.24119 1.46088 3.48977 3.48977 0 0 1 -.69319 1.17949 3.176 3.176 0 0 1 -1.104.78829 3.66921 3.66921 0 0 1 -1.48637.28628 3.677 3.677 0 0 1 -1.48049-.28629 3.18112 3.18112 0 0 1 -1.10988-.78829 3.48759 3.48759 0 0 1 -.6922-1.17949 4.327 4.327 0 0 1 -.24119-1.46088 4.47445 4.47445 0 0 1 .24119-1.49078zm1.44029 2.36927a2.37747 2.37747 0 0 0 .3363.76819 1.72331 1.72331 0 0 0 .603.54709 1.835 1.835 0 0 0 .903.2059 1.84164 1.84164 0 0 0 .904-.2059 1.72881 1.72881 0 0 0 .602-.54709 2.35675 2.35675 0 0 0 .3363-.76819 3.63424 3.63424 0 0 0 .10588-.87849 3.90728 3.90728 0 0 0 -.10588-.91378 2.40722 2.40722 0 0 0 -.3363-.7878 1.7112 1.7112 0 0 0 -.602-.55249 1.84715 1.84715 0 0 0 -.904-.20589 1.84052 1.84052 0 0 0 -.903.20589 1.70583 1.70583 0 0 0 -.603.55249 2.428 2.428 0 0 0 -.3363.7878 3.95986 3.95986 0 0 0 -.10491.91378 3.6831 3.6831 0 0 0 .10491.87849z\\\"></path><path d=\\\"m11.27582 4.4206v5.84352h3.49435v1.32509h-5.06994v-7.16861z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#da291c\\\" d=\\\"m8 0a8 8 0 1 0 8 8 8 8 0 0 0 -8-8\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m6.01545 4.25a2.39689 2.39689 0 0 1 .90832.16341 2.09735 2.09735 0 0 1 .694.44567 1.9348 1.9348 0 0 1 .44036.65684 2.09816 2.09816 0 0 1 .1528.80327 2.26208 2.26208 0 0 1 -.278 1.14494 1.74718 1.74718 0 0 1 -.90938.73536v.02122a1.26481 1.26481 0 0 1 .504.25679 1.42114 1.42114 0 0 1 .32576.4096 1.91173 1.91173 0 0 1 .18358.51995 4.56343 4.56343 0 0 1 .07958.5677c.00637.11884.0138.25891.02122.4202.00637.16129.01911.32576.03608.49342a3.41227 3.41227 0 0 0 .08383.4775 1.113 1.113 0 0 0 .174.38413h-1.649a2.91366 2.91366 0 0 1 -.16871-.851c-.02123-.329-.052-.6441-.09444-.94546a1.4991 1.4991 0 0 0 -.35645-.86165 1.2331 1.2331 0 0 0 -.89346-.2727h-1.64904v2.93081h-1.649v-7.5zm-.58786 3.3924a1.24739 1.24739 0 0 0 .85-.25148 1.04463 1.04463 0 0 0 .28438-.81919.99843.99843 0 0 0 -.28442-.79373 1.26393 1.26393 0 0 0 -.85-.24618h-1.80705v2.11058z\\\"></path><path d=\\\"m11.20433 4.25v6.11312h3.65556v1.38688h-5.30454v-7.5z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#fff\\\" d=\\\"m27.92 1.0025a19.07 19.07 0 1 1 -10.8513 34.7012l-10.315 10.2951a3.3658 3.3658 0 0 1 -4.77-4.75l10.315-10.315a18.899 18.899 0 0 1 -3.4387-10.8715 19.1146 19.1146 0 0 1 19.06-19.0598zm0 6.7176a12.3422 12.3422 0 1 0 12.3425 12.3422 12.2866 12.2866 0 0 0 -12.3425-12.3423z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m42.94908 21.61-1.84056-14.63c-.46772-2.64-2.115-3.67-4.56567-4.75a39.04369 39.04369 0 0 0 -12.52764-2.32 39.21741 39.21741 0 0 0 -12.54795 2.32c-2.42011 1.06-4.06741 2.11-4.56566 4.75l-1.85068 14.63v20.24h3.24885v3.525a2.65516 2.65516 0 0 0 2.66923 2.625 2.65522 2.65522 0 0 0 2.66925-2.625v-3.525h20.82007v3.525a2.66961 2.66961 0 0 0 5.33848 0v-3.525h3.15228zm-26.73308-18h15.65953a1.18036 1.18036 0 1 1 0 2.36h-15.65953a1.18015 1.18015 0 1 1 0-2.36zm-7.7993 17.57 1.5253-11.55a1.52367 1.52367 0 0 1 1.52528-1.25h25.28913a1.513 1.513 0 0 1 1.51511 1.25l1.52528 11.55a1.31759 1.31759 0 0 1 0 .4v.08a1.49613 1.49613 0 0 1 -1.52528 1.49h-28.40072a1.50954 1.50954 0 0 1 -1.4541-1.57 1.31759 1.31759 0 0 1 0-.4zm2.5523 14.41a2.79533 2.79533 0 1 1 2.837-2.8 2.817 2.817 0 0 1 -2.837 2.8zm26.15346 0a2.79549 2.79549 0 1 1 2.84718-2.8 2.817 2.817 0 0 1 -2.84717 2.8z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 16 16\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m14.2452 6.9551-.4392-3.2978c-.1149-.5947-.5069-.8312-1.088-1.0744a9.9485 9.9485 0 0 0 -2.9937-.52 9.9418 9.9418 0 0 0 -2.987.52c-.5744.2432-.9731.48-1.0947 1.0744l-.4326 3.2978v4.5549h.8075v.7772a.5668.5668 0 0 0 .2974.4865c.04.02.0811.0406.1148.0541a.69.69 0 0 0 .0947.027.5762.5762 0 0 0 .1554.02h.23a.6356.6356 0 0 0 .669-.5879v-.7769h4.363v.7772a.5667.5667 0 0 0 .2973.4865c.0406.02.0811.0406.1149.0541a.6885.6885 0 0 0 .0946.027.5769.5769 0 0 0 .1555.02h.23a.6356.6356 0 0 0 .669-.5879v-.7769h.7425zm-6.6429-3.9395h4.2507c.2027 0 .3716.2309.3716.5078s-.1689.5078-.3716.5078h-4.2507c-.2027 0-.3716-.2308-.3716-.5078s.1693-.5078.3716-.5078zm-1.0396 4.5544.3006-2.3339a.3143.3143 0 0 1 .3223-.2671h5.1244a.3183.3183 0 0 1 .3222.2671l.344 2.3339v.1042a.3256.3256 0 0 1 -.322.3258h-5.7811a.3318.3318 0 0 1 -.31-.3388.2326.2326 0 0 1 -.0004-.0912zm.6465 2.7535a.8285.8285 0 1 1 -.0371-1.6543.8311.8311 0 1 1 .0371 1.6543zm5.0154 0a.8285.8285 0 1 1 -.037-1.6543.8311.8311 0 1 1 .037 1.6543z\\\"></path><path fill=\\\"#7c878e\\\" d=\\\"m8.0009 0a8.0405 8.0405 0 0 0 -7.9991 8 7.9991 7.9991 0 1 0 7.9991-8\\\"></path><g fill=\\\"#fff\\\"><path d=\\\"m3.6379 9.8223a1.14 1.14 0 0 0 .3465.4066 1.4926 1.4926 0 0 0 .5068.2309 2.3973 2.3973 0 0 0 .6027.0753 3.1157 3.1157 0 0 0 .4516-.0351 1.5712 1.5712 0 0 0 .4519-.1354.9923.9923 0 0 0 .3515-.2762.6942.6942 0 0 0 .14-.4468.6287.6287 0 0 0 -.1854-.4716 1.4719 1.4719 0 0 0 -.4868-.3012 4.88 4.88 0 0 0 -.6827-.211q-.3819-.09-.7733-.2007a6.8 6.8 0 0 1 -.7829-.246 2.688 2.688 0 0 1 -.683-.3764 1.7749 1.7749 0 0 1 -.4868-.5777 1.7528 1.7528 0 0 1 -.1857-.8383 1.8759 1.8759 0 0 1 .2359-.9587 2.1364 2.1364 0 0 1 .6174-.6776 2.69 2.69 0 0 1 .8634-.4017 3.6837 3.6837 0 0 1 .964-.13 4.5682 4.5682 0 0 1 1.0791.1255 2.6987 2.6987 0 0 1 .9189.4067 2.0622 2.0622 0 0 1 .6376.7171 2.2036 2.2036 0 0 1 .2359 1.0593h-1.5261a1.2706 1.2706 0 0 0 -.1358-.5321.8879.8879 0 0 0 -.3061-.3314 1.2971 1.2971 0 0 0 -.4365-.1707 2.6957 2.6957 0 0 0 -.5371-.05 1.86 1.86 0 0 0 -.3818.04 1.0222 1.0222 0 0 0 -.3462.14.8675.8675 0 0 0 -.2561.2511.6746.6746 0 0 0 -.1.3815.6437.6437 0 0 0 .08.3413.7137.7137 0 0 0 .3162.241 4.0247 4.0247 0 0 0 .6527.2209q.4164.1105 1.0892.2811.2008.04.5574.1455a2.6774 2.6774 0 0 1 .7077.3365 2.1409 2.1409 0 0 1 .6073.6174 1.7574 1.7574 0 0 1 .2562.9889 2.1911 2.1911 0 0 1 -.1909.9136 1.9859 1.9859 0 0 1 -.5672.728 2.7248 2.7248 0 0 1 -.9336.4768 4.4152 4.4152 0 0 1 -1.29.1708 4.5312 4.5312 0 0 1 -1.15-.1457 2.887 2.887 0 0 1 -.9838-.4563 2.2529 2.2529 0 0 1 -.6778-.7931 2.3668 2.3668 0 0 1 -.241-1.1444h1.5261a1.3138 1.3138 0 0 0 .1306.6123z\\\"></path><path d=\\\"m10.5254 4.4207v5.8433h3.4938v1.3253h-5.0702v-7.1686z\\\"></path></g></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#1c1e23\\\" d=\\\"m20.27 16.87-6.54-3.81-1.56-5.86a1 1 0 0 0 -1.17-.7l-5.08 1.37a1 1 0 0 0 -.69 1.21l1 3.95-3.89 1.06a1 1 0 0 0 -.69 1.22l1.35 5.09a1 1 0 0 0 1.2.7l6.12-1.66 6.35 3.7-5.78 3.37-7.19-1.94a1 1 0 0 0 -1.2.7l-1.35 5.09a1 1 0 0 0 .69 1.21l4.44 1.2-1.22 4.6a1 1 0 0 0 .69 1.21l5.05 1.42a1 1 0 0 0 1.2-.7l1.58-5.94 6.69-3.89v7.71l-5.33 5.32a1 1 0 0 0 0 1.4l3.7 3.73a1 1 0 0 0 1.39 0l3.58-3.63 3.67 3.7a1 1 0 0 0 1.39 0l3.7-3.7a1 1 0 0 0 0-1.39l-4.92-5v-8.19l7.29 4.24 1.49 5.59a1 1 0 0 0 1.2.7l5-1.37a1 1 0 0 0 .7-1.21l-1.24-4.66 4.23-1.14a1 1 0 0 0 .7-1.21l-1.32-5.09a1 1 0 0 0 -1.2-.7l-7.38 2-5.87-3.42 6.63-3.86 6.73 1.82a1 1 0 0 0 1.2-.7l1.39-5.1a1 1 0 0 0 -.7-1.22l-4-1.07 1.05-3.94a1 1 0 0 0 -.69-1.21l-5-1.37a1 1 0 0 0 -1.2.7l-1.46 5.27-7.55 4.4v-6.17l4.92-4.95a1 1 0 0 0 0-1.4l-3.7-3.72a1 1 0 0 0 -1.39 0l-3.52 3.55-3.76-3.77a1 1 0 0 0 -1.39 0l-3.7 3.73a1 1 0 0 0 0 1.39l5.33 5.37z\\\"></path></svg>\"","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\" viewBox=\\\"0 0 48 48\\\"><path fill=\\\"#fff\\\" d=\\\"m42.88 45.83a2.1 2.1 0 0 1 -.87-.19l-15.92-7.17a5.23 5.23 0 0 0 -2.09-.47 5.14 5.14 0 0 0 -2.08.44l-15.92 7.2a2.1 2.1 0 0 1 -.87.19 2.14 2.14 0 0 1 -1.76-1 2 2 0 0 1 -.12-2l18.86-40.83a2.08 2.08 0 0 1 3.78 0l18.87 40.87a2 2 0 0 1 -.12 2 2.14 2.14 0 0 1 -1.76.96z\\\"></path><path d=\\\"m24 2.34a.55.55 0 0 1 .53.33l18.86 40.83a.49.49 0 0 1 0 .53.61.61 0 0 1 -.49.3.65.65 0 0 1 -.25-.06l-15.95-7.16a6.57 6.57 0 0 0 -5.4 0l-15.93 7.16a.65.65 0 0 1 -.25.06.61.61 0 0 1 -.49-.3.49.49 0 0 1 0-.53l18.84-40.83a.55.55 0 0 1 .53-.33m0-3a3.53 3.53 0 0 0 -3.25 2.07l-18.87 40.83a3.59 3.59 0 0 0 3.24 5.09 3.74 3.74 0 0 0 1.49-.33l15.92-7.17a3.64 3.64 0 0 1 2.94 0l15.92 7.17a3.74 3.74 0 0 0 1.49.32 3.59 3.59 0 0 0 3.24-5.09l-18.87-40.82a3.53 3.53 0 0 0 -3.25-2.07z\\\"></path></svg>\"","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 806;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t806: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunksite_dotcom\"] = globalThis[\"webpackChunksite_dotcom\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216,514], () => (__webpack_require__(76754)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","alertClassNames","_a","expanded","priority","description","classNames","exports","effect","icon_alerts_triangle_svg_1","icon_cancelled_default_svg_1","icon_snow_default_svg_1","icon_shuttle_default_svg_1","humanLifecycle","lifecycle","severity","alert","alertClasses","push","react_1","className","join","humanLabelForAlert","split","map","word","charAt","toUpperCase","slice","alertDescription","tabIndex","role","id","ref","panel","focus","dangerouslySetInnerHTML","__html","updated_at","useState","toggleExpanded","onClick","strippedAlertUrl","url","replace","headerContent","header","onKeyPress","e","handleReactEnterKeyPress","iconForAlert","effectNameForAlert","alertLabel","noDescription","caret","caretIcon","alerts","key","dir","headsigns","length","direction","route","directionIsEmpty","condensed","hideDirectionDestination","type","direction_names","direction_id","direction_destinations","headsign","Headsign_1","name","routeType","identifier","icon","isSelected","headsignClass","renderTime","tnmTime","headsignName","idx","data","modifier","status","prediction","scheduled_time","time","classModifier","includes","statusForCommuterRail","timeForCommuterRail","trackForCommuterRail","renderTimeDefault","props","trainName","times","first","second","firstMeridiem","secondMeridiem","isMinutes","undefined","parseInt","reverse","Date","parse","concat","headsignNameClass","renderHeadsignName","train_number","ModeButton","mode","isModeSelected","FilterButton_1","ModeIcon_1","shouldShowModeButton","modeButtonsToShow","onModeClickAction","routeBgClass","href","busClass","isASilverLineRoute","breakTextAtSlash","title","alertIcon","dispatch","stopId","clickStopCardAction","style","cursor","handleKeyPress","stop","directions","distance","isSmallBreakpoint","useSMDown","containerProps","buttonProps","icon_circle_t_small_svg_1","renderStopIcon","isABusRoute","accessibility","accessibleIcon","alertsByStop","filter","alert_1","Direction_1","toLowerCase","isACommuterRailRoute","isAGreenLineRoute","routeToModeName","BOSTON_TIMEZONE","unformatted","part","Number","year","month","day","date","getFullYear","getMonth","getDate","stringToDateObject","toLocaleDateString","timeZone","timeStr1","timeStr2","today","dateFormatted","Intl","DateTimeFormat","format","fullDate1","fullDate2","timeInMs1","getTime","timeInMs2","comparison","dateTimeString","overrideFormat","dateTime","parseISO","formatString","getMinutes","formatInTimeZone","targetDate","seconds","differenceInSeconds","date_fns_1","Math","floor","formatToBostonTime","dateTime1","dateTime2","callback","delay","timer","_i","args","window","clearTimeout","setTimeout","r","result","isFetchFailed","Error","Promise","fetch","resp","ok","json","fetchJson","then","icon_accessible_small_svg_1","icon_blue_line_default_svg_1","icon_mode_bus_small_svg_1","icon_mode_commuter_rail_small_svg_1","icon_mode_ferry_small_svg_1","icon_mode_subway_default_svg_1","icon_green_line_small_svg_1","icon_green_line_b_small_svg_1","icon_green_line_c_small_svg_1","icon_green_line_d_small_svg_1","icon_green_line_e_small_svg_1","icon_mattapan_line_small_svg_1","icon_orange_line_small_svg_1","icon_red_line_small_svg_1","icon_silver_line_small_svg_1","icon_vehicle_bordered_expanded_svg_1","icon_search_reverse_default_svg_1","icon_bike_svg_1","icon_escalator_svg_1","icon_elevator_svg_1","icon_fares_svg_1","routeId","startsWith","commuterRailIcon","ferryIcon","blueLineIcon","greenLineIcon","greenBLineIcon","greenCLineIcon","greenDLineIcon","greenELineIcon","mattapanLineIcon","orangeLineIcon","redLineIcon","silverLineIcon","busIcon","unicodeCharacter","defaultTooltipOptions","animation","html","placement","trigger","children","tooltipText","tooltipOptions","options","Object","assign","Tag","icon_crowding_svg_1","isSMDown","setIsSmallBreakpoint","useEffect","handleResize","addEventListener","removeEventListener","mediaBreakpoints","matchMedia","matches","scheduledTime","delayForCommuterRail","compareStringTimes","isSkippedOrCancelled","track","schedule_relationship","schedule","maxDifferenceInSeconds","params","encoder","keys","query","decoder","substring","reduce","kvString","val","queryReducer","svgName","ariaHide","svgText","routes","acc","find","group_name","str","text","spans","parts","forEach","span","offset","markers","points","m","latLng","latitude","longitude","latLngBounds","maxZoom","minZoom","scrollWheelZoom","touchAction","memo","bounds","boundsByMarkers","_b","defaultCenter","polylines","tileServerUrl","zoom","mapRef","createRef","useLayoutEffect","current","leafletElement","invalidateSize","leaflet","require","buildIcon_1","getBounds","Map","Marker_1","Polyline_1","Popup_1","TileLayer","boundsOrByMarkers","position","mapCenter","nonNullZoom","center","attribution","onload","container","parentElement","classList","polyline","random","positions","color","weight","dashArray","lineCap","lineJoin","uniqBy","marker","icon_opts","alt","markerEl","angle","setRotationAngle","rotateMarker","zIndexOffset","z_index","keyboard","onclick","tooltip","maxHeight","react_2","routesWithDirection","distanceFormatted","StopCard_1","iconAnchor","iconSize","popupAnchor","opts","iconOpts","icon_anchor","icon_size","popup_anchor","leaflet_1","iconUrl","iconRetinaUrl","payload","effects","a","alertsForEffects","entities","some","stopAlerts","alertsForRoute","activity","activities","hasEffect","hasStopClosure","hasStationClosure","entity","trip","explodedAlerts","informed_entity","innerAcc","mergeWith","objValue","srcValue","isArray","directionId","alertsByDirectionObj","alertsByDirectionId","alertsAffectingBothDirectionsArray","alertsAffectingBothDirections","alertsDirectionArray","index","findIndex","isCurrentLifecycle","days","selectedDate","xDays","add","setHours","active_period","isInARange","ap","d","range","start","end","isValid","isDiversion","isInNextXDays","banner","facilityId","facility","facilities","facilityIds","numPredictions","isValidSuppressiveAlert","timeDataList","time_data","isCommuterRailRouteType","routeOrType","routeOrRouteId","routeTypesToMode","isBusStop","clickFeaturePillAction","renderDistance","miles","_c","routesToRender","allAreBusStops","routesWithDirectionsAreAllBusStops","parking_lots","parkingIcon","modeIcon","long_name","destination","routeNameBasedOnDirection","tab","stopReducer","state","action","target","selectedStopId","focusedBlock","shouldFilterStopCards","modeReducer","selectedTab","selectedModes","existingMode","__spreadArray","tabReducer","sidebarReducer","expandedBlocks","routesReducer","fn","parking","ModeFilter_1","updatedModes","clickModeAction","icons","icon_blue_line_small_svg_1","icon_mode_subway_small_svg_1","everyDirectionIsEmpty","every","fetchJsonOrThrow","results","statusText","stops_with_directions","routeIsEmpty","RouteCardHeader_1","count","filterStops","stopWithDirections","selectedStop","showPill","onClickPill","clickStopPillAction","filterDataByModes","modes","accumulator","filterDataByStopId","stops","stop_with_directions","shouldFilter","emptyMessage","filteredData","filterData","ModeFilterContainer_1","RouteSidebarPills_1","SidebarTitle_1","viewType","RouteCard_1","clickViewChangeAction","onClickViewChange","i","Fragment","renderRoutesLabel","groupName","routesForStop","renderRoutes","stopWithRoutes","StopWithRoutesCard_1","stopsWithRoutes","stopWithRoute","validateModeFilter","stopIds","all","responses","response","jsonData","predictedSchedulesByRoutePattern","realtimeScheduleDataAction","firstDataLoadedAction","pendingFirstData","mapData","mapId","stopsWithDistances","routesWithRealtimeSchedules","modesFromQuery","initialStateWithModes","state_1","useReducer","useRef","scrollIntoView","getSelectedStop","fetchRealtimeSchedules","routesView","RoutesSidebar_1","StopsSidebar_1","TransitNearMeMap_1","initialData","stopData","shouldFilterMarkers","shouldCenterMapOnSelectedStop","viewport","resetCenterMapOnSelectedStop","centerMapByMarker","tooltipData","visibleMarkers","setViewport","centerMap","onViewportChange","view","Map_1","MarkerWrapper_1","clickAction","state_2","markerIcon","size","hovered","Icon","initialTooltip","setHovered","Popup","Marker","toggleHovered","tooltipComponent","MapTooltip_1","buildIcon","openPopup","closePopup","onClickMarker","onMouseOver","onFocus","onMouseOut","onBlur","minWidth","onClose","clickMarkerAction","halfMile","currentLocation","withinHalfMile","accFlat","routeList","initialMarkers","isMarkerVisible","stopsForMarker","buildStopsForMarkers","boundsForMap","MapWrapper_1","findRoute","findStop","routeIndex","findHeadsign","stopIndex","directionIndex","distances","realtimeScheduleData","predictedScheduleByHeadsign","nextData","routeState","set","dot_prop_immutable_1","setRoute","stopState","setStop","headsignIndex","predictedSchedulesByHeadsign","predictedSchedules","predictedSchedule","predicted_schedules","buildHeadsign","setHeadsigns","findStopInStops","makeGroupName","findRouteInStops","routeGroupIndex","routeGroup","existingRoute","setStopInStops","setRouteGroupInStops","setRouteInStops","modeByV3ModeType","reducer","this","bind","controller","algolia_search_1","input","document","getElementById","TransitNearMeSearch","SELECTORS","latInput","lngInput","autocomplete","algolia_autocomplete_with_geo_1","selectors","indices","locationParams","LOCATION_PARAMS","popular","trip_planner_location_controls_1","POPULAR","parent","showLocation","originalOnHitSelected","onHitSelected","addWidget","lat","lng","value","submit","ev","originalEvent","_args","form","goBtn","locationLoadingIndicator","resetButton","announcer","hitsPerPage","googleMaps","realtimeDataReducer","transformRoutes","transformStops","renderMap","doWhenGoogleMapsIsReady","dataEl","stopsWithDistancesEl","getAttribute","JSON","innerHTML","parseQuery","location","search","decodeURIComponent","react_dom_1","render","TransitNearMe_1","search_1","addFilterParam","path","AlgoliaAutocompleteWithGeo","AlgoliaAutocomplete","constructor","_ref","containerEl","templates","TEMPLATES","super","debounceInterval","_parent","getParams","_popular","_loadingIndicator","getById","addUseMyLocationErrorEl","_locationParams","DEFAULT_LOCATION_PARAMS","_indices","splice","_selectors","useMyLocationErrorEl","createElement","display","host","parentNode","appendChild","_datasetSource","debounce","_locationSource","_useMyLocationSource","_popularSource","GoogleMapsHelpers","hitLimit","_onResults","hits","usemylocation","minLength","maxLength","hit","_input","address","_doLocationSearch","useMyLocationSearch","disabled","setValue","visibility","geolocationPromise","pos","onUseMyLocationResults","catch","err","onGeolocationError","code","_onLocationSearchResult","_ref2","coords","parseFloat","onReverseGeocodeResults","qs","QueryHelpers","pathname","encodeURIComponent","Turbolinks","visit","_templates","WeakMap","AlgoliaResult","_classPrivateFieldInitSpec","writable","containerElement","error","resultsContainer","_resultsContainer","_searchContainer","_resetButton","_datasets","_results","_highlightedHit","_autocomplete","_classPrivateFieldSet","querySelector","onClickSuggestion","onCursorChanged","onCursorRemoved","onOpen","onKeyup","clear","_toggleResetButton","close","_client","reset","init","client","_addResultsContainer","_buildDataset","appendTo","debug","autoselectOnBlur","openOnFocus","detachedMediaQuery","hint","cssClasses","root","prefix","_addErrorMsg","_addListeners","resetResetButton","getVal","setError","on","off","show","dropdown","getElementsByClassName","item","errorMsg","errorContainer","acDialog","positionDropdown","announceResults","borderWidth","$","css","offsetLeft","offsetTop","width","offsetWidth","marginLeft","marginTop","dialog","Array","from","querySelectorAll","s","clickHighlightedOrFirstResult","clickFirstResult","firstIndex","preventDefault","_ref3","post","analyticsData","onHitSelectedCallback","indexName","source","displayKey","DISPLAY_KEYS","suggestion","renderResult","footer","renderFooterTemplate","_emptySearchSource","setVal","change","getValue","locations","autocompleteByGoogle","locationAutocompleteBacking","poweredByGoogleLogo","hogan","fontAwesomeIcon","formattedDate","threePlusIcons","default","iconsFromGTFSAncestries","ancestries","anc","Icons","_subwayRouteIcon","Green","Red","Orange","Blue","Mattapan","iconFromGTFSId","toSubway","iconFromGTFS","ancestry","iconsFromGTFSIds","iconsFromGTFSAncestry","contentIcon","search_api_datasource","_file_type","_fileIcon","search_result","news_entry","event","project","project_update","page","landing_page","person","_content_type","getIcon","_getStopOrStationIcon","_iconFromRoute","related_transit_gtfs_id","related_transit_gtfs_ancestry","_","getTransitIcons","getUrl","_file_uri","_search_result_url","_content_url","_contentUrl","getTitle","highlighted_spans","highlightText","_highlightResult","getRouteTitle","search_result_title","file_name_raw","content_title","_contentTitle","_getAlertIcon","hasAlert","stopsWithAlertsDiv","dataset","stopsWithAlerts","_stopsWithAlerts","routesWithAlertsDiv","routesWithAlerts","_routesWithAlerts","_featuresToIcons","features","feature","_standardizeFeatureName","_formatDate","getFeatureIcons","alertFeature","filteredFeatures","allIcons","featuresWithoutBranches","branches","greenLinePosition","_sortFeatures","zoneIcon","zone","_getCommuterRailZone","_stopIcons","_content_posted_on","projectsDate","_file_created","pagesdocumentsDate","dateString","dateStringWithTime","_contentDate","parseResult","hitIcon","hitUrl","hitTitle","hasDate","hitFeatureIcons","arguments","parsedResult","queries","defaultParams","_queries","_activeQueryIds","_defaultParams","_viewMoreInc","_lastQuery","_doBlankSearch","_widgets","widgets","resetDefaultParams","resetWidgets","queryId","stringify","console","addPage","group","toggleError","allQueries","_buildAllQueries","_doSearch","updateWidgets","resolve","_sendQueries","_processAlgoliaResults","log","_addAnalyticsData","queryID","objectID","body","requests","reject","ajax","dataType","contentType","done","fail","requestedQueryIds","_buildQuery","currentQuery","clickAnalytics","updateAllParams","updateActiveQueries","queryIds","removeActiveQuery","indexOf","addActiveQuery","updateFacetFilters","filters","addFacetFilter","removeFacetFilter","updateParams","updateParamsByKey","widget","searchedQueries","facetLength","searchResults","facetResults","hasError","navigator","geolocation","getCurrentPosition","sessionToken","tokenObj","getJSON","Pf","processAutocompleteResults","lookupPlace","processPlacesCallback","reverseGeocode","processGeocodeCallback","predictions","predictionResults","p","nbHits","_ref4","parsedResults","formatted","callbacks","mapsCallback","isMapReady","getFeatureIcon","TripPlannerLocControls","toInput","to","fromInput","toLat","toLng","fromLat","fromLng","toInputDirty","fromInputDirty","toController","Algolia","INDICES","PARAMS","fromController","toAutocomplete","fromAutocomplete","autocompletes","ac","removeMarker","useMyLocation","reverseTrip","setupFormValidation","swapMarkers","resetResetButtons","onSubmit","onInvalidAddress","onAutocompleteShown","onInputReset","onInputChange","missingFrom","missingTo","srcElement","errorType","required","inputDirty","remove","setAttribute","updateErrorContent","static","locationError","updateMarker","detail","label","Event","dispatchEvent","fromVal","toVal","setAutocompleteValue","_geoloc","res","blur","latEl","lngEl","logo","fromAc","toAc","fromError","toError","fromId","toId","facets","facetFilters","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","call","amdD","O","chunkIds","notFulfilled","Infinity","fulfilled","j","n","getter","__esModule","getPrototypeOf","obj","t","ns","create","def","getOwnPropertyNames","definition","o","defineProperty","enumerable","get","g","globalThis","Function","hmd","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}